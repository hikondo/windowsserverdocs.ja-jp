---
title: ファイル スクリーン テンプレートを作成する
description: この記事では、ファイル スクリーン テンプレートを作成する方法について説明します。
ms.date: 7/7/2017
ms.prod: windows-server
ms.technology: storage
ms.topic: article
author: JasonGerend
manager: brianlic
ms.author: jgerend
ms.openlocfilehash: 87df941015b240fd34028e59b8aea489e9410834
ms.sourcegitcommit: 771db070a3a924c8265944e21bf9bd85350dd93c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2020
ms.locfileid: "85475629"
---
# <a name="create-a-file-screen-template"></a>ファイル スクリーン テンプレートを作成する

> 適用対象: Windows Server (半期チャネル)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2

*ファイル スクリーン テンプレート*では、スクリーン処理するファイル グループや実行するスクリーン処理の種類 (アクティブまたはパッシブ) を定義するほか、必要に応じて、ユーザーが承認されていないファイルを保存したとき (または保存しようとしたとき) に自動的に生成される通知のセットを定義することができます。

ファイル サーバー リソース マネージャーは、管理者や特定のユーザーへの電子メール メッセージの送信、イベントの記録、コマンドやスクリプトの実行、レポートの生成に使用できます。 また 1 つのファイル スクリーン イベントに対して、複数の種類の通知を構成できます。

テンプレートからのみファイル スクリーンを作成することにより、個別のファイル スクリーンに変更内容を複製するのではなく、テンプレートを更新してファイル スクリーンを集中管理できます。 この機能は、すべての更新を 1 か所で集中して実行できるようにして、記憶域ポリシーの変更の実装を簡素化します。

> [!Important]
> 電子メール通知を送信し、実際のサーバー環境に適したパラメーターで記憶域レポートを構成するには、まずファイル サーバー リソース マネージャーの全般的なオプションを設定する必要があります 詳細については、「[ファイルサーバーリソースマネージャーのオプションの設定](setting-file-server-resource-manager-options.md)」を参照してください。

## <a name="to-create-a-file-screen-template"></a>ファイル スクリーン テンプレートを作成するには

1.  **[ファイル スクリーンの管理]** で **[ファイル スクリーン テンプレート]** ノードをクリックします。

2.  **[ファイル スクリーン テンプレート]** を右クリックし、**[ファイル スクリーン テンプレートを作成]** をクリックするか、**[操作]** ウィンドウで **[ファイル スクリーン テンプレートを作成]** をクリックします。 **[ファイル スクリーンのテンプレートの作成]** ダイアログ ボックスが表示されます。

3.  既存のテンプレートのプロパティをコピーし、それに基づいて新しいテンプレートを作成する場合は、**[テンプレートからのプロパティのコピー]** ドロップダウン リストからテンプレートを選択して、**[コピー]** をクリックします。

    既存テンプレートのプロパティを使用する場合も、新しいテンプレートを作成する場合も、**[設定]** タブで次の値を変更または設定します。

4.  [**テンプレート名**] ボックスに、新しいテンプレートの名前を入力します。

5.  **[スクリーン処理の種類]** で、**[アクティブ スクリーン処理]** または **[パッシブ スクリーン処理]** オプションをオンにします。 アクティブ スクリーン処理を使用すると、ユーザーは、ブロックされたファイル グループに所属するファイルを保存できなくなり、承認されていないファイルをユーザーが保存しようとすると通知が生成されます。 パッシブ スクリーン処理では、あらかじめ設定した通知が送信されますが、ユーザーがファイルを保存することはできます。

6.  スクリーン処理の対象のファイル グループを指定するには、次の手順に従います。

    **[ファイル グループ]** で、対象に含める各ファイル グループを選択します。 ファイル グループのチェック ボックスをオンにするには、ファイル グループ ラベルをダブルクリックします。

    ファイルグループに含まれる、または除外するファイルの種類を表示する場合は、ファイルグループラベルをクリックし、[ **編集**] をクリックします。 新しいファイルグループを作成するには、[ **作成**] をクリックします。

    また、**[電子メール メッセージ]**、**[イベント ログ]**、**[コマンド]**、および **[レポート]** タブで次のオプションを設定することで、1 つ以上の通知を生成するようにファイル サーバー リソース マネージャーを構成できます。

7.  電子メール通知を構成するには

    **[電子メール メッセージ]** タブで、次のオプションを設定します。

    -   ユーザーまたはアプリケーションが承認されていないファイルを保存しようとした場合に管理者に通知するには、**[次の管理者に電子メールを送信する]** チェック ボックスをオンにし、通知を受け取る管理者のアカウント名を入力します。 *アカウント*ドメインの形式を使用 @ *domain*し、複数のアカウントを区切るにはセミコロンを使用します。
    -   問題のファイルを保存しようとしたユーザーに電子メールを送信するには、**[承認されていないファイルを保存しようとしたユーザーに電子メールを送信する]** チェック ボックスをオンにします。
    -   メッセージを構成するには、用意されている既定の件名行とメッセージ本文を編集します。 角かっこで囲まれたテキストには、通知の原因となったファイル スクリーン イベントに関する変数情報が挿入されます。 たとえば、 \[ **Source Io Owner**変数は、許可されてい \] ないファイルを保存しようとしたユーザーの名前を挿入します。 テキストに追加の変数を挿入するには、**[変数の挿入]** をクリックします。
    -   追加のヘッダー ([差出人]、[Cc]、[Bcc]、[返信先] など) を構成するには、**[追加電子メール ヘッダー]** をクリックします。

8.  ユーザーが承認されていないファイルを保存しようとしたときに、イベント ログにエラーを記録するには

    **[イベント ログ]** タブで **[イベント ログへ警告を送信]** チェック ボックスをオンにし、既定のログ エントリを編集します。

9.  ユーザーが承認されていないファイルを保存しようとしたときに、コマンドまたはスクリプトを実行するには

    **[コマンド]** タブで、**[コマンドまたはスクリプトの実行]** チェック ボックスをオンにします。 次に、コマンドを入力するか、**[参照]** をクリックして、スクリプトが格納されている場所を指定します。 必要に応じて、コマンドの引数の入力、コマンドやスクリプト用の作業ディレクトリの選択、コマンド セキュリティ設定の変更を行うこともできます。

10. ユーザーが承認されていないファイルを保存しようとしたときに、1 つ以上の記憶域レポートを生成するには

    **[レポート]** タブで、**[レポートの生成]** チェック ボックスをオンにし、生成するレポートを選択します。 レポートの管理者向け電子メール受信者を 1 人以上選択したり、ファイルを保存しようとしたユーザーにレポートを電子メールで送信したりすることもできます。

    レポートは、インシデント レポート用の既定の場所に保存されます。これは、**[ファイル サーバー リソース マネージャーのオプション]** ダイアログ ボックスで変更できます。

11. 使用するファイル テンプレートのプロパティをすべて選択したら、**[OK]** をクリックしてテンプレートを保存します。

## <a name="additional-references"></a>その他のリファレンス

-   [ファイルスクリーン処理の管理](file-screening-management.md)
-   [ファイル サーバー リソース マネージャーのオプションを設定する](setting-file-server-resource-manager-options.md)
-   [ファイル スクリーンのテンプレートのプロパティを編集する](edit-file-screen-template-properties.md)

