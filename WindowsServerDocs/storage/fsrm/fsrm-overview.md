---
title: ファイル サーバー リソース マネージャー (FSRM) の概要
ms.prod: windows-server
ms.author: jgerend
ms.manager: brianlic
ms.technology: storage
ms.topic: article
author: jasongerend
ms.date: 5/14/2018
description: ファイルサーバーリソースマネージャー (FSRM) は、Windows Server ファイルサーバー上のデータを管理および分類できるツールです。
ms.openlocfilehash: 719176307afc320ad676fd1acfc07ad9d15920cf
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71394172"
---
# <a name="file-server-resource-manager-fsrm-overview"></a>ファイル サーバー リソース マネージャー (FSRM) の概要

> 適用対象: Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2、Windows Server (半期チャネル)、 

ファイル サーバー リソース マネージャー (FSRM) は、ファイル サーバーに保存されたデータを管理者が管理および分類できる機能セットを備えています。 ファイルサーバーリソースマネージャーを使用して、自動的にファイルを分類したり、これらの分類に基づいてタスクを実行したり、フォルダーのクォータを設定したり、記憶域の使用状況を監視するレポートを作成したりできます。

これは小さなポイントですが、Windows Server バージョン1803で[変更ジャーナルを無効にする機能も追加](#whats-new)しました。

## <a name="features"></a>機能

ファイル サーバー リソース マネージャーには、以下の機能が含まれています。

-   [クォータ管理](quota-management.md)を使用すると、ボリュームまたはフォルダーに対して許可される領域を制限することができ、ボリューム上に作成される新しいフォルダーに自動的に適用することができます。 新しいボリュームまたはフォルダーに適用できるクォータ テンプレートを定義することもできます。  
-   [ファイル分類インフラストラクチャ](classification-management.md)は、データをより効率的に管理できるように分類プロセスを自動化することで、データに関する洞察を提供します。 ファイルを分類し、その分類に基づいてポリシーを適用できます。 ポリシーの例として、ファイルへのアクセスを制限するためのダイナミック アクセス制御、ファイル暗号化、ファイルの有効期限などがあります。 ファイルは、ファイル分類規則を使って自動的に分類するか、選択したファイルまたはフォルダーのプロパティを変更して手動で分類することができます。
-   [ファイル管理タスク](file-management-tasks.md)を使用すると、条件付きポリシーまたはアクションを分類に基づいてファイルに適用することができます。 ファイル管理タスクの条件には、ファイルの場所、分類プロパティ、ファイルの作成日、ファイルの最終更新日、ファイルの最終アクセス日などがあります。 ファイル管理タスクが実行できるアクションには、ファイルの有効期限の設定、ファイルの暗号化、カスタム コマンドの実行などがあります。
-   [ファイルスクリーンの管理](file-screening-management.md)は、ユーザーがファイルサーバーに格納できるファイルの種類を制御するのに役立ちます。 共有ファイルに格納できる拡張子を制限できます。 たとえば、拡張子が MP3 のファイルをファイル サーバー上の個人用共有フォルダーに格納することを許可しないファイル スクリーンを作成できます。
-   [記憶域レポート](storage-reports-management.md)は、ディスク使用量の傾向やデータの分類方法を特定するのに役立ちます。 ユーザーのグループを選択し、それらのユーザーが未承認のファイルを保存しようとするのを監視することもできます。  
  
ファイルサーバーリソースマネージャーに含まれる機能は、ファイルサーバーリソースマネージャーアプリを使用するか、Windows PowerShell を使用して構成および管理できます。
  
> [!IMPORTANT]
>  ファイル サーバー リソース マネージャーでは、NTFS ファイル システムでフォーマットされたボリュームのみがサポートされます。 Resilient File System はサポートされていません。  
  
## <a name="practical-applications"></a>実際の適用例  
 ファイル サーバー リソース マネージャーの実際の適用例には、次のようなものがあります。  
  
-   ダイナミック アクセス制御のシナリオでファイル分類インフラストラクチャを使って、ファイル サーバー上でファイルが分類された方法に基づいてファイルおよびフォルダーへのアクセスを許可するポリシーを作成します。  
  
-   少なくとも 10 個の社会保障番号を含むファイルを、個人を特定できる情報としてタグ付けするファイル分類規則を作成します。  
  
-   過去 10 年間、変更されなかったファイルを有効期限切れにします。  
  
-   各ユーザーのホームディレクトリに 200 mb のクォータを作成し、180メガバイトを使用しているときに通知します。  
  
-   個人用共有フォルダーに音楽ファイルを格納することを許可しません。  
  
-   毎週日曜日の夜に実行され、過去 2 日間にアクセスされたファイルの一覧を生成するレポートをスケジュールします。 このレポートは、週末の記憶域の活動状況を把握し、それに応じてサーバーのダウンタイムを計画するうえで役立ちます。  

## <a name="whats-new"></a>新機能-FSRM で変更ジャーナルを作成できないようにする

Windows Server バージョン1803以降では、サービスの開始時にファイルサーバーリソースマネージャーサービスがボリュームに変更ジャーナル (USN ジャーナルとも呼ばれます) を作成するのを防ぐことができるようになりました。 これにより、各ボリュームの領域が少し節約されますが、リアルタイムのファイル分類が無効になります。

以前の新機能については、「[ファイルサーバーリソースマネージャーの新](https://technet.microsoft.com/library/dn383587.aspx)機能」を参照してください。

サービスの開始時に、ファイルサーバーリソースマネージャーが一部またはすべてのボリュームに変更ジャーナルを作成できないようにするには、次の手順を実行します。 

1. SRMSVC サービスを停止します。 たとえば、管理者として PowerShell セッションを開き、「`Stop-Service SrmSvc`」と入力します。
2. Fsutil コマンドを使用して、領域を節約するボリュームの USN ジャーナルを削除します。 

      ```
      fsutil usn deletejournal /d <VolumeName>
      ```
    たとえば次のようになります。`fsutil usn deletejournal /d c:`

3. たとえば、同じ PowerShell セッションで `regedit` を入力して、レジストリエディターを開きます。
4. 次のキーに移動します: **HKEY_LOCAL_MACHINE \system\currentcontrolset\services\srmsvc\settings**
5. 必要に応じて、サーバー全体の変更ジャーナルの作成をスキップします (特定のボリュームでのみ無効にする場合は、この手順をスキップします)。
    1. **設定**キーを右クリックし、[**新しい** > **DWORD (32 ビット) 値**] を選択します。 
    1. `SkipUSNCreationForSystem`値の名前を指定します。
    1. 値を**1** (16 進数) に設定します。
6. 必要に応じて、特定のボリュームの変更ジャーナルの作成をスキップします。
    1. `fsutil volume list` コマンドまたは次の PowerShell コマンドを使用して、スキップするボリュームパスを取得します。
        ```PowerShell
        Get-Volume | Format-Table DriveLetter,FileSystemLabel,Path
        ```
       出力例を次に示します。

       ```
        DriveLetter FileSystemLabel Path
        ----------- --------------- ----
                    System Reserved \\?\Volume{8d3c9e8a-0000-0000-0000-100000000000}\
        C                           \\?\Volume{8d3c9e8a-0000-0000-0000-501f00000000}\
       ```
    2. レジストリエディターに戻り、 **HKEY_LOCAL_MACHINE \system\currentcontrolset\services\srmsvc\settings**キーを右クリックし、[**新しい** > **複数文字列値**] を選択します。
    3. `SkipUSNCreationForVolumes`値の名前を指定します。
    4. 変更ジャーナルの作成をスキップする各ボリュームのパスを入力し、各パスを別の行に配置します。 次に、例を示します。

        ```
        \\?\Volume{8d3c9e8a-0000-0000-0000-100000000000}\
        \\?\Volume{8d3c9e8a-0000-0000-0000-501f00000000}\
        ```

        > [!NOTE] 
        > レジストリエディターでは、空の文字列が削除されたことがわかります。この警告は無視しても問題あり*ません。 REG_MULTI_SZ 型のデータに空の文字列を含めることはできません。レジストリエディターは、見つかったすべての空の文字列を削除します。*

7. SRMSVC サービスを開始します。 たとえば、PowerShell セッションで `Start-Service SrmSvc`を入力します。



## <a name="see-also"></a>関連項目

- [動的 Access Control](https://technet.microsoft.com/library/dn408191(v=ws.11).aspx) 