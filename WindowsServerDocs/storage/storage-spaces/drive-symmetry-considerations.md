---
title: 記憶域スペースダイレクトの対称に関する考慮事項
ms.author: cosdar
manager: eldenc
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 10/08/2018
ms.localizationpriority: medium
ms.openlocfilehash: 5e7a4469a3f72737801a5110e322533df9764e20
ms.sourcegitcommit: 771db070a3a924c8265944e21bf9bd85350dd93c
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/27/2020
ms.locfileid: "85473589"
---
# <a name="drive-symmetry-considerations-for-storage-spaces-direct"></a>記憶域スペースダイレクトの対称に関する考慮事項

> 適用先:Windows Server 2019、Windows Server 2016

[記憶域スペースダイレクト](storage-spaces-direct-overview.md)は、すべてのサーバーにまったく同じドライブがある場合に最適です。

実際、これは常に実用的ではないということを認識しています。記憶域スペースダイレクトは、長年にわたって実行するように設計されており、組織のニーズの拡大に合わせて拡張できます。 現在、spacious 3 TB のハードドライブを購入できます。来年には、小規模なものを見つけることができなくなる可能性があります。 そのため、いくつかの混合と一致がサポートされています。

このトピックでは、制約について説明し、サポートされる構成とサポートされない構成の例を示します。

## <a name="constraints"></a>制約

### <a name="type"></a>Type

すべてのサーバーは、同じ[種類のドライブ](choosing-drives.md#drive-types)を持つ必要があります。

たとえば、1台のサーバーに NVMe がある場合、それらは*すべて*nvme を持つ必要があります。

### <a name="number"></a>Number

すべてのサーバーのドライブ数は、種類ごとに同じである必要があります。

たとえば、1台のサーバーに6つの SSD が搭載されている場合、それらは*すべて*6 つの ssd を備えている必要があります。

   > [!NOTE]
   > 障害発生時またはドライブの追加時または削除時に、ドライブ数が一時的に異なる場合があります。

### <a name="model"></a>モデル

可能な限り、同じモデルとファームウェアのバージョンのドライブを使用することをお勧めします。 できない場合は、可能な限り類似したドライブを選択してください。 記憶域スペースダイレクトは IO を均等に分散し、モデルに基づいて区別されないため、同じ種類の同じ種類のドライブを混在させても、パフォーマンスや耐久性が向上しないようにすることをお勧めします。

   > [!NOTE]
   > 同様の SATA および SAS ドライブを混在させることができます。

### <a name="size"></a>サイズ

可能な限り、同じサイズのドライブを使用することをお勧めします。 サイズが異なる容量ドライブを使用すると、使用できない容量が生じる可能性があります。また、サイズが異なるキャッシュドライブを使用すると、キャッシュのパフォーマンスが向上しない場合があります。 詳細については、次のセクションを参照してください。

   > [!WARNING]
   > サーバー間で容量ドライブのサイズが異なると、容量が孤立する可能性があります。

## <a name="understand-capacity-imbalance"></a>理解: 容量の不均衡

記憶域スペースダイレクトは、複数のドライブやサーバーにわたる容量の不均衡に対する堅牢性を備えています。 不均衡が深刻な場合でも、すべてが引き続き機能します。 ただし、いくつかの要因によっては、すべてのサーバーで使用できない容量が使用できなくなる可能性があります。

この問題が発生した理由を確認するには、次の簡略化された図を検討してください。 各色つきのボックスは、ミラー化されたデータの1つのコピーを表します。 たとえば、、A '、および ' ' とマークされているボックスは、同じデータの3つのコピーです。 サーバーのフォールトトレランスを優先するには、これらのコピーを別のサーバーに格納する*必要があり*ます。

### <a name="stranded-capacity"></a>残される容量

描画されると、サーバー 1 (10 TB) とサーバー 2 (10 TB) がいっぱいになります。 サーバー3にはより大きなドライブがあるため、合計容量は (15 TB) 大きくなります。 ただし、サーバー3に3方向ミラーデータを格納するには、既にいっぱいになっているサーバー1とサーバー2へのコピーが必要になります。 サーバー3の残りの 5 TB 容量は使用できません。 *"孤立*した" 容量です。

![3方向ミラー、3台のサーバー、孤立した容量](media/drive-symmetry-considerations/Size-Asymmetry-3N-Stranded.png)

### <a name="optimal-placement"></a>最適な配置

逆に、10 tb、10 tb、10 TB、15 TB の容量と3方向ミラーの回復性を備えた4台のサーバーでは、使用可能なすべての容量が描画された方法で、コピーを有効にすること*が*できます。 これが可能になると、記憶域スペースダイレクトアロケーターは最適な配置を検出して使用するので、残された容量を残します。

![3方向ミラー、4台のサーバー、残された容量なし](media/drive-symmetry-considerations/Size-Asymmetry-4N-No-Stranded.png)

サーバーの数、回復性、容量の不均衡の重大度、およびその他の要因は、孤立した容量があるかどうかに影響します。 **最も一般的な規則は、すべてのサーバーで使用できる容量のみが使用可能であると想定することです。**

## <a name="understand-cache-imbalance"></a>理解: キャッシュの不均衡

記憶域スペースダイレクトは、複数のドライブやサーバーにまたがるキャッシュの不均衡に対して堅牢です。 不均衡が深刻な場合でも、すべてが引き続き機能します。 さらに、記憶域スペースダイレクトは常に使用可能なすべてのキャッシュを使用します。

ただし、サイズが異なるキャッシュドライブを使用すると、キャッシュのパフォーマンスが一様または予測できなくなる場合があります。キャッシュドライブが大きい場合は、IO のみがパフォーマンスが[向上する可能性](understand-the-cache.md#server-side-architecture)があります。 記憶域スペースダイレクトは、IO をバインド間で均等に分散し、キャッシュから容量への比率に基づいては区別しません。

![キャッシュの不均衡](media/drive-symmetry-considerations/Cache-Asymmetry.png)

   > [!TIP]
   > キャッシュのバインドの詳細について[は、「キャッシュ](understand-the-cache.md)について」を参照してください。

## <a name="example-configurations"></a>構成例

サポートされている構成とサポートされていない構成を次に示します。

### <a name="supported-supported-different-models-between-servers"></a>![サポート対象](media/drive-symmetry-considerations/supported.png) サポートされている: サーバー間で異なるモデル

最初の2つのサーバーは、NVMe モデル "X" を使用しますが、3台目のサーバーでは、非常に似た NVMe モデル "Z" を使用します。

| サーバー 1                    | サーバー2                    | サーバー3                    |
|-----------------------------|-----------------------------|-----------------------------|
| 2 x NVMe モデル X (キャッシュ)    | 2 x NVMe モデル X (キャッシュ)    | 2 x NVMe モデル Z (キャッシュ)    |
| 10 x SSD モデル Y (容量) | 10 x SSD モデル Y (容量) | 10 x SSD モデル Y (容量) |

これはサポートされています。

### <a name="supported-supported-different-models-within-server"></a>![サポート対象](media/drive-symmetry-considerations/supported.png) サポートされている: サーバー内の異なるモデル

すべてのサーバーで、HDD モデル "Y" と "Z" の異なる組み合わせが使用されていますが、これは非常によく似ています。 すべてのサーバーには、合計10個の HDD があります。

| サーバー 1                   | サーバー2                   | サーバー3                   |
|----------------------------|----------------------------|----------------------------|
| 2 x SSD モデル X (キャッシュ)    | 2 x SSD モデル X (キャッシュ)    | 2 x SSD モデル X (キャッシュ)    |
| 7 x HDD モデル Y (容量) | 5 x HDD モデル Y (容量) | 1 x HDD モデル Y (容量) |
| 3 x HDD モデル Z (容量) | 5 x HDD モデル Z (容量) | 9 x HDD モデル Z (容量) |

これはサポートされています。

### <a name="supported-supported-different-sizes-across-servers"></a>![サポート対象](media/drive-symmetry-considerations/supported.png) サポートされている: サーバー間で異なるサイズ

最初の2台のサーバーは 4 TB の HDD を使用しますが、3台目のサーバーは非常に類似した 6 TB の HDD を使用します。

| サーバー 1                | サーバー2                | サーバー3                |
|-------------------------|-------------------------|-------------------------|
| 2 x 800 GB NVMe (キャッシュ) | 2 x 800 GB NVMe (キャッシュ) | 2 x 800 GB NVMe (キャッシュ) |
| 4 x 4 TB HDD (容量) | 4 x 4 TB HDD (容量) | 4 x 6 TB HDD (容量) |

これはサポートされていますが、これは残された容量になります。

### <a name="supported-supported-different-sizes-within-server"></a>![サポート対象](media/drive-symmetry-considerations/supported.png) サポートされている: サーバー内のさまざまなサイズ

すべてのサーバーで、1.2 TB と非常に類似した 1.6 TB SSD の混合が使用されています。 各サーバーには合計4つの SSD があります。

| サーバー 1                 | サーバー2                 | サーバー3                 |
|--------------------------|--------------------------|--------------------------|
| 3 x 1.2 TB SSD (キャッシュ)   | 2 x 1.2 TB SSD (キャッシュ)   | 4 x 1.2 TB SSD (キャッシュ)   |
| 1 x 1.6 TB SSD (キャッシュ)   | 2 x 1.6 TB SSD (キャッシュ)   | -                        |
| 20 x 4 TB HDD (容量) | 20 x 4 TB HDD (容量) | 20 x 4 TB HDD (容量) |

これはサポートされています。

### <a name="unsupported-not-supported-different-types-of-drives-across-servers"></a>![サポートされていない](media/drive-symmetry-considerations/unsupported.png) サポートされていません: サーバー間のさまざまな種類のドライブ

サーバー1は NVMe を持っていますが、他のサーバーは存在しません。

| サーバー 1            | サーバー2            | サーバー3            |
|---------------------|---------------------|---------------------|
| 6 x NVMe (キャッシュ)    | -                   | -                   |
| -                   | 6 x SSD (キャッシュ)     | 6 x SSD (キャッシュ)     |
| 18 x HDD (容量) | 18 x HDD (容量) | 18 x HDD (容量) |

これはサポートされていません。 ドライブの種類は、すべてのサーバーで同じである必要があります。

### <a name="unsupported-not-supported-different-number-of-each-type-across-servers"></a>![サポートされていない](media/drive-symmetry-considerations/unsupported.png) サポートされていません: サーバー間での各種類の数が異なります

サーバー3には他より多くのドライブがあります。

| サーバー 1            | サーバー2            | サーバー3            |
|---------------------|---------------------|---------------------|
| 2 x NVMe (キャッシュ)    | 2 x NVMe (キャッシュ)    | 4 x NVMe (キャッシュ)    |
| 10 x HDD (容量) | 10 x HDD (容量) | 20 x HDD (容量) |

これはサポートされていません。 各種類のドライブの数は、すべてのサーバーで同じである必要があります。

### <a name="unsupported-not-supported-only-hdd-drives"></a>![サポートされていない](media/drive-symmetry-considerations/unsupported.png) サポートされていません: HDD ドライブのみ

すべてのサーバーに HDD ドライブしか接続されていません。

|サーバー 1|サーバー2|サーバー3|
|-|-|-|
|18 x HDD (容量) |18 x HDD (容量)|18 x HDD (容量)|

これはサポートされていません。 各サーバーに接続されている2つ以上のキャッシュドライブ (NvME または SSD) を追加する必要があります。

## <a name="summary"></a>要約

要約すると、クラスター内のすべてのサーバーは、同じ種類のドライブと、それぞれの種類の数が同じである必要があります。 上記の考慮事項により、必要に応じてドライブモデルとドライブサイズを組み合わせることができます。

| 制約                               |               |
|------------------------------------------|---------------|
| すべてのサーバーで同じ種類のドライブ     | **必須**  |
| すべてのサーバーで同じ数の種類 | **必須**  |
| すべてのサーバーで同じドライブモデル        | 推奨   |
| すべてのサーバーで同じドライブサイズ         | 推奨   |

## <a name="additional-references"></a>その他のリファレンス

- [ハードウェア要件の記憶域スペースダイレクト](storage-spaces-direct-hardware-requirements.md)
- [記憶域スペースダイレクトの概要](storage-spaces-direct-overview.md)
