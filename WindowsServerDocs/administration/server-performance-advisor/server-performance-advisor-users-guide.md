---
title: サーバー パフォーマンス アドバイザー ユーザー ガイド
description: サーバー パフォーマンス アドバイザー ユーザー ガイド
ms.assetid: be99a5a9-b9c0-436b-912c-e5c5839a533d
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.topic: article
ms.openlocfilehash: 1a7ea3b902793f281156930a8e666c1d32d05cbe
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87993119"
---
# <a name="server-performance-advisor-users-guide"></a>サーバー パフォーマンス アドバイザー ユーザー ガイド

>適用対象: Windows Server (半期チャネル)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012、Windows 10、Windows 8

Microsoft Server Performance Advisor (SPA) のこのユーザーガイドでは、SPA を使用して、さまざまなサーバーの役割に展開されたシステムでパフォーマンスのボトルネックを特定する方法に関するガイドラインを提供します。

SPA は、次の処理に役立ちます。

* サーバーのパフォーマンスを管理し、サーバーのパフォーマンスに関する問題のトラブルシューティングを行います。

* 一般的な構成とパフォーマンスの問題に関するデータレポートと推奨事項を提供します。

* 収集したデータに基づいてベストプラクティスの推奨事項を提供します。

> [!NOTE]
> SPA コンソールは、変更をサーバーに加えないでは。

SPA Advisor パックの開発に関する詳細については、次を参照してください。 [サーバー パフォーマンス アドバイザー パック開発ガイド](server-performance-advisor-pack-development-guide.md)します。

## <a name="server-performance-advisor-overview"></a>サーバー パフォーマンス アドバイザーの概要


ここでは、SPA の履歴の説明、その対象とするユーザーとのシナリオについて説明し、ツールのアーキテクチャの概要を示します。

### <a name="history-of-spa"></a>SPA の履歴

元のバージョンの Microsoft Server Performance Advisor (SPA) は、2005-2006 年にリリースされました。 主に、Windows Server 2003 を対象としています。これには、オペレーティングシステムのコアや、インターネットインフォメーションサービス (IIS) や active directory などのサーバーの役割が含まれます。 このツールの目的は、サーバーのパフォーマンスを評価し、サーバー パフォーマンスの問題をトラブルシューティングするためです。

SPA は、一般的な構成とパフォーマンスの問題についてシステム管理者に、データのレポートと推奨事項を提供します。 SPA は、サーバー、たとえば、パフォーマンス カウンター、レジストリ キー、WMI クエリ、構成ファイル、および Event Tracing for Windows (ETW) のさまざまなソースからのパフォーマンスに関連するデータを収集します。 収集されるパフォーマンス データをサーバーに基づき、SPA は、サーバー パフォーマンスの現状とは何を改善できる問題の推奨事項の詳細を提供できます。

100万以上のダウンロード元の SPA ツールがあったし、多くのシステム管理者が、サーバーのパフォーマンスの管理を支援します。 非常に正常なパフォーマンスのトラブルシューティング ツールされています。

元の SPA のリリース以降サーバー パフォーマンスの世界にいくつかの主要な変更はあります。 最も顕著なリリースの Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2、および Windows Server 2008 サーバーの役割の対応するインターネット インフォメーション サービス (IIS) 8.5 などの新しいバージョンでします。 サーバー パフォーマンス アドバイザーの新しいバージョンでは、最近のサーバー オペレーティング システムおよびサーバーの役割を元の SPA の機能を拡張します。

SPA 3.1 では、同一の設計目標と元のツールとしてのパフォーマンス分析のパラダイムを共有するが、書き直しました最新テクノロジを使用します。 次の主な強化点もあります。

* Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2、および Windows Server 2008 を実行しているサーバーに対して分析を実行できます。

* リモートで分析機能を収集して分析対象のサーバー上でコードをインストールする必要なしの中央コンソールからのデータを分析する SPA 3.1 を使用できますがサポートしています。

* データ分析と処理、大量のデータを格納できるデータ ストレージ用の Microsoft SQL Server を使用します。

* Advisor パック、ツールを区切ります。 リリース日またはツールから個別に更新することができます advisor パックの形式では、各サーバーの役割のパフォーマンス分析のロジックが解放されます。

* オープン アーキテクチャを使用して SQL スクリプトで開発された Advisor パックを提供します。 非 Microsoft の団体によってでは、advisor パックを開発したり、特別なニーズに対応する Microsoft から既存の advisor パックを拡張することができます。

* サイド バイ サイド比較レポートと傾向や履歴グラフなどの異常を探すのに役立つ新機能をサポートしています。

* などの機能を変更、インポート、およびエクスポートのしきい値を正常に役立つレポートと通知のチューニング、チューニングを他の SPA のユーザーに共有を提供します。

* 対象サーバーをグループ化に使用できる複数のプロジェクトをサポートしています。

* SPA コンソール内からの定期的なデータ収集を提供します。

* (上級者) 用 Microsoft SQL Server を使用して、カスタム クエリとレポートの生成をできます。

* カスタマイズされた Windows PowerShell コマンドレット、SPA を使用できます。

* インポートおよび SPA 3.0 データベースからレポートを表示するための下位互換性

### <a name="target-audience"></a>対象読者

SPA ツールは、主に、さまざまなサーバーの役割で 100 台未満のサーバーを管理するシステム管理者向けです。 これは、こともできますサポート エンジニアがパフォーマンス データを収集し、顧客のパフォーマンスの問題をトラブルシューティングします。

SPA は、パフォーマンスの問題を解決するための推奨事項を提供していますただし、特定のサーバー環境に該当することができない可能性がある前提条件に基づいています。 SPA で提供されている推奨事項は、推奨事項を考慮してください。 SPA のユーザーが、システムの構成に精通している、ケース、およびシステムの全体的なシステムの動作の調整の影響を使用するいると考えています。 システム管理者は、SPA の推奨事項を自社の環境に適用するかどうを決定する必要があります。

### <a name="what-s-new-in-spa-31"></a><a href="" id="what-s-new-in-spa-3-1-"></a>SPA 3.1 の新機能

SPA 3.1 では、次の機能と拡張機能が追加されました。

* Active directory Advisor パックは、サーバーの active directory ドメインサービスサーバーの役割の全般的なパフォーマンスを分析するのに役立ちます。

* Advisor パックで失われた ETW イベントの通知警告を追加する開発者向けサポートし、アラートを表示して、レポートが生成されて、イベントは、低速または頻度の高い高周波数がログ記録により失われました競合ディスク

### <a name="target-scenarios"></a>ターゲットのシナリオ

SPA のターゲットのシナリオを次に示します。

* **サーバー環境**

    SPA は簡単にセットアップおよび保守に設計されています。 これは、1 ~ 100 のサーバーを使用しているサーバー環境に適用されます。 100を超えるサーバーのパフォーマンスを管理しようとしている場合、SPA は適切にスケールされません。 拡大またはより高度な環境では、System Center Operations Manager の使用を検討してください。

* **パフォーマンスのトラブルシューティング**

    パフォーマンスのトラブルシューティング ツールとして、SPA を使用できます。 高レベルのパフォーマンス データを収集する機能が、システム全体の動作を理解することをデータで完全な後処理が実行、どのような異常にフラグを設定します。 顧客によってパフォーマンスの問題が疑われる場合は、収集して、サーバーのパフォーマンス データを分析する SPA を使用できます。

    SPA は、表示可能なレポートを生成します。 SPA レポートは、潜在的な問題を示す通知リスト セクションがあり、データを含むさまざまなパフォーマンスのインデックス、構成、およびサーバーの設定を提供します。 このレポートを使用して、特定のパフォーマンスに関する問題の特定し、推奨事項を使用して、問題の解決策を検索することができます。 レポートは、別の時刻または別のサーバーにより生成された他のレポートと比較できます。 このサイドバイサイドの比較を使用して、基準の法線と異常な動作の違いを確認できます。

    **メモ**SPA は、デバッグまたは使用状況測定ツールとしては設計されていません。 さらに、サーバーの観点から見ると、読み取り専用のツールと考えることができ、サーバーの構成は変更されません。



* **インデックスのパフォーマンスの監視**

    SPA を使用すると、サーバーのパフォーマンスのインデックスを監視できます。 パフォーマンス データを収集し、トレンド グラフか見つけ、異常状態の履歴グラフに、サーバーで SPA を定期的に実行できます。 特定の分析のレポートを表示、パフォーマンスの問題に関する詳細情報を検索、および問題を解決するのには、推奨事項または他のレポート データを使用することができます。

### <a name="spa-architecture"></a>SPA のアーキテクチャ

SPA データ コレクションのロジックは、windows パフォーマンス ログと警告 (PLA) と呼ばれるプロトコルに作成されています。 PLA により、パフォーマンス カウンター、WMI クエリ、ETW トレース、レジストリ キー、および構成ファイルなどのローカルまたはリモート サーバーからパフォーマンス データを収集するプログラムです。 SPA は、対象となるサーバーのパフォーマンス分析を実行すると、選択した特定の SPA Advisor パックに基づく PLA データ コレクター セットを作成します。 Advisor パックには、データ ソースを収集して、ログが格納されるファイル共有が含まれています。 SPA データ コレクションを格納するだけ 1 人のユーザー アカウントです。PLA で使用される同じユーザー アカウントは、ログの書き込みにも使用されます。

SPA は、対象サーバーから収集されたパフォーマンス ログを格納するのに SQL Server データベースを使用します。 SPA は、データベースにファイル共有からのすべてのパフォーマンス ログをインポートし、各 advisor パック内のデータ解析ロジックを使用してデータを処理し、レポートを生成します。 Advisor パックは、ターゲット サーバーから収集されたし、SPA レポートを生成するパフォーマンス データを分析します。 Advisor パックを構築する方法の詳細については、次を参照してください。 [サーバー パフォーマンス アドバイザー パック開発ガイド](server-performance-advisor-pack-development-guide.md)します。

SPA コンソールのユーザー インターフェイスとの相互作用は、SPAConsole.exe の一部として構築されます。 データベースに作成、追加、advisor パックを削除またはターゲット サーバーの管理、パフォーマンスの分析を実行、およびパフォーマンス レポートを表示するコンソールを使用することができます。

SPA コンソールは、次のオペレーティング システムで実行できます。

* Windows 8.1

* Windows 8

* Windows 7

* Windows Server 2012 R2

* Windows Server 2012

* Windows Server 2008 R2

* Windows Server 2008

一般的なビジネス アプリケーションでは、3 つの層: プレゼンテーション層、ビジネス ロジック層、およびストレージ レイヤーです。 SPA は、コンソールとデータベースの2層の製品として設計されています。 コンソールは、含まれている、特定のプロセスに関連するロジックと、ストレージ層とビジネス ロジック層、データベースの役割を果たし、プレゼンテーション層として機能します。 コンソールは、ユーザー入力をキャプチャし、データの収集、データの処理、およびレポートの生成の手順を制御します。 SPA は、Windows システム サービスには依存しません。

次の図は、SPA システムのアーキテクチャの概要を示します。 手順です。

1.  SPA コンソールからは、指定したサーバーのパフォーマンス分析を実行します。

2.  パフォーマンス データを収集するとき、対象サーバーに PLA ログに書き込みますデータ コレクター セットで指定されたファイル共有です。

3.  ターゲット コンピューターでデータの収集が完了したら、SPA コンソールは SQL Server データベースにログをインポートします。

4.  コンソールには、特定の advisor パックのデータ処理ロジックが呼び出されます。

5.  Advisor パックは、データを処理し、Api を呼び出して SPA を SPA フレームワークによって定義されているシステム レポート テーブルにレコードを挿入します。

6.  コンソール内レポート ビューアーを使用して、生成されたレポートを表示することができます。 SPA はパフォーマンスの問題をトラブルシューティングするために、次の 3 つの種類のレポートを提供します。 1 つのレポート、サイド バイ サイドのレポートと傾向または履歴のグラフ。 レポートの詳細については、次を参照してください。 [レポートを表示する](#bkmk-viewingreports)です。

![spa のアーキテクチャ](../media/server-performance-advisor/spa-user-manual-architecture.png)

## <a name="getting-started-with-spa"></a>SPA の概要


### <a name="requirements"></a>要件

SPA コンソールは、Windows 8.1、Windows 8、Windows 7、Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2、および Windows Server 2008 にインストールできます。 以前のバージョンの Windows Server オペレーティング システムで SPA を実行することはできません。 X86 または x64、SPA が実行されますが、IA64 または ARM アーキテクチャをサポートしていません。

SPA は、Microsoft .NET Framework 4 の一部であるため、.NET Framework 4 が必要な Windows Presentation Foundation (WPF) 2.0 で作成されています。

また、SPA がインストールされている同じコンピューターに SQL Server 2008 R2 Express をインストールする必要があります。 SQL Server 2008 R2 Express とは、Microsoft からリリースされる無料のデータベース エンジンです。 Microsoft SQL Server 2008 R2 Express は、Microsoft ダウンロード センターからダウンロードできます。 SQL Server 2008 R2 Express をお勧め、中に新しいバージョンの SQL Server は SPA と互換性のあるあります。

**メモ**Spa には、SPA インストールパッケージの一部として SQL Server または .NET Framework が含まれません。 Microsoft SQL Server 2008 R2 と .NET Framework 4.0 をインストールすると、SPA をインストールする前に、Windows Update を実行することをお勧めします。



ユーザーは作成し、SPA を持つデータベースを管理するため、SPA を実行に使用されるユーザー アカウントは、SQL Server と同じ管理者特権が必要です。

### <a name="setting-up-spa"></a><a href="" id="bkmk-setupspa"></a>SPA を設定します。

SPA は、SPA フレームワークのすべてのバイナリ、高度なシナリオで使用される Windows PowerShell コマンドレット、およびコア OS、Hyper-v、active directory、および IIS の各 advisor パックを含む .cab ファイルとしてパッケージ化されています。 フォルダーに .cab ファイルを抽出した後で追加のインストールは必要ありません。 ただし、SPA を実行するには、次のように、ターゲット サーバーからのデータ収集を有効にする必要があります。

* PLA データ収集を実行するには、ターゲット サーバーの Administrators セキュリティ グループの一部が SPA コンソールを実行するために使用するユーザー アカウントにあります。 ターゲット サーバーと、コンソールが同じドメイン内にある場合は、ドメイン ユーザー アカウントは、ターゲット サーバーの Administrators セキュリティ グループの一部である必要があります。 ターゲット サーバーと、コンソールが同じドメイン内にない場合は、SPA コンソールを実行するために使用するユーザー アカウントと同じユーザー名とパスワードを持つターゲット サーバーで管理者のユーザー アカウントを作成します。

* サーバー上の結果を共有フォルダーを作成します。

* SPA コンソールの実行に使用するユーザー アカウントに読み取りし、ある共有フォルダーに対する書き込みアクセス許可を確認してください。 PLA は、このアカウントを使用して、フォルダーにログを書き込みます。
SPA コンソールは、同じアカウントを使用してログを読み取り、データベースにインポートします。

    **メモ**ETW は、トレースを格納するための循環バッファーを実装し、可能であればそれらを共有フォルダーに移動します。 サーバーがビジー状態、または書き込み操作が遅い、ETW は、バッファーがいっぱいになったときにトレースを削除します。 共有フォルダーは、高速な i/o アクセスを使用してサーバー上に配置することが重要です。 低速なファイル I/O によるデータ損失を最小限に抑えるため、各ターゲット サーバーに共有フォルダーを含めることをお勧めします。



* ターゲット サーバーにアクセスする PLA、ターゲット サーバーでリモートのパフォーマンス ログと警告のアクセスを許可するように Windows ファイアウォールを設定します。 PLA では、TCP ポート 139 を使用します。

* **パフォーマンスログ & 警告**サービスが実行されていることを確認してください。

* コンソールとターゲットサーバーが異なるサブネットに配置されている場合は、次に示すように、[**パフォーマンスログと警告**] ページの [**スコープ**設定] で、受信ファイアウォール規則の [リモート IP アドレス] フィールドも設定する必要があります。

    ![pla プロパティ](../media/server-performance-advisor/spa-user-manual-pla-firewall.png)

* コンソールと各ターゲット サーバーのネットワーク探索を有効にします。

* 対象サーバーがドメインに参加していない場合は、次のレジストリ設定を有効にします。 **HKLM \\ SOFTWARE \\ Microsoft \\ Windows \\ Currentversion \\ Policies \\ system \\ LocalAccountTokenFilterPolicy**。

**メモ**既定では、SPA は SpaConsole.exe が配置されているフォルダーに診断ログを書き込みます。 SPA が Program Files フォルダーの下にインストールされている場合、管理者として SpaConsole.exe が実行されている場合にのみ、SPA はログを書き込むことができます。

コンソールコンピューターに対してデータ分析を実行する場合は、管理者として SPA を実行する必要があります。 PLA は、管理者権限が必要なローカル コンピューターに対して実行すると、異なるコード パスをたどります。

サーバーに対して IIS SPA Advisor パックを実行する場合は、IIS サーバーの WMI クエリと ETW トレースを有効にする必要があります。 有効にしてこれを行う **トレース** 下にある、 **性と診断** 役割サービスと **IIS 管理スクリプトおよびツール** [ **管理ツール** の **Web サーバー (IIS)** サーバーの役割です。



### <a name="creating-your-first-project"></a>最初のプロジェクトを作成します。

すべてをセットアップした後は、最初の SPA プロジェクトを作成できます。 前のセクションで説明した、SPA は、データベース内のパフォーマンス データの分析に関連するすべての情報を格納します。 SPA の各プロジェクトでは、単一のデータベースに対応しています。 **初回使用ウィザード**では、次の手順を実行します。

**SPA プロジェクトを作成するには**

1.  SpaConsole.exe を起動します。 コンソールでは、非接続モード、場所 SPA は任意のデータベースに接続していないと、メイン ウィンドウは空白を入力します。

2.  新しいプロジェクトを作成する] をクリックして **ファイル**, 、クリックして **新しいプロジェクト**します。 これにより、初めて使用するウィザードが起動します。 最初のページには、ウィザードの使用中に実行する手順が表示されます。

    * データベースを作成します。

    * プロビジョニング advisor パック

    * ターゲット サーバーの一覧にサーバーを追加します。

3.  **[次へ]** をクリックします。 [**プロジェクトデータベースの作成**] ページでは、データベースを作成する Microsoft SQL Server インスタンスの名前を指定するよう求められます。 たとえば、コンソールと同じコンピューター上にある場合は、 **localhost を \\ &lt; SQL server &gt; 名**として使用できます。

    **メモ**SQL Server 2008 R2 Express のインストールの既定のインスタンス名は SQLExpress です。 SQL Server 2008 R2 Express のローカル コンピューターにインストールされているインスタンスの場合は、データベースは通常に既定 **localhost\\SQLExpress**します。 ただし、これが変更された可能性が SQL Server のインストール中に右の SQL Server インスタンス名を使用することを確認する必要があります。



4.  データベース名を指定します。 英字、数字、およびアンダー スコア (\_) は、データベース名、有効な文字として使用します。 SPA データベース名の妥当な候補になる **SPA**します。 無効な名前を入力すると、赤いエラー アイコンが表示されます。 関連付けられているツールヒントは、検証エラーの原因を説明します。

    **メモ**データベース名とサーバーインスタンス名は、プロジェクトの唯一の識別子であるため、覚えておくことが重要です。 このデータベースへの切り替えたい場合は、この情報を提供する必要があります。



5.  サーバーインスタンス名とデータベース名を指定すると、初めて使用ウィザードによってデータベースファイルの場所が生成されます。

6.  [**プロジェクトデータベースの作成**] ページで、[**次へ**] をクリックします。 初回使用ウィザードでは、データベースを作成し、SPA に関連するすべてのデータベーススキーマ、関数、およびストアドプロシージャをデータベースに生成します。 この手順は、ハードウェアとネットワーク速度によっては数秒かかる場合があります。

    **注**この手順が失敗した場合は、エラーメッセージが表示されます。 いくつかの一般的な問題: コンソールは、データベースを作成する十分な特権の SQL Server インスタンスに接続できないか、データベース名は既に存在します。



7.  前の手順が成功すると、[**プロビジョニングアドバイザーパック**] ページが表示されます。 お使いのコンピューターで使用可能なすべての advisor パックが一覧表示します。 SPA という名前のフォルダーを自動的にスキャンする **Ap** SPA のルート ディレクトリの下です。 これには、完全な名前、バージョン、および各 advisor パックの作成者が一覧表示します。

    **注**SPA で完全な名前とバージョンを使用する方法の詳細については、「 [Advisor パックの管理](#bkmk-manageadvisorpacks)」を参照してください。



8.  クリックしてプロジェクトのデータベースをプロビジョニングするどの advisor パックを選択して **次**します。 クリックして **Skip** advisor パックのいずれかの準備せずに次の手順に移動します。

    **メモ**Advisor パックは、ツールを使用するときにいつでもプロビジョニングできます。 詳細については、次を参照してください。 [advisor パックを管理する](#bkmk-manageadvisorpacks)です。



9.  [**サーバーの追加**] ページで、対象サーバーの一覧に追加する各サーバーに対して、サーバーの名前と**ファイル共有の場所****の**2 つの必須フィールドを入力します。

    **メモ**また、**注釈**フィールドもあります。これは主に、サーバーを分類または検索するために使用されます。 多くのサーバーがある場合、サーバー名、結果のフォルダー、および省略可能なコメント フィールドを含むコンマ区切り値 (.csv) ファイルをインポートすることができます。 サーバーを説明するために**注釈**フィールドを使用し、用語を使用してデータ収集用のサーバーをフィルター処理できます。 .Csv ファイルを使用してサーバーを初期化する場合、ファイル内で解析エラーが発生してもサーバーは読み込まれません。



10. いくつかの構成が」の説明に従って、PLA データ収集を有効にするために設定する必要がある [SPA を設定する](#bkmk-setupspa)です。 [**サーバーの追加**] ページには、構成の問題をトラブルシューティングするためのテスト構成機能が用意されています。 コンピューターに関連付けられているチェックボックスをオンにし、[**接続のテスト**] をクリックします。 SPA データ コレクター セットをターゲット サーバーを生成しようとして、結果を元のデータベースにインポートします。 すべてが正しい場合、 **ステータス** 表示 **渡す**します。 失敗した場合、失敗の理由を説明するツールヒントが表示されます。

11. 各サーバーは、構成テストに合格していない場合でも、データベースに自動的に追加されます。 サーバーを一覧から削除するには、サーバー名を選択し、[**削除**] をクリックします。

12. すべてが完了したら、[**完了**] をクリックして、初めて使用するウィザードを終了します。 ウィザードを終了する前に初めて使用するウィザードを閉じると、前の手順がすべて保持され、自動的にロールバックされることはありません。 将来の変更を手動で行う必要があります。

## <a name="running-analysis"></a>分析を実行します。


データベースの設定後、サーバーのパフォーマンス分析を実行できます。

SPA コンソールを起動するたびに、最後に、現在のユーザーによって使用されていたプロジェクトは自動的に開きます。 メイン ウィンドウには、サーバーの一覧が含まれています。 各サーバーには、サーバー名、分析結果、現在の状態、および注釈という4つのプロパティがあります。

* **サーバー名** サーバーの識別子を指定すると、サーバーの名前。 重複する名前は許可されません。

* **分析結果** 既定では、表示、最新のパフォーマンス分析の結果、サーバーに対して実行します。 表示されている場合は、パフォーマンスの分析サーバーに対して実行されていないが、 **レポートが生成されない**します。 表示されている場合は、レポートによって発生した警告メッセージが、 **警告** と最新のレポートが生成されたときのタイムスタンプ。 表示されている場合は、サーバー上の最新の分析中に問題が検出されず、 **OK** とタイムスタンプ。

    **注**システム設定を最近変更した場合は、変更の全体的な影響を評価し、システム状態の更新されたレポートを取得するために、分析を再度実行することをお勧めします。 SPA は、テスト対象システムに構成の変更を追跡しません。



* **現在の状態** 分析タスクが、サーバーで現在実行中のパフォーマンスの状態を表示します。 クリックして、実行中のタスクを取り消すことができます、 **キャンセル** アイコンは、赤い x 印で示されます。

* **コメント**現在の対象サーバーについて説明します。 たとえば、サーバーの役割 (SQL Server など) または場所 (たとえば、Kent) を使用してサーバーを記述できます。 SPA は**サーバー名**と**注釈**を使用して、適切なサーバーを検索して見つけます。 検索テキスト ボックスに入力することができます。 [検索] ボックスに入力した文字列が**サーバー名**または**注釈**列に含まれている場合、サーバーはサーバーの一覧に表示されます。

次のコントロールも、コンソールで使用できます。

* **繰り返し** 時間間隔に基づいて、コレクションを定期的に実行することを示すチェック ボックスです。 ほとんどのサーバーのインストールには、分析のための十分な履歴に保持する 1 時間ごとに繰り返します SPA コレクションにする場合は。 コレクションを 1 回だけを実行する場合を選択しないで、 **繰り返します** チェック ボックスをオンします。

* **繰り返しの削除**継続的に繰り返されるコレクションジョブをキャンセルするためのボタン。 繰り返しのコレクションを選択解除が、現在コレクションではなく (存在する場合) が進行中です。 このオプションを使用すると、新しいコレクションの繰り返し間隔をリセットするか、またはコレクションを手動で実行できます。

パフォーマンス分析を開始する前に、データ コレクション期間を選択します。 データを収集するには、サーバー パフォーマンスの状況をより正確なイメージを提供するのに役立ちますより多くのログも生成され、サーバーで複数の潜在的な影響があります。 特定のニーズに基づいて適切なデータ コレクション期間を選択します。 各 advisor パックでは、最短有効期間を定義します。 選択したデータ コレクション期間は、選択した advisor パックの最小継続時間より長くする必要があります。

対象サーバーでパフォーマンス分析を実行するには、パフォーマンス分析を実行するサーバーを選択し、[**分析の実行**] ダイアログボックスが表示されます。サーバーで実行する advisor パックを選択するよう求められます。 選択した advisor パックを同時に実行します。 生成されるレポートは、同じ期間中に収集されるパフォーマンス データに基づいています。

**注**定期的なパフォーマンス分析が実行されているサーバーを選択した場合は、[**繰り返しの削除**] ボタンを使用して定期的なデータ収集を取り消すことができます。 SPA は、同じコンピューターに同時に複数のデータ コレクションのセッションを許可しません。



## <a name="viewing-reports"></a><a href="" id="bkmk-viewingreports"></a>レポートの表示


SPA は、次の 3 つの種類のパフォーマンス分析レポート: 単一のレポート、サイド バイ サイドのレポートおよび傾向レポートや履歴グラフ。

実行中のパフォーマンス分析の後は、ターゲット コンピューターで実行する Advisor パックごとのレポートが生成されます。 メイン ウィンドウで [サーバー] リストから展開することができます **分析結果** に特定のサーバーで実行しているすべての advisor パックを参照してください。 1 つのレポートを表示するレポートの名前をクリックすることができます。

最新の分析がサーバー上で実行の状態を表示する advisor パック名の横にある 3 つのアイコンがあります。

* **最新** アイコンは、advisor パックのこのサーバー上の最新のパフォーマンス分析によって生成されたレポートを示しています。

* [**検索**] アイコンには、パフォーマンス分析レポートの一覧が表示されます。この一覧で、適切なレポートを選択できます。 **Advisor パック** と **ターゲット サーバー** フィールドは、現在 advisor パックとターゲット サーバーの情報があらかじめ入力されています。 既定の時間範囲は 1 週間に設定し、終了日が今日に設定します。 クリックすると、 **検索** ボタン右上隅には、その期間内で選択したサーバーと advisor パックのすべてのパフォーマンス分析レポートの一覧を取得できます。

* **のグラフを表示** アイコンは、傾向や履歴のグラフの表示が表示されます。

次の図は、各 advisor パックの後の [**最新**]、[**検索**]、および [**グラフの表示**] アイコンを示しています。

![レポート アイコン](../media/server-performance-advisor/spa-user-manual-report-icons.png)

### <a name="searching-for-and-within-reports"></a>レポート内での検索

使用してレポートの検索は **レポート エクスプ ローラー**します。 これにより、レポートの日付範囲、サーバー名、および advisor パックを検索することができます。 これは、最後のレポートの実行以外の目的のレポートを検索することをお勧めします。 最後のレポートの実行はを通じて使用可能な **レポートの表示** そのサーバーにします。

特定のレポートを表示するときに時間が次または前のレポートに移動または同時に実行されているさまざまな AP などの関連するレポートを見て簡単にできます。 これらのオプションは [利用可能な **アクション**します。

レポート内で検索することもできます。 多数のレポートには、レポート内でのクイックテキスト文字列検索に使用できる**検索文字列検索**ボックスが用意されています。 テキスト ボックスを削除するには、それを無視してかまいません。 コントロール + F を使用する検索テキストを含む windows) の「検索ボックスをアクティブ化するショートカットです。 [**検索**] ボックスを使用すると、大文字と小**文字**を区別するオプションに応じて、大文字と小文字を区別して検索を指定できます。

次の図は、[**レポート**] タブの **[検索]** ボックスに、文字列の**累乗**を示しています。

![[検索] 検索ボックス](../media/server-performance-advisor/spa-user-manual-find-search-box.png)

### <a name="single-report"></a>1 つのレポート

1 つのレポートは、単一のコンピューターに advisor パックの 1 回の実行からのパフォーマンス分析の結果を示します。 レポートには、Advisor パックの名前、ターゲット サーバー、レポートが生成された時刻、およびデータ収集の実行時間の名前が表示されます。

1 つのレポートには、通知のセクションとセクションでは、データが含まれています。

### <a name="notification-section"></a>[通知] セクション

通知のセクションでは、一連のパフォーマンス分析のルールで構成されます。 各通知には、データ ソースによって、いくつかのしきい値の値、および一部のビジネス ロジックが含まれています。 パフォーマンスの分析を実行すると、ビジネス ロジックは、規則には、かどうが成功するかどうかを決定するしきい値と比較データ ソースを評価します。 それ以外の場合は、潜在的なパフォーマンスの問題を通知するために、警告が表示されます。 この問題を解決するための推奨事項も提供します。 通知のセクションでは、常に 1 つのレポート ビューで最初のタブです。

通知] セクションは 2 つの部分に分かれています。 **警告** と **その他の通知**します。

ルールのデータソースがロジックとしきい値の設定に基づいて特定の条件を満たしている場合は、**警告**領域に警告が表示されます。 警告には、次のパーツが含まれています。

* 警告アイコンは、潜在的な問題の存在を示します。

* ルールの名前です。 たとえば、 **ネットワーク受信パケットの削除操作を行う** はルールの詳細ページを指すリンクで説明した [advisor パックを管理する](#bkmk-manageadvisorpacks)です。

* 潜在的な問題についての簡単な説明。

* 潜在的なパフォーマンスの問題の考えられる解決策を推奨します。

大幅に異なる構成や使用パターン、別のサーバーがあることができ、しきい値、およびすべての条件下ですべてのサーバーに適用されるルールを設定することはできません。 SPA は、しきい値を変更する機能を提供します。 ルールが、シナリオに適用されない場合は、ルールを無効にすることもできます。 既定では、すべてのルールが有効にします。 無効な規則は、通知領域に表示されません。 詳細については、次を参照してください。 [advisor パックを管理する](#bkmk-manageadvisorpacks)です。

**その他の通知** 領域には、すべての他のルール、ここで警告が発生しなかったまたはルールは適用されません。 類似した部分が含まれている、 **警告** 領域です。 最も大きな違いは、警告は発生せず、または、ルールが適用可能な通常推奨事項が提供するありません。

### <a name="data-sections"></a>データのセクションでは

データ セクションには、ターゲット サーバーから収集された生データに基づく advisor パックは、生成のパフォーマンス データが含まれます。 データ セクションには、一連の最上位レベルのセクションおよび複数レベルのサブセクションが含まれます。 最上位レベルのセクションでは、タブとして表示されます。 拡張可能な領域では、最上位レベルのセクションでは、[すべてのサブセクションが表示されます。 折りたたんだり展開したり、それぞれ展開し、興味の領域に焦点を絞るためセクションの次の図に示すようにできます。

![データのセクションでは](../media/server-performance-advisor/spa-user-manual-data-sections.png)

コア OS SPA Advisor パックおよび IIS SPA Advisor パックが含まれて、 **システムの概要** セクションです。 このセクションには、リソースの使用状況と構成の最上位レベルの情報が含まれています。 その他の最上位レベルのセクションでは、パフォーマンス データの領域を表します。 SPA では、次の方法でレポート データが表示されます。

* **単一値** キー/値ペア。 キーは、値の意味を表す文字列です。 値には、文字列、数値またはブール値を指定できます。 これは、CPU アーキテクチャ、メモリの合計サイズ、BIOS バージョンなど、時間の経過と共に変化しない静的な情報を示すためによく使用されます。

* **リスト値**これはキーと値のペアですが、リストの値には複数のフィールドを含めることができます。 たとえば、CPU の属性は、複数の列および複数の行を持つテーブルで表示できます。 各行は 1 つの CPU を表し、各列は、CPU の属性を表します。

* **統計** 特殊な種類の 1 つの値を考慮することができます。 数値データだけを含めることができます。 データ収集の間には、定数のままではなく数値データ ポイントの多く変動します。 たとえば、CPU 使用率、PLA、パフォーマンス カウンターを収集するたびに変更します。 1 つの値のみを表示すると、パフォーマンス状況を正確に反映することはできません。 、1 つの値ではなく平均値、最大値、最小値、および 90% の値は、このような動的な数値データ ポイントの使用されます。 90% の値は、その特定のコレクション間隔に、そのカウンターのすべてのイベントで 90 パーセンタイル値以上のアクティビティを表します。

* **上のリスト** 通常、特定のリソースまたは特定のイベントが発生した最初のエンティティの上位のコンシューマーが含まれます。 たとえば、 **トップ 10 が平均 CPU 使用率の観点から処理** データの収集時に最高の平均 CPU 使用率の上位 10 プロセスが含まれます。 CPU 使用率があるためも、動的な数値データ ポイントと最大値、最小値、および 90% の値などの他の統計情報もリストに含まれる、CPU 使用量のより完全な画像をユーザーに提供します。

前のセクションで説明したとおり、SPA は、ETW トレース、WMI クエリ、パフォーマンス カウンター、レジストリ キー、およびレポートを生成する構成ファイルを収集する PLA によって依存します。 レポート内の各データポイントの背後にあるデータソースを理解することが重要です。 SPA は、ツールヒントを通じてこのような情報を提供します。 キー列またはデータ ソースのツールヒントを表示する行を合わせることができます。 たとえば、 **WMI:Win32\_DisDrive: キャプション** そのため、データ ソースは、WMI クエリからは、WMI クラスの名前は、Win32\_ディスク ドライブ、およびプロパティは、 **キャプション**します。

### <a name="side-by-side-report"></a><a href="" id="side-by-side-report-"></a>サイド バイ サイドのレポート

単一のレポートは、ユーザー検索潜在的なパフォーマンスの問題のためには、通知とデータ セクションを提供が多くの場合、単一のレポートを直接参照して、潜在的なパフォーマンスの問題を識別するが困難です。 1 つのレポートされるので、潜在的な問題を発見しにくいデータ ポイントが多すぎるを含めることがあります。

この問題を解決するためには、SPA は、2 つのレポートを比較する機能を提供します。 相違点を検索するための基準のレポートに潜在的な問題のあるレポートを比較することができます。

サイド バイ サイドのレポートは、単一のレポート ビューアから起動できます。 ユーザーは [**アクション**] をクリックし、[**レポートの比較**] をクリックしてレポートを選択できます。 同じ advisor パックからレポートを比較する意味があるだけです。 時間、時間単位で、次にレポートまたは検索機能を使用して選択されている任意のレポートで前回のレポートを含むレポートを比較することができます。 たとえば、異常な動作を分離するには、ベースライン サーバーのレポートを同じコンピューター上の別の時刻に生成されたレポートにやのようなサーバー ロールを持つ別のコンピューターで生成されたレポートの比較をロードすることができます。

サイド バイ サイドのレポートは 1 つのレポートにかなり似ています。 通知のセクションとセクションではデータが含まれています。 1 つのレポート ビューアーと同数通知やデータのセクションにはが含まれています。 唯一の違いは、サイド バイ サイドの方法でレポートが表示されることです。 各セクションには、ソース レポート (レポート 1) からデータと、ターゲット レポート (レポート 2) が含まれています。サイド バイ サイド レポートでは、レポートが生成された時刻および各レポートのデータの収集期間に Advisor パックのターゲット サーバー (レポートの左側に 1) と、右側のレポート 2 の名前の名前が表示されます。

[**検索**] ダイアログボックスを閉じた場合は、「Control + F」と入力して再アクティブ化できます。このダイアログボックスでは、現在のセクション内のテキスト文字列を検索して強調表示します。

[通知] セクションで、比較対象の2つのレポートの結果のいずれかが警告の場合は、**警告**領域に表示されます。 それ以外の場合、結果は [**その他の通知**] 領域に表示されます。 サイド バイ サイドのレポートのキーは、レポート間の違いを特定するのにはであるため、ルールに関する詳細情報は表示されません。 ユーザーは、ルールの詳細についてはルールの詳細フォームを表示するルールの名前をクリックできます。

データのセクションで、左側の 1 のレポートからデータとレポート 2 右側からのデータのサイド バイ サイドの方法で、データが表示されます。 同じテーブル内ではなく、列のラベル付け、SPA は単一の値を示しています。 **値**, 、は名前付き **Report 1** と **レポート 2** それぞれします。 サイド バイ サイドのレポートは、サイド バイ サイドのテーブルにデータの他すべての形式を示します。

サイド バイ サイドのレポート ビューアーでは、データ ソースに関するツール ヒントも提供します。

### <a name="historical-and-trend-charts"></a>履歴と傾向のグラフ

また、傾向と特定のサーバーと特定の advisor パックの履歴のグラフを表示する意味のみ実行します。 (これは、既定値、1 週間以内に) 時間の範囲を選択し、クリックする必要があります **OK** 傾向と履歴のグラフのビューアーを表示します。

傾向と履歴のグラフ ビューアーには 3 つのタブ: 履歴のグラフが、24 時間の傾向グラフ、および 7 日間の傾向グラフ。

### <a name="historical-chart"></a>履歴のグラフ

履歴のグラフは、一連の指定された時間枠を使用して、数値データ ポイントの値を示しています。 たとえば、 **要求の平均遅延時間** 過去 15 日間の単一のサーバー上の iis です。 履歴のグラフ内の各データ ポイントは、1 つのパフォーマンス分析のセッションで実行される特定のデータ ソースの値を表します。

履歴のグラフを使用する方法はいくつかあります。

1.  データポイントの特定の時点での異常の検出を支援するために、たとえば、毎日 2:00 AM では、IIS の**平均要求待機時間**は約200ミリ秒から500ミリ秒になります。

2.  複数のデータ ポイントを関連付けるうえで役立ちます。 などを示す **要求の平均遅延時間** と **要求の平均数** 過去 15 日間に分けます。 要求の待機時間と要求数の増加、同時に要求の待機時間の増加を要求の数の増加に起因することを示すことをレポートに表示可能性があります。

履歴のグラフでのユーザーは、次の操作を行うことができます。

* グラフ領域内で複数の連続データを表示します。 各データ系列は、レポート ビューアーで線グラフとして表示されます。 各折れ線グラフは、レポート ビューアーに収まるように自動的に拡張されます。

* 追加またはデータ系列を履歴グラフ ビューアーの下部にあるデータ系列の一覧から削除します。

* 表示またはデータ系列の一覧のデータ系列を非表示にします。 ユーザーは、グラフ領域に対応する折れ線グラフを強調表示するには、一覧内の特定のデータ系列をクリックできます。

* グラフ領域内の期間を選択して、特定の期間にズームインします。 ズーム アウトするには、グラフの左下隅にあるボタンをクリックします。

* 特定のデータ ポイントをダブルクリックすると、1 つのレポートを調査します。

* データをコピーし、Microsoft Excel など他のプログラムを使用できるようにします。 これにより、グラフ機能、該当する場合に Microsoft Excel を利用することができます。

### <a name="trend-charts"></a>傾向グラフ

多くの反復的なパフォーマンスの問題は、またはターゲット サーバーに対して実行されている定期的なタスクが原因です。 たとえば、エンターテイメント向けの web サイトなったり可能性がありますヒットが増えます週末などスケジュール ディスクのバックアップ タスクが毎日午前 2 時に、サーバーのパフォーマンスを実現します。

トレンド グラフは、このようなパフォーマンスの問題を見つけられるように設計されています。 パフォーマンスの問題は、さまざまなパターンで繰り返し発生することができます。 最も一般的なパターンは日単位のパターンと毎週のパターンは 1 日や同じ曜日の同じ時間帯の中にパフォーマンスの問題が発生する可能性です。 したがって、SPA は、24 時間のトレンド グラフと 7 日間のトレンド グラフを提供します。

時刻に基づいて傾向を探すし、傾向の分析グラフでは、データのセットに関する調査のより深いレベルを提供します。 X 軸は 0 から始まる 24 時間に設定: 00 (午前 0 時) と 23時 59分で終了します。 SPA では、同時に複数のデータ系列の傾向が表示されません。 クリックして **データ系列を選択** を表示するデータ系列を選択します。

データを処理するには、SPA が 0 の間に作成されたすべてのスナップショットを検索: 00 から 0:1 時間ごとに 59 です。 SPA は、最小、最大、平均、およびその時間中に取得されるスナップショットのセットのシグマ値を決定し、ローソク足チャートとグラフ表示にします。 SPA は、1時 00分 ~ 1:59、し、2時 00分 ~ 2:59 との間に作成されたスナップショットの処理を繰り返します。 任意の時間のスナップショットが存在していない場合、SPA はグラフにその時間を空白のままし、次の 1 時間に進みます。

7 日間のトレンド グラフは、24 時間の傾向グラフとよく似ています。 唯一の違いは、1 日の時間ではなく曜日に基づいてデータ系列をグループ化します。

傾向や履歴のグラフで選択したデータ系列は、ユーザー設定として格納されます。 次に同じ advisor パックの傾向と履歴グラフビューアーが開かれると、同じデータ系列セットが既定値として表示されます。

## <a name="managing-reports"></a>レポートの管理


### <a name="deleting-reports"></a>レポートの削除

SPA で管理するために必要とするレポートの数を最小限に抑えるには、レポートを削除することができます。 レポートとサーバーの数の頻度、に応じて不要なレポートを削除することをお勧めします。 SPA には、管理レポートでの制限がない、基になるデータベースには、サイズの制限があります。

**注**削除されたレポートの削除を取り消すことはできません。



### <a name="exporting-and-importing-reports"></a>エクスポートとレポートのインポート

レポートは、別の SPA コンソールまたは別のユーザーに電子メール トランスポートに XML ファイルにエクスポートできます。 レポートをエクスポートしても、レポートは削除されません。 現在表示されているレポートをエクスポートする **レポート ビューアー**, 、] をクリックして **アクション**, 、クリックして **エクスポート**します。 複数のレポートをエクスポートするには、**レポートエクスプローラー**で [**複数選択を有効にする**] をクリックし、選択ボックスから複数のレポートを選択して、[**エクスポート**] をクリックします。 これにより、選択したコピー先ディレクトリに XML 形式のレポートがエクスポートされます。

エクスポートされたレポートは、SPA で参照できます。 インポートされたレポートは、SPA データベースに追加されません。 主なものであるレポートのエクスポートの XML ビューアー アプリケーションとして機能します。 インポートしたレポート サーバーは、同じ advisor パックをエクスポートしたレポートの元の SPA コンソールとしてインストールしている必要はありません。

## <a name="managing-advisor-packs"></a><a href="" id="bkmk-manageadvisorpacks"></a>Advisor パックの管理


SPA には、コアオペレーティングシステム、Hyper-v、active directory、および IIS 用の advisor パックが含まれています。 SPA は、advisor パックのバージョンを構築、サードパーティ製の開発者向けのことも、SQL を使用して advisor パックを開発するためのオープン アーキテクチャを提供します。 Advisor パックを管理するための 4 つのオプションがあります: プロビジョニング、カスタマイズ、リセット、または削除します。

### <a name="provision-new-advisor-packs"></a>プロビジョニング新しい advisor パック

新しい advisor パックは、Microsoft または Microsoft 以外の開発者によって解放できます。 Advisor パックには、provisionMetaData.xml とロジックを記述する SQL スクリプトのセットが含まれています。

**新しい advisor パックをプロビジョニングするには**

1.  advisor パックのすべてのコンテンツを *% sparc%* \\ APs ディレクトリにコピーします。

2.  メイン ウィンドウで [ **構成**, 、クリックして **Advisor パックの構成**します。 **Advisor パックの構成** ] ダイアログ ボックスが表示されます。

    **メモ**このダイアログボックスは、初めて使用するウィザードの [**プロビジョニングアドバイザーパック**] ページに似ています。 管理に使用する advisor パックの一覧が表示されます。 一覧の各 advisor パックは、名などのプロパティのバージョン、バージョン、および著者をインストールします。 名は advisor パックの完全な名前で、インストールされているバージョンは、プロジェクトが既にプロビジョニングされているこの advisor パックのバージョンです。 Advisor パックが現在のデータベースでプロビジョニングされていない場合、[インストールされているバージョン] ボックスには [インストールされて**いません**] と表示されます。 [バージョン] フィールドでは、ファイリング advisor パック フォルダーに、この advisor パックのバージョンを示します。



3.  一覧から advisor パックを選択します。 Advisor パックがプロビジョニングされていない場合、または advisor パックフォルダにデータベースの新しいバージョンが存在する場合は、[**プロビジョニング**] ボタンが有効になります。 クリックして、 **プロビジョニング** ] ボタンをクリックします。

4.  プロビジョニングが完了すると、選択した advisor パックの [**インストールされているバージョン**] フィールドに新しいバージョン情報が表示されます。

### <a name="customize-advisor-packs"></a>Advisor パックをカスタマイズします。

SPA は、advisor パックを変更できるオープン アーキテクチャを定義します。 ユーザーは、しきい値を変更するのしきい値を共有し、有効または無効にルール advisor パック ファイルを変更できます。

advisor パックを変更およびビルドする方法の詳細については、「[サーバーパフォーマンスアドバイザーパック開発ガイド](server-performance-advisor-pack-development-guide.md)」を参照してください。

### <a name="changing-thresholds"></a>しきい値を変更します。

しきい値は、ルールのトリガー条件が満たされたかどうかを判断する SPA で使用されます。 実際の顧客のシナリオは、さまざまなワークロード、ハードウェア環境およびビジネスのため実際のしきい値が必要です。 既定のしきい値がありますがない現在のユーザーの場合、適切な SPA は、既存のしきい値を変更する機能を提供します。

しきい値の値を変更するには、一重引用符またはサイド バイ サイドのレポートでは、ルール名をクリックします。 しきい値の値から変更を特定の advisor パックのすべての規則を管理するか、 **構成** メニュー。

**しきい値の値を変更するには**

1.  **構成** ] メニューのをクリックして **Advisor パックの構成**, 、クリックして変更するには、advisor パックの名前をクリックして **構成**します。

    **メモ**Advisor パックに含まれているすべてのルールの一覧が表示されます。 Advisor パック名の左側にあるチェック ボックスは、ルールが有効になっているかどうかを示します。 ルールが無効になっている場合は、すべてのレポートで非表示になります。



2.  変更する特定のルールをクリックします。 **ルールの詳細** フォームは、選択したルールが表示されます。

ルールの詳細フォームには、特定の規則に関する詳細情報が含まれています。 名前、説明、状態、起こり得る結果およびしきい値が含まれています。 SPA は、2 種類のルールの結果をサポートしている **警告** と **OK**します。 種類ごとに、推奨事項のテキストと推奨事項にがあります。

定義したしきい値規則のいくつか必要はありません。 たとえば、 **HTTP Keep Alive** IIS の場合、このルールは、ブール値設定をチェックします。 したがってしきい値] リストを空にすることがあります。 それ以外の場合は、現在のルールで使用されているすべてのしきい値が表示されます。 ルールのしきい値を使用する方法について詳細な説明は、説明に組み込まれます。

ルールの**詳細**フォームが [**構成**] メニューから起動された場合、[しきい値] の一覧には、[名前]、[元の設定]、および [設定の変更] の3つの列があります。 1つまたは複数のレポートから起動した場合は、レポートで使用されているしきい値も含まれます。 ユーザーは、[**設定の変更**] 列の値を変更し、[**保存**] をクリックしてデータベースへの変更を保存することで、現在のしきい値を変更できます。

しきい値に加えられたすべての変更は、変更後に生成されたレポートにのみ適用されます。 既存のレポートは、これらの変更の影響を受けません。

### <a name="sharing-thresholds"></a>しきい値の共有

同様の状況でサーバーを管理している場合は、同じしきい値のセットを使用することもできます。 エクスポートおよびを使用してしきい値を特定の advisor パックをインポートすることができます、 **構成** メニュー。 特定の advisor パックを選択し、をクリックして **構成**します。 エクスポートされたしきい値ファイルは、XML 形式でです。

しきい値をインポートするときに、SPA は XML ファイル形式を検証し、ファイルが選択されている advisor パックと一致していることを確認します。 これが成功した場合、SPA では、しきい値ファイルからすべての値を現在のプロジェクトのデータベースにインポートします。 前の変化するしきい値のシナリオと同様に、すべてのしきい値の変更は、今後生成されるレポートにのみ有効になります。 既存のレポートには影響しません。

### <a name="enable-or-disable-rules"></a>有効にするか、ルールを無効にします。

ルールを有効になっているかから無効になっている、 **ルールの詳細** 形式です。 をクリックする必要があります **保存** 行われた変更を確定します。 ルールが無効になっている場合は、どのレポートにも表示されません。 ただし、レポートの生成中に基になるビジネスロジックがトリガーされます。そのため、ルールを再度有効にした場合は、レポートに再び表示されます。

### <a name="reset-advisor-packs-to-original-state"></a>advisor パックを元の状態にリセットする

データベースのプロビジョニング済みの advisor パックを変更することができます。 しきい値を変更するには、以外の SQL スクリプトを変更することも可能性があります。 SPA は、変化するレポートのメタデータや追加、またはプロビジョニングされた advisor パックのルールの削除をサポートしていません。 これらの領域を手動で変更すると、予期しない動作可能性があります。

プロビジョニングされた advisor パックの変更の詳細については、「[サーバーパフォーマンスアドバイザーパック開発ガイド](server-performance-advisor-pack-development-guide.md)」を参照してください。

プロビジョニング済みの advisor パックに加えられた変更をロールバックする場合は、advisor パックのリセットを選択できます。 これにより、advisor パックに関連するすべての SQL スクリプトが上書きされ、すべての既定のしきい値がリセットされます。 これにより、既存のレポートがすべて保持されます。

advisor パックのリセットは、advisor パックの**構成**フォームを使用して行うことができます。 リセットする advisor パックを選択し、[**リセット**] をクリックする必要があります。

### <a name="remove-advisor-packs"></a>advisor パックの削除

Advisor パックが不要になった場合のユーザー データベースからは削除ことができます。 advisor パックを削除すると、データベースから advisor パックに関するすべての情報が削除されます。これには、ルールとしきい値、すべての SQL スクリプト、およびすべてのレポートが含まれます。 どのアクションをロールバックできます。

advisor パックの削除は、 **Advisor パックの構成**フォームを使用して行うことができます。 削除して、をクリックする advisor パックを選択する必要があります。 **プロビジョニング解除**します。

### <a name="update-existing-advisor-packs"></a>既存の advisor パックを更新します。

既存の advisor パックの更新は、advisor パックを元の状態にリセットするとよく似ています。 Advisor パックは、新しいバージョンに更新するには、advisor パック フォルダに新しい advisor パックをコピーします。 Advisor パックは、レポートのメタデータの変更がない場合にのみ、既存の advisor パックの更新と見なされます。 レポートおよびルールの Id は、同一である必要です。 それ以外の場合、2 つの異なる advisor パックとして処理する必要があります。

ビジネスロジックの変更のみがあり、advisor パックのレポートメタデータの変更がない場合は、1.0 から2.0 のように、新しいバージョン番号を指定する必要があります。 レポートのメタデータの変更がある場合 advisor パックが異なる完全名前を指定する必要があります。 たとえば、Microsoft.ServerPerformanceAdvisor.IIS.V1 は、Microsoft.ServerPerformanceAdvisor.IIS.V2 に変更できます。

新しいバージョンの advisor パックが存在する場合は、[ **Advisor パックの構成**] フォームの一覧に、最新**バージョンの advisor**パックが自動的に入力されます。 Advisor パックを選択し、[**リセット**] をクリックします。 新しいビジネス ロジックとしきい値で advisor パックの更新。 この advisor パックのすべてのレポートは保持されます。

## <a name="managing-servers"></a>サーバーを管理します。


SPA は、ターゲット サーバーを管理するための基本的な機能を提供します。 ターゲット サーバーの一覧に新しいサーバーを追加するか、一覧からサーバーを削除するか、サーバーの注釈を変更するかを選択できます。

**または、追加のサーバーを削除またはサーバーの情報を変更するには**

1.  クリックして、 **構成** ] メニューのをクリックして **サーバーの構成**します。

2.  プロジェクトのデータベースに現在存在するサーバーの一覧では、最後の行が空です。 行をクリックし、フィールドに入力します。 **サーバー名** と **ファイル共有の場所** フォルダーのフィールドは必須ですが、およびサーバー名が一意であることができます。

3.  各サーバーの [**注釈**列にその他のサーバー情報を入力します。

    **メモ**このフィールドは自由形式のテキスト形式を使用するので、[説明] フィールドとして使用できます。 または、それらを検索できるように簡単にメイン ウィンドウで、またはグループのサーバーになど場所またはサーバーの役割によって、サーバーのタグを付けるため、このフィールドを使用します。



4.  多数のサーバーで SPA を使用する場合、SPA はインポート用にコンマ区切り値 (.csv) 形式をサポートします。 ファイルは、少なくとも 2 つのフィールドを含める必要があります: **Server** と **ファイル共有の場所**します。 3番目のフィールドである**注釈**は省略可能ですが、サーバーを整理することをお勧めします。 適切な形式を特定、またはサーバーの構成をバックアップする .csv ファイルにサーバーの一覧をエクスポートすることもできます。

### <a name="searching-and-filtering"></a>検索とフィルター処理

複数のサーバーを管理する場合、SPA はメインウィンドウでサーバーをすばやく検索するための基本的なサポートを提供します。 列をクリックする並べ替えるにはヘッダーがサーバー名、分析結果、現在のタスクの状態、または「解説」に基づいています。 検索機能を使用することもできます。 メイン ウィンドウの右上隅に検索する文字列を入力できます。 メインウィンドウの**対象サーバー**の一覧は、文字列を使用してサーバーをフィルター処理し、検索文字列を含む名前または注釈フィールドを持つサーバーのみを表示します。

次の図は、dell という**文字列が**、dell が含まれている **"解説**" フィールドとサーバー**が一致する**ことを示し**ています。**

![検索とフィルターの例](../media/server-performance-advisor/spa-user-manual-find-search-example.png)

## <a name="advanced-functionality"></a>高度な機能


### <a name="working-with-spa-windows-powershell-cmdlets"></a>SPA の Windows PowerShell コマンドレットの使用

SPA コンソールには、定期的なデータ収集の UI でのサポートがあります。 この機能が環境に十分でない場合は、高度な管理者は、データ収集のカスタマイズを使用して Windows PowerShell コマンドレット。 これらの Windows PowerShell コマンドレットでは、システム管理者が自動的にターゲット サーバーでパフォーマンスの分析を実行し、SPA を使用して、リモートのカスタマー サポートを有効にします。 たとえば、システム管理者は、ターゲット サーバーのパフォーマンス状態を定期的にサンプリングする特定の時間間隔内 SPA コマンドレットを実行するためのスクリプトを記述できます。

これらのコマンドレットを使用する前に SPAConsole.exe アプリケーションを終了することをお勧めします。

Windows PowerShell コマンドレットを実行する前に、コンソール コンピュータ上のコマンドレットを登録する必要があります。

**Windows PowerShell コマンドレットを登録するには**

1.  管理者特権の Windows PowerShell コマンドプロンプトで、「 **registerを**入力します。 **SPA コマンドレットが正常に登録**されたというメッセージが表示されます。

2.  実行 **SPA PowerShell.cmd**します。 Windows PowerShell スクリプトファイルにパスを渡すと、スクリプトが自動的に実行されます。 それ以外の場合は、Windows PowerShell コマンドプロンプトが開き、SPA Windows PowerShell コマンドレットを実行する準備が整います。

次の表では、SPA の Windows PowerShell コマンドレットについて説明します。

| コマンドレット名 | パラメーター | 説明 |
| ------ | ------- | ------ |
| 開始 SpaAnalysis | **-ServerName**対象サーバーの名前。<br>**-AdvisorPackName**サーバーでキューに登録する advisor パックの完全な名前。 複数のパックが同時に実行されるようにスケジュールされている場合は、パラメーターの値を AP1name, AP2name として書式設定する必要があります。<br>**-期間**データ収集の期間。<br>**-資格情報**対象サーバーでデータ収集を実行するアカウントのユーザー資格情報。<br>**-Sqlinstancename**SQL Server インスタンスの名前。<br>**-Sqldatabasename**SPA プロジェクトデータベースの名前。 | 指定したサーバーでは、SPA データの収集セッションを開始します。 |
| Stop SpaAnalysis | **-Sqlinstancename**SQL Server インスタンスの名前。<br>**-Sqldatabasename**SPA プロジェクトデータベースの名前。<br>**-ServerName**対象サーバーの名前。 | 実行中の SPA セッションを停止しようとします。 セッションが既に完了している場合は、何も実行せずに制御が戻ります。 |
| Get SpaServer | **-Sqlinstancename**SQL Server インスタンスの名前。<br>**-Sqldatabasename**SPA プロジェクトデータベースの名前。 | データベース サーバーの一覧を取得します。 これらのプロパティを含むオブジェクトの一覧を返します。 名前、状態、ファイル共有、および示されています。 |
| Get SpaAdvisorPacks | **-Sqlinstancename**SQL Server インスタンスの名前<br>**-Sqldatabasename**SPA プロジェクトデータベースの名前 | データベース内には、advisor パックのリストを取得します。 これらのプロパティを含むオブジェクトの一覧を返します。 名前、表示名、作成者、およびバージョン。 |

Windows PowerShell では、自動化のシナリオを有効にする暗号化されたファイルを資格情報を通過する機能を提供します。 暗号化されたファイルを使用して資格情報をコマンドレットに渡す方法の詳細については、「[資格情報を受け入れる Windows PowerShell スクリプトを作成](/previous-versions/technet-magazine/ff714574(v=msdn.10))する」を参照してください。

### <a name="automating-spa-report-collection-by-using-windows-powershell"></a>Windows PowerShell を使用して SPA レポートのコレクションを自動化します。

次の手順では、SPA の Windows PowerShell コマンドレットを使用して SPA レポートのコレクションを自動化する方法の例を表します。

ユーザーの資格情報を暗号化し、Windows PowerShell を使ってキャッシュします。 これらの資格情報は、リモート サーバーへのログオンに使用されます。 Spa は固有ではない、ですが、次の例は、この手法を示します。

``` syntax
$fileName = 'D:\temp\operator.txt'
$userName = 'domainname\operator'

# save credential to file
$(Get-Credential).Password | convertFrom-SecureString | Set-Content $fileName

# load credential from file
$credential = New-Object System.Management.Automation.PsCredential $userName, $(Get-Content $fileName | convertTo-SecureString)

# run command
.\start-SpaAnalysis  ServerName: Server1  Credential: $credential  AdvisorPackName:Microsoft.ServerPerformanceAdvisor.CoreOS.V1 10  Duration:10  SqlInstanceName: .\SQLExpress  SqlDatabaseName:SPA8294
```

このファイルを実行する前に、 **Set-executionpolicy remoteSigned**を実行する必要があります。

バッチ ファイルから次のコマンドを使用して実行することができます。

``` syntax
PowerShell -command "& '.\RunSpa.ps1' "
```

### <a name="use-t-sql-to-generate-reports"></a>T-SQL を使用してレポートを生成するには

SPA レポート データを抽出するには、SQL を使用していない、SPAConsole.exe 内で提供されるカスタムのレポートを構築します。

たとえば、次の T-sql コマンドは、過去3日間をカバーするタイムフレームの CPU 別に上位10個のサーバーの一覧を提供します。

``` syntax
select TOP 10
   MachineName,
   AverageCpu
FROM (
   select
      __MachineName MachineName,
      AVG(AverageValue) AverageCpu
   FROM [SPA].[Microsoft.ServerPerformanceAdvisor.CoreOS.V1].vwCpuPerformance
   WHERE __Creationtime > dateadd(DAY, -3, GETUTcdate())
      AND Name = N'% Processor time' AND CpuId = N'_Total'
   GROUP BY __MachineName
) t
OrdER BY t.AverageCpu DESC
```

### <a name="working-with-multiple-projects"></a>複数のプロジェクトでの作業

場合によっては、SPA で使用される SQL Server データベースをパーティション分割することがあります。 これは、SQL Server データベースのデータ サイズを減らすか、サーバーを論理的に分割するために役立ちます。 このような場合は、SPA コンソールは、複数のプロジェクトをサポートします。 クリックして新しいプロジェクト データベースを作成する **ファイル**, をクリックし、 **新しいプロジェクト**します。 新しいプロジェクトデータベースを作成するために、初めて使用ウィザードが表示されます。

プロジェクトが作成されると、クリックして **ファイル**, 、順にクリック **プロジェクトを開く** プロジェクトの間で切り替えます。 SPA コンソールでは、現在開いているプロジェクト内で未処理のパフォーマンス分析を実行するときにデータベースの切り替えは許可されません。 これは、パフォーマンス データの整合性を保護するためです。

プロジェクトの新しいデータベースを作成するか、別のプロジェクトのデータベースを開くことを選択すると、現在のプロジェクトが閉じられます。 すべてのレポートを開くには、現在のプロジェクトを閉じたときに閉じられます。

**メモ**SQL Server 2008 R2 Express には、10 GB のデータベース制限があります。 複数のプロジェクトを使用すると、1 つまたは複数の SQL Server データベースを使用し、件未満、10 GB の SQL Server 2008 R2 Express 制限できます。



### <a name="logging-and-debugging"></a>ログとデバッグ

SPA は、基本というログ記録機能を提供します。 SPAConsole.exe と同じフォルダーにあるログ ファイルに書き込まれるログのみが許可されます。 SPA コンソールを実行するユーザー アカウントは、ログがログ ファイルに書き込むかどうかを確認する SPA がインストールされているフォルダーに書き込みアクセス許可が必要です。

SPA には、次の有効なログ レベルが含まれています。

* **情報** SPA 管理コンソールには、および、主にデバッグするために設計されたすべてのアクションのログをダンプします。

* **警告** すべての SPA コンソール内部で発生する例外とエラーをログに記録します。 エラーのいくつかは、単の検証エラー SPA コンソールを使用して処理できます。

* **重要な** SPA コンソールによって処理できない例外とエラーのみをログに記録します。 これらのエラーが発生すると、SPA コンソールがクラッシュします。 ログは、このようなエラーのコンテキスト情報を提供します。

既定では、ログレベルは Warning です。これは、SPA が SPA で発生したエラーと例外のみをログに記録することを意味します。 編集することによって、ログ レベルを変更することができます、 **SpaConsole.exe.config** SpaConsole.exe があると、同じフォルダー内のファイルです。 すべてのログは、同じフォルダーに log.txt ファイルに書き込まれます。

SPA は、デバッグするためのいくつかの基本的な機能も提供します。 SPA のデバッグを有効にするユーザーは、SPA プロジェクト データベースを手動で変更する必要があります。 設定は、構成テーブルに格納されます。 ユーザーは、SPA プロジェクトをデバッグ モードに変更するのには、次の SQL スクリプトを実行する必要があります。

``` syntax
UPdate [Configurations] SET Value = N'true' WHERE Name = N'Debugmode'.
```

デバッグ モードでは、SPA フレームワークは、advisor パックの問題を解決するために、パフォーマンスの分析中に生成されるすべての一時データを保持します。 このスクリプトは、主に advisor パックの開発者が使用するよう設計します。

SPA のデバッグ機能の詳細については、「[サーバーパフォーマンスアドバイザーパック開発ガイド](server-performance-advisor-pack-development-guide.md)」を参照してください。

### <a name="managing-the-database"></a>データベースを管理します。

### <a name="backup-and-restore-the-database"></a>バックアップと復元、データベース

SPA コンソールでは、バックアップを作成し、SPA データベースを復元する機能は提供されません。 バックアップおよびデータベースを復元するには、標準の Microsoft SQL Server ツールおよびスクリプトを使用する必要があります。

### <a name="clean-up-the-database"></a>データベースをクリーンアップする

SPA プロジェクトのデータベースは、複数のパフォーマンス分析の実行時サイズで拡張可能です。 既定では、SPA は、すべてのレポートを保持します。 パフォーマンスを向上させるため、古いレポートを削除することがあります。 使用してレポートを削除する、 **レポート エクスプ ローラー** インターフェイスです。

## <a name="privacy-and-security"></a>プライバシーとセキュリティ


SPA は、SPA コンソールにターゲット サーバーからデータを収集のみをサポートします。 マイクロソフトまたはマイクロソフト以外の開発者に情報を送信するものはありません。 SPA のプライバシー保護に関する詳細については、Server Performance Advisor のマイクロソフト ソフトウェア ライセンス条項を参照してください。

SPA によって収集されたすべてのデータは、プロジェクトのデータベースに格納されます。 ETW トレースの一部の性質上、SPA は重要度のビジネスに大きな可能性がある機密情報を収集することもできます。 SPA プロジェクトのデータベースへのアクセスを共有に関連付けられている潜在的なリスクの可能性があります。 一時ログ ファイルは、各ターゲット コンピューターで指定されている共有フォルダーに保存されます。 データのインポートが完了したときに SPA がこれらの一時ログファイルを削除しようとしても、これらのログファイルが常に削除されるという保証はありません。 共有フォルダーが安全な場所にあることを確認する必要があります。

SPA advisor パックには、解析およびパフォーマンス レポートを生成するパフォーマンス ログを分析する SQL スクリプトが含まれています。 SPA は、特権を制限するには、これらのスクリプトで実行しようとします。 ただし、これらが発生した可能性スクリプトできるターゲット サーバーから SPA を通して機密情報を収集または取得同じ SPA プロジェクト データベースに格納されている機密情報を変更します。 SPA プロジェクト データベースにプロビジョニングされているすべての advisor パックが信頼できる発行元からあることを確認する必要があります。

## <a name="errors-and-troubleshooting"></a>エラーとトラブルシューティング


### <a name="spaconsoleexe-does-not-start-or-write-log-file"></a>SPAConsole.exe を開始またはログ ファイルを書き込む

SPAConsole.exe を初めて実行しようとすると、.NET Framework がインストールされていない場合、アプリケーションはログファイルを開始または書き込みません。 いることを確認、Framework がインストールされている compatible.NET と作業正しく SPA を開始する前にします。

### <a name="locating-log-information"></a>ログ情報の検索

SPA は、SPA フォルダーの下にある log.txt ファイルのエラー情報を格納します。 詳細なエラーメッセージとコールスタック情報がこのフォルダーに書き込まれます。 詳細を解釈する必要があるエラーが発生する場合は、エラーの詳細を表示する log.txt ファイルを開くことができます。

### <a name="database-size-limitations-for-sql-server-express"></a>SQL Server Express のデータベース サイズの制限

SQL Server Express にはユーザー データベースに 10 GB のサイズ制限します。 このサイズのデータベースには、20,000 30,000 レポートを格納する容量があります。 このデータベースの上限に到達する可能性を減らすためには、レポートを定期的に削除すると、10 GB のユーザー データベースの制限がない SQL Server の別のバージョンを使用してお勧めします。

### <a name="sql-server-express-log-size-and-disk-capacity"></a>ログ サイズとディスク容量の SQL Server Express

SQL Server Express を使用している場合、ユーザーデータベースは 10 GB に制限されますが、対応するログファイルは 70 GB を超える可能性があります。 これらの理由からお勧め 100 GB 以上の空きディスク領域の SQL Server Express します。 このディスク領域を約 20,000 から 30,000 レポートを保存するだけで十分にする必要があります。 このログファイルの名前は SPADB \_ log .ldf で、 **% Program Files% Microsoft SQL Server mssql10.mssqlserver にあり \\ \\ ます。SQLEXPRESS \\ MSSQL \\ データ**。

### <a name="failure-to-connect-to-target-server"></a>ターゲット サーバーに接続できませんでした

対象サーバーでパフォーマンスの分析を実行すると、SPA コンソールを実行するユーザー アカウントをターゲット サーバーに対して PLA に設定するデータ コレクターのキューに特定の特権を持っている必要があります。 Windows ファイアウォールの設定では、通過 PLA 通信を許可するように変更する必要があります。 詳細な構成手順については、次を参照してください。 [SPA を設定する](#bkmk-setupspa)です。

### <a name="failure-to-create-pla-data-collection-set-on-the-target-server"></a>ターゲット サーバーで PLA データ コレクション セットの作成に失敗

"ターゲットサーバーメッセージに PLA データコレクションセットを作成できません" と表示された場合は、次のことを確認してください。

* 必ず、 **パフォーマンス ログとアラート** サービスが実行されています。

* セキュリティの設定 **ネットワーク アクセス: ネットワーク認証のための資格情報およびパスワードの保存を許可しない** は無効になります。 SPA では、ターゲット サーバー上でのデータ コレクション セットの作成にユーザーの資格情報を使用する必要があるため、セキュリティの設定を無効にしてください。

### <a name="running-spa-against-the-console"></a><a href="" id="running-spa-against-the-console-"></a>コンソールに対する、SPA を実行しています。

PLA は、ターゲット サーバーは、SPA コンソールと同じ場合に、異なる種類のチャネル経由で送られます。 ユーザーアカウントが管理者特権で SPA コンソールを実行している場合でも、PLA は失敗します。 SPA コンソールがターゲット サーバーにインストールされている場合、ユーザーはコンソールでパフォーマンスの分析タスクを実行できるかどうかを確認するために管理者 SPA を起動する必要があります。

### <a name="running-multiple-consoles-at-the-same-time"></a>同時に複数のコンソールを実行しています。

SPA は同時に同じ SPA プロジェクト データベースに対して実行している複数のコンソールをサポートしていません。 また、SPA では、ロックおよび同期機構を防ぐには提供されません。 SPA の 2 つのコンソールを同時に実行している場合は、これらの SPA コンソールを実行している時間シーケンスに従って、コンソールは一貫性がない動作します。 これを防ぐためには、キューに置かれたパフォーマンス分析のすべてのセッションから削除するか、リスト、分析を開始するコンソールによって処理される前にします。

SPA は、SPA によって正常に生成される各レポートの整合性を保護します。 同時に、SPA は、キューに置かれたすべての分析タスクが完了したことを保証するわけではありません。 不整合が生じる場合パフォーマンス分析セッションの状態を変更または要求のシステム エラーを見つけられないデータ コレクターによって生成されたパフォーマンス ログの設定、同一の SPA プロジェクト データベースに対して実行している複数の SPA コンソール インスタンスによって発生する可能性があります。

SPA の Windows PowerShell コマンドレットを実行しているは、同じ SPA データベースに対して実行している SPA コンソールを使用して影響可能性があります。 SPA の Windows PowerShell コマンドレットを実行する前に、SPA コンソールを閉じることをお勧めします。

### <a name="spaconsoleexe-recurring-collection-is-disrupted"></a>SPAConsole.exe 定期的なコレクションが中断されます。

SPAConsole.exe を実行して、定期的なデータ コレクション (たとえば、時間単位コレクション) を使用する場合は、SPAConsole.exe を実行しているサーバーは必要がありますを中断するように、省電力モードにできません。 SPA は、省電力ポリシーをチェックしません。 このアクティビティの中断には、正規の定期的なデータの収集が中断される可能性があります。

### <a name="lost-etw-events"></a>失われた ETW イベント

ターゲット サーバーで最低のパフォーマンスに影響を作成するにはパフォーマンス情報を収集しながら、低い優先度で実行する PLA しています。 対象サーバーがビジーの場合、PLA は、対象サーバーで実行されている優先度の高いタスクに生成するデータ収集タスクの一部を削除できます。 ワークロード s i/o やより高速なドライブ (SSD など) と競合しないディスク上でイベントが書き込まれる共有フォルダーを設定することを検討してください。 イベントが削除されると、それらが報告されるレポート ビューで失われたイベントの生成されたパフォーマンス メトリックの信頼性に影響を与えることができます。

レジストリまたは WMI クエリがスキップされる特定のアクセス許可の問題もあります。 ただし、これは、ETW イベントの損失よりも発生する可能性が大幅に低下します。 その結果、データ コレクター セットの結果は場合があります、要求されているすべての値を含まれません。 この状況がすべて advisor パックの T-SQL スクリプトで処理されるようにする必要があります。 データがデータコレクションの結果に存在しない場合、データはレポート内にデータなしとしてマークされます。

ETW イベントの損失が PLA の一般的なので、生成されるデータ ポイントに基づいて ETW トレースが生成されるデータ ポイントを一貫性のあるに基づいて作成されていません、パフォーマンス カウンターなどです。 たとえば、IIS での合計 CPU 使用率が 80% (これはパフォーマンス カウンターから取得) であること、および、上部の Url のみを使用して (これによって、ETW トレースのデータ ポイントには) すべての CPU 時間の 10% に発生する可能性です。 通常、1 つのデータ ポイントのデータ ソースは、データ ポイントのツールヒントを表示できます。 このようなデータ損失の影響の可能性があります。

このようなイベントの損失を避けるためには、結果のフォルダーをターゲット サーバーの近くにする必要があります。

データコレクターの結果に ETW トレース損失以外の不完全なデータが含まれており、advisor パックの開発者が ETW イベント損失通知のサポートを追加した場合、データ損失によって発生する可能性のある不一致のレポートについてユーザーに通知する情報バーが1つのレポートの上に表示されます。 データ損失の詳細情報については、log.txt ファイルを参照してください。

## <a name="glossary"></a>用語集


SPA で使用される用語の一部を次に示します。

* **Advisor パック** メタデータと、ターゲット サーバーから収集されたパフォーマンス ログを処理する T-SQL スクリプトのコレクション。 Advisor パックは、パフォーマンス ログ データからレポートを生成します。 Advisor パック内のメタデータでは、パフォーマンスの測定のターゲット サーバーから収集するデータを定義します。 メタデータには、ルール、しきい値、およびレポートの形式のセットも定義します。 ほとんどの場合、たとえば、インターネット インフォメーション サービス (IIS)、単一のサーバーの役割専用の advisor パックが書き込まれます。

* **SPA コンソール** SpaConsole.exe、SPA の中央に含まれています。 SPA は、テストしているターゲット サーバー上で実行する必要はありません。 SPA コンソールには、分析を実行して、レポートを表示するプロジェクトの設定から、SPA のすべてのユーザー インターフェイスが含まれています。 仕様では、SPA は、2 層アプリケーションです。 SPA コンソールには、UI 層とビジネス ロジック層の一部が含まれています。 SPA コンソールは、スケジュールを設定し、パフォーマンス分析の要求を処理します。

* **SPA フレームワーク** 、すべてのユーザー インターフェイス、ログ処理のパフォーマンス、構成、エラー処理とデータベース Api、および管理の手順について説明します。

* **SPA プロジェクト** advisor パックの対象サーバーで生成されるターゲット サーバー、advisor パック、およびパフォーマンスの分析に関するすべての情報を含むデータベースをレポートします。 比較して、同じ SPA プロジェクト内の履歴と傾向のグラフを表示できます。 複数のプロジェクトを作成することができます。 SPA プロジェクトは、別の独立しており、プロジェクト間で共有するデータはありません。

* **ターゲット サーバー** 物理コンピューターまたは IIS などの特定のサーバーの役割と Windows Server を実行する仮想マシン。

* **データの分析セッション** 特定のターゲット サーバーのパフォーマンス分析します。 データの分析セッションでは、複数の advisor パックを含めることができます。 これらの advisor パックからデータ コレクター セットは、1 つのデータ コレクター セットにマージされます。 1 つのデータの分析セッションのすべてのパフォーマンス ログは、同じ期間中に収集されます。 同じデータの分析セッションで実行されている advisor パックによって生成されるレポートの分析と、全体的なパフォーマンスの状況を理解し、パフォーマンスの問題の根本原因を特定のユーザーが役立つ場合があります。

* **Windows イベント トレーシング** Windows で提供されている高パフォーマンス、低オーバーヘッドでスケーラブルなトレース システムです。 プロファイリングとデバッグのさまざまなシナリオをトラブルシューティングするために使用できる機能を提供します。 SPA は、データ ソースとして、パフォーマンス レポートが生成される ETW イベントを使用します。 ETW の詳細については、次を参照してください。 [デバッグの向上およびパフォーマンス調整 ETW を](/archive/msdn-magazine/2007/april/event-tracing-improve-debugging-and-performance-tuning-with-etw)します。

* **Windows Management Instrumentation (WMI)** 、インフラストラクチャの管理データと Windows での操作です。 WMI スクリプトまたはリモート コンピューター上の管理作業を自動化するアプリケーションを記述することができます。 WMI では、管理データ、オペレーティング システムの他の部分との製品にも利用できます。 SPA は WMI クラス情報とデータ ポイントをパフォーマンス レポートの生成のソースとして使用します。

* **パフォーマンス カウンター** でなく、オペレーティング システムまたはアプリケーション、サービス、またはドライバーの実行に関する情報を提供するために使用します。 パフォーマンス カウンター データは、システムのボトルネックの特定やシステムとアプリケーションのパフォーマンスの微調整に役立ちます。 オペレーティング システム、ネットワーク、およびデバイスは、システムのパフォーマンスがどの程度のグラフィック表示をユーザーに提供するアプリケーションを使用できるカウンターのデータを提供します。 SPA はパフォーマンス カウンターの情報とデータ ポイントをパフォーマンス レポートを生成するのにソースとして使用します。

* **パフォーマンス ログと警告 (PLA)** 収集パフォーマンスのログに記録しトレース、および特定のトリガーが満たされているとパフォーマンスのアラートを生成します。 パフォーマンス カウンター、Windows (ETW)、WMI クエリ、レジストリ キー、および構成ファイルのトレース イベントを収集する PLA を使用できます。 PLA には、リモート プロシージャ コール (RPC) によるリモート データ収集もサポートしています。 ユーザーは、データを収集する、データ収集の頻度、データ コレクション期間、フィルター、結果ファイルの保存場所に関する情報を含んだデータ コレクター セットを定義します。 SPA は、ターゲット サーバーからすべてのパフォーマンス データを収集するのに PLA を使用します。

* **単一のレポート** A SPA レポート生成される単一のターゲット サーバー上の 1 つの Advisor パックの 1 つのデータ分析のセッションに基づいています。 通知とさまざまなデータ セクションに含めることができます。

* **サイド バイ サイド レポート** A SPA 比較レポートを同じ advisor パックの 2 つの単一のレポート。 別のターゲット サーバーから、または同じターゲット サーバー上の別のパフォーマンス分析の実行から、2 つのレポートを生成できます。 サイド バイ サイドのレポートでは、ユーザーが異常な動作や、レポートのいずれかの設定を識別するための 2 つのレポートを比較する機能を作成します。 サイド バイ サイドのレポートには、通知とさまざまなデータ セクションが含まれています。 各セクションでは、両方のレポートからのデータは、一覧にサイド バイ サイドです。

* **トレンド グラフ** パフォーマンスの問題の繰り返しのパターンを調査するために使用する SPA レポートします。 多くの反復的なパフォーマンスの問題は、サーバーまたはクライアント コンピューターは、毎日発生することが、毎週にスケジュールされたサーバーの負荷の変化が原因です。 SPA は、24 時間のトレンド グラフとこれらの問題を識別するために 7 日間の傾向グラフを提供します。

    ユーザーが 1 つまたは複数のデータ系列では 1 つのレポート内の数値をなどは一度に選択できる **合計 CPU 使用率の平均**します。 具体的には、数値は、特定の時間インスタンスで1つの AP によって生成される単一サーバーのスカラー値です。 SPA は 24 日 (7 日間レポートは、各曜日に 1 つずつ 7) の 1 時間ごとに 1 つのグループにこれらの値をグループ化します。 SPA は、平均、最小値、最大値、および各グループの標準偏差を計算します。

* **履歴のグラフが** 特定の数値の変更を表示するために使用する SPA レポート値内の特定のサーバーと advisor の単一のレポート パック ペア時間の経過と共にします。 ユーザーは、複数のデータ系列を選択し、別のデータ系列間の相関関係を理解する履歴のグラフにまとめて表示することができます。

* **データ系列** 時間の期間にわたって、同じデータ ソースから収集される数値データ。 同じソースでは、データが、1 つのサーバーで IIS の要求の平均キュー長など、同じターゲット サーバーから取得することを意味します。

* **ルール** ロジック、しきい値、および説明の組み合わせ。 これらは、潜在的なパフォーマンスの問題を表します。 各 advisor パックには、複数のルールが含まれています。 各ルールは、レポートの生成プロセスによりトリガされます。 ルールには、1 つのレポート内のデータにロジックとしきい値が適用されます。 条件が満たされる場合は、警告通知が発生します。 通知に設定されていない場合、 **OK** 状態です。 該当なし] に、通知を設定するルールが適用されない場合 (**NA**) の状態。

* **通知** ルールがユーザーに表示される情報です。 規則の状態が含まれています (**OK**, 、**NA**, 、または **警告**)、ルール、およびパフォーマンスの問題に対処可能な推奨事項の名前。