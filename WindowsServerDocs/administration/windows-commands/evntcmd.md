---
title: evntcmd
description: Evntcmd コマンドの参照記事。構成ファイルの情報に基づいて、トラップへのイベントの変換、トラップの宛先、またはその両方を構成します。
ms.topic: article
ms.assetid: c1aabb74-76e7-4304-95a6-50ad87e92fd9
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 9610608000ce106ec321f721a4181658453d6348
ms.sourcegitcommit: 53d526bfeddb89d28af44210a23ba417f6ce0ecf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2020
ms.locfileid: "87890544"
---
# <a name="evntcmd"></a>evntcmd

> 適用対象: Windows Server (半期チャネル)、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

構成ファイルの情報に基づいて、トラップ、トラップ宛先、またはその両方に対するイベントの変換を構成します。

## <a name="syntax"></a>構文

```
evntcmd [/s <computername>] [/v <verbositylevel>] [/n] <filename>
```

### <a name="parameters"></a>パラメーター

| パラメーター | 説明 |
| --------- | ----------- |
| /s`<computername>` | トラップするイベント、トラップの送信先、またはその両方を構成するコンピューターを名前で指定します。 コンピューターを指定しない場合、構成はローカルコンピューター上で行われます。 |
| /v`<verbositylevel>` | トラップおよびトラップ送信先が構成されているステータスメッセージの種類を指定します。 このパラメーターは、0から10までの整数である必要があります。 10を指定すると、すべての種類のメッセージが表示されます。これには、トラップの構成が成功したかどうかに関するトレースメッセージや警告が含まれます。 0を指定した場合、メッセージは表示されません。 |
| /n | このコンピューターがトラップ構成の変更を受信した場合に、SNMP サービスを再起動しないように指定します。 |
| `<filename>` | トラップするイベントと構成するトラップの送信先に関する情報を含む構成ファイルを名前で指定します。 |
| /? | コマンド プロンプトにヘルプを表示します。 |

#### <a name="remarks"></a>Remarks

- トラップの送信先を構成せずにトラップを構成する場合は、イベントを使用して有効な構成ファイルを作成できます。このトランスレーターは、グラフィカルユーティリティです。 SNMP サービスがインストールされている場合は、コマンドプロンプトで「 **evntwin** 」と入力することによって、イベントのトラップトランスレーターを開始できます。 必要なトラップを定義したら、[**エクスポート**] をクリックして、 **evntcmd**での使用に適したファイルを作成します。 イベントを使用して、簡単に構成ファイルを作成し、コマンドプロンプトで**evntcmd**と共に構成ファイルを使用して、複数のコンピューターでトラップをすばやく構成することができます。

- トラップを構成するための構文は次のとおりです。

  ```
  #pragma add <eventlogfile> <eventsource> <eventID> [<count> [<period>]]
  ```

  次のテキストは true になります。

    - **#pragma**は、ファイル内のすべてのエントリの先頭に記述する必要があります。

    - パラメーター **add**は、トラップ構成にイベントを追加することを指定します。

    - パラメーター **eventlogfile**、 **Eventsource**、および**eventID**が必要です。 **eventlogfile**では、イベントが記録されるファイルを指定します。 **eventsource**は、イベントを生成するアプリケーションを指定し、 **eventID**は各イベントを識別する一意の番号を指定します。

    各イベントに対応する値を特定するには、コマンドプロンプトで「 **evntwin** 」と入力して、イベントをトラップするように開始します。 [**カスタム**] をクリックし、[**編集**] をクリックします。 [**イベントソース**] で、構成するイベントが見つかるまでフォルダーを参照してクリックし、[**追加**] をクリックします。 イベントソース、イベントログファイル、およびイベント ID に関する情報が、それぞれ [**ソース]、[ログ**]、[**トラップ固有の id**] の下に表示されます。

    - **Count**パラメーターは省略可能であり、トラップメッセージが送信される前にイベントが発生する必要がある回数を指定します。 このパラメーターを使用しない場合、イベントが1回発生した後にトラップメッセージが送信されます。

    - **Period**パラメーターは省略可能ですが、 **count**パラメーターを使用する必要があります。 **Period**パラメーターには、トラップメッセージが送信される前に、イベントが**カウント**パラメーターで指定した回数だけ発生する必要がある時間 (秒単位) を指定します。 このパラメーターを使用しない場合、イベントの発生後にトラップメッセージが送信されます。これは、イベントが発生するまでの経過時間に関係なく、 ***count***パラメーターで指定された回数だけ発生します。

- トラップを削除するための構文は次のとおりです。

  ```
  #pragma delete <eventlogfile> <eventsource> <eventID>
  ```

  次のテキストは true になります。

    - **#pragma**は、ファイル内のすべてのエントリの先頭に記述する必要があります。

    - パラメーター **delete**は、トラップ構成のイベントを削除することを指定します。

    - パラメーター **eventlogfile**、 **Eventsource**、および**eventID**が必要です。 **eventlogfile**では、イベントが記録されるファイルを指定します。 **eventsource**は、イベントを生成するアプリケーションを指定し、 **eventID**は各イベントを識別する一意の番号を指定します。

    各イベントに対応する値を特定するには、コマンドプロンプトで「 **evntwin** 」と入力して、イベントをトラップするように開始します。 [**カスタム**] をクリックし、[**編集**] をクリックします。 [**イベントソース**] で、構成するイベントが見つかるまでフォルダーを参照してクリックし、[**追加**] をクリックします。 イベントソース、イベントログファイル、およびイベント ID に関する情報が、それぞれ [**ソース]、[ログ**]、[**トラップ固有の id**] の下に表示されます。

- トラップ送信先を構成するための構文は次のとおりです。

  ```
  #pragma add_TRAP_DEST <communityname> <hostID>
  ```

  次のテキストは true になります。

    - **#pragma**は、ファイル内のすべてのエントリの先頭に記述する必要があります。

    - パラメーター **add_TRAP_DEST**は、コミュニティ内の指定されたホストにトラップメッセージを送信することを指定します。

    - パラメーター **communityname**は、トラップメッセージが送信されるコミュニティを名前で指定します。

    - パラメーター **hostID**は、トラップメッセージを送信するホストの名前または IP アドレスを指定します。

- トラップの送信先を削除するための構文は次のとおりです。

  ```
  #pragma delete_TRAP_DEST <communityname> <hostID>
  ```

  次のテキストは true になります。

    - **#pragma**は、ファイル内のすべてのエントリの先頭に記述する必要があります。

    - パラメーター **delete_TRAP_DEST**は、コミュニティ内の指定されたホストにトラップメッセージを送信しないように指定します。

    - パラメーター **communityname**は、トラップメッセージを送信しないコミュニティを名前で指定します。

    - パラメーター **hostID**は、トラップメッセージを送信しないホストを名前または IP アドレスで指定します。

### <a name="examples"></a>例

次の例は、 **evntcmd**コマンドの構成ファイル内のエントリを示しています。 コマンドプロンプトで入力するように設計されていません。

イベントログサービスが再開されたときにトラップメッセージを送信するには、次のように入力します。

```
#pragma add System Eventlog 2147489653
```

イベントログサービスが3分間に2回再起動された場合にトラップメッセージを送信するには、次のように入力します。

```
#pragma add System Eventlog 2147489653 2 180
```

イベントログサービスが再開されるたびにトラップメッセージの送信を停止するには、次のように入力します。

```
#pragma delete System Eventlog 2147489653
```

*パブリック*というコミュニティ内のトラップメッセージを、IP アドレス*192.168.100.100*を使用してホストに送信するには、次のように入力します。

```
#pragma add_TRAP_DEST public 192.168.100.100
```

*プライベート*という名前のコミュニティ内のトラップメッセージを、"という名前のホストに送信するには、次のように*入力します*。

```
#pragma add_TRAP_DEST private Host1
```

*プライベート*という名前のコミュニティ内のトラップメッセージを、トラップ送信先を構成する同じコンピューターに送信しないようにするには、次のように入力します。

```
#pragma delete_TRAP_DEST private localhost
```

## <a name="additional-references"></a>その他の参照情報

- [コマンド ライン構文の記号](command-line-syntax-key.md)
