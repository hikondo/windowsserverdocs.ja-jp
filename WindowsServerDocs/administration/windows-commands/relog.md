---
title: relog
description: パフォーマンスカウンターのログファイルからパフォーマンスカウンターの情報を抽出する、relog コマンドの参照記事です。
ms.topic: article
ms.assetid: 7480f6c0-9953-4d70-9b1c-b27e09d8db13
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: c3c60503cf725d05afd4b21ceef5f36c64c2b155
ms.sourcegitcommit: 53d526bfeddb89d28af44210a23ba417f6ce0ecf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2020
ms.locfileid: "87883864"
---
# <a name="relog"></a>relog

> 適用対象: Windows Server (半期チャネル)、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

TSV (タブ区切りのテキスト)、CSV (コンマ区切りのテキスト)、バイナリ、または SQL など、他の形式にパフォーマンス カウンターのログからパフォーマンス カウンターを抽出します。

>[!NOTE]
>Windows Management Instrumentation (WMI) スクリプトへの**relog**の組み込みの詳細については、[スクリプトのブログ](https://devblogs.microsoft.com/scripting/)を参照してください。

## <a name="syntax"></a>構文

```
relog [<filename> [<filename> ...]] [/a] [/c <path> [<path> ...]] [/cf <filename>] [/f  {bin|csv|tsv|SQL}] [/t <value>] [/o {outputfile|DSN!CounterLog}] [/b <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/e <M/D/YYYY> [[<HH>:] <MM>:] <SS>] [/config {<filename>|i}] [/q]
```

### <a name="parameters"></a>パラメーター

| パラメーター | 説明 |
|--|--|
| `filename [filename ...]` | 既存のパフォーマンス カウンター ログのパス名を指定します。 複数の入力ファイルを指定できます。 |
| -a | 出力ファイルを上書きする代わりに追加します。 このオプションは、SQL 形式の既定値は常に追加するには適用されません。 |
| -c`path [path ...]` | ログに記録するパフォーマンス カウンターのパスを指定します。 複数のカウンターパスを指定するには、それらをスペースで区切り、カウンターパスを引用符で囲みます (たとえば、 `"path1 path2"` )。 |
| -cf ファイル名 | Relog ファイルに含まれるパフォーマンス カウンターの一覧をテキスト ファイルのパス名を指定します。 カウンター パスを入力ファイルで、行ごとに 1 つは、このオプションを使用します。 既定値は、元のログ ファイル内のすべてのカウンターをログします。 |
| -f`{bin | csv | tsv | SQL}` | 出力ファイルの形式のパス名を指定します。 既定の形式は **bin**します。 SQL データベースの場合、出力ファイルでを指定し `DSN!CounterLog` ます。 DSN (データベースのシステム名) を構成する ODBC マネージャーを使用して、データベースの場所を指定できます。 |
| -t 値 | *N*レコードのサンプル間隔を指定します。 Relog ファイルにすべての n 番目のデータ ポイントが含まれています。 既定値は、すべてのデータ ポイントです。 |
| -o`{Outputfile | SQL:DSN!Counter_Log}` | 出力ファイルまたは SQL データベースのカウンターの書き込み先のパス名を指定します。 <P>**注:** relog.exe の64ビットバージョンと32ビットバージョンでは、システム上の ODBC データソース (64 ビットおよび32ビット) で DSN を定義する必要があります。 DSN を定義するには、"SQL Server" ODBC ドライバーを使用します。 |
| -b`<M/D/YYYY> [[<HH>:]<MM>:]<SS>]` | 入力ファイルから最初のレコードをコピーする開始時刻を指定します。 日付と時刻は、M/D/YYYYHH: MM: SS の形式で指定する必要があります。 |
| -e `<M/D/YYYY> [[<HH>:]<MM>:]<SS>]` | 入力ファイルから最後のレコードをコピーする終了時刻を指定します。 日付と時刻は、M/D/YYYYHH: MM: SS の形式で指定する必要があります。 |
| -config`{filename | i}` | コマンド ライン パラメーターを含む設定ファイルのパス名を指定します。 構成ファイルを使用している場合は、コマンドラインに配置できる入力ファイルの一覧のプレースホルダーとして **-i**を使用できます。 コマンドラインを使用している場合は、 **-i**を使用しないでください。 また、などのワイルドカードを使用して、 `*.blg` 一度に複数の入力ファイル名を指定することもできます。 |
| -Q | 入力ファイルで指定されたログファイルのパフォーマンスカウンターと時間範囲を表示します。 |
| -y | すべての質問に対する "yes" に応答することで、プロンプトをバイパスします。 |
| /? | コマンド プロンプトにヘルプを表示します。 |

#### <a name="remarks"></a>Remarks

- カウンターパスの一般的な形式は次のとおりです。ここで、 `[\<computer>] \<object>[<parent>\<instance#index>] \<counter>]` 形式の親、インスタンス、インデックス、およびカウンターの各コンポーネントには、有効な名前またはワイルドカード文字を含めることができます。 コンピューター、親、インスタンス、およびインデックスの各コンポーネントは、すべてのカウンターに必要ではありません。

- 使用するカウンター パスを決定すると、自体カウンターに基づいています。 たとえば、 **LogicalDisk**オブジェクトにはインスタンスがある `<index>` ため、またはワイルドカードを指定する必要があり `<#index>` ます。 したがって、という形式を使用でき `\LogicalDisk(*/*#*)\\*` ます。

- 一方、 **Process**オブジェクトにはインスタンスは必要ありません `<index>` 。 したがって、という形式を使用でき `\Process(*)\ID Process` ます。

- **親**名にワイルドカード文字が指定されている場合は、指定されたインスタンスおよびカウンターフィールドに一致する、指定されたオブジェクトのすべてのインスタンスが返されます。

- **インスタンス**名にワイルドカード文字が指定されている場合は、指定されたインデックスに対応するすべてのインスタンス名がワイルドカード文字と一致する場合、指定されたオブジェクトおよび親オブジェクトのすべてのインスタンスが返されます。

- **カウンター**名にワイルドカード文字が指定されている場合は、指定されたオブジェクトのすべてのカウンターが返されます。

- 部分的なカウンターパス文字列の一致 (たとえば、pro *) はサポートされていません。

- カウンター ファイルは、1 つ以上の既存のログでのパフォーマンス カウンターを一覧表示されるテキスト ファイルです。 完全なカウンター名をログからコピーするか、または **/q**形式で出力し `<computer>\<object>\<instance>\<counter>` ます。 行ごとに 1 つのカウンター パスを一覧表示します。

- 実行すると、 **relog**コマンドは、指定されたカウンターを入力ファイル内のすべてのレコードからコピーし、必要に応じて形式を変換します。 ワイルドカードのパスは、カウンター ファイルで許可されます。

- **/T**パラメーターを使用して、すべてのレコードの間隔で入力ファイルを出力ファイルに挿入するように指定し `nth` ます。 既定では、すべてのレコードからデータがログされます。

- 出力ログに、書式設定された値の計算値を必要とするカウンターのデータを提供するために、開始時刻 (つまり **/b**) の前のレコードが含まれるように指定できます。 出力ファイルは、タイムスタンプを使用した入力ファイルから最後のレコードがより小さい **/e** (つまり、終了時刻) のパラメーターです。

- **/Config**オプションで使用する設定ファイルの内容は、という形式にする必要があります。 `<commandoption>\<value>` `<commandoption>` はコマンドラインオプションで、は `<value>` その値を指定します。

##<a name="q-examples"></a>Q # の例

既存のトレースログを再サンプリングするには、次のように入力します。

```
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.csv /t 30 /f csv
```

既存のトレースログを再サンプリングするには、次のように入力します。

```
relog c:\perflogs\daily_trace_log.blg /cf counter_file.txt /o c:\perflogs\reduced_log.blg /t 30
```

既存のトレースログをデータベースに再サンプリングするには、次のように入力します。

```
relog "c:\perflogs\daily_trace_log.blg" -f sql -o "SQL:sql2016x64odbc!counter_log"
```

## <a name="additional-references"></a>その他の参照情報

- [コマンド ライン構文の記号](command-line-syntax-key.md)
