---
title: Servermanagercmd
description: 'Windows コマンドに関するトピック * * * *- '
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 507c4b87-8e13-4872-8b34-0c7508eecbc1
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: b47947f8f98ba3bb7e5192713b3cf3b75b9c0212
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71384153"
---
# <a name="servermanagercmd"></a>Servermanagercmd

>適用対象: Windows Server (半期チャネル)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

> [!IMPORTANT]
> このコマンドは、Windows Server 2008 を実行しているサーバーまたは Windows Server 2008 R2 でのみ使用できます。 **Servermanagercmd.exe**は非推奨とされており、Windows Server 2012 では使用できません。 インストールまたは Windows Server 2012 の役割、役割サービス、および機能を削除する方法については、次を参照してください。 [インストールまたは役割、役割サービス、および機能をアンインストール](https://go.microsoft.com/fwlink/?LinkID=239563) Microsoft TechNet のです。

インストールし、役割、役割サービス、および機能を削除します。 すべての役割、役割サービス、および使用可能な機能の一覧が表示され、このコンピューターにインストールされているかを示します。 このツールを使用して指定できる役割、役割サービス、および機能の詳細については、[サーバーマネージャーのヘルプ](https://go.microsoft.com/fwlink/?LinkID=137387)を参照してください。 このコマンドを使用する方法の例については、[例](#BKMK_examples)を参照してください。

## <a name="syntax"></a>構文
```
servermanagercmd -query [[[<Drive>:]<path>]<query.xml>] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -inputpath  [[<Drive>:]<path>]<answer.xml> [-resultpath <result.xml> [-restart] | -whatif] [-logpath [[<Drive>:]<path>]<log.txt>]
servermanagercmd -install <Id> [-allSubFeatures] [-resultpath   [[<Drive>:]<path>]<result.xml> [-restart] | -whatif] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -remove <Id> [-resultpath    <result.xml> [-restart] | -whatif] [-logpath  [[<Drive>:]<path>]<log.txt>]
servermanagercmd [-help | -?]
servermanagercmd -version
```

## <a name="parameters"></a>パラメーター

|                   パラメーター                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  -query [[[\<Drive >:]\<パス >]\<*クエリ .xml*>]   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                サーバー上のすべての役割、役割サービス、およびインストールされ、インストール可能な機能の一覧を表示します。 このパラメーターの短い形式を使用することもできます。 **-q**します。 クエリの結果を XML ファイルに保存する場合は、置換する XML ファイルを指定 *query.xml*します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| -inputpath < [[\<Drive >:]\<パス >]*answer .xml*> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             インストールまたは削除、役割、役割サービス、およびによって表される XML 応答ファイルで指定されている機能 *answer.xml*します。 このパラメーターの短い形式を使用することもできます。 **-p します。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                -\<*Id*> をインストールします                | *Id*で指定された役割、役割サービス、または機能をインストールします。識別子では大文字と小文字が区別されません。 複数の役割、役割サービス、および機能は、スペースで区切る必要があります。 次のオプション パラメーターを使用、 **-インストール** パラメーター。<br /><br />-   **設定**\<*settingname*>=\<*settingname*> インストールに必要な設定を指定します。<br />-    **-allsubfeatures**は、下位のすべてのサービスと機能のインストールを、 *Id*値に指定された親の役割、役割サービス、または機能と共に指定します。 **注:**     役割コンテナーによってはすべての役割サービスのインストールを許可するコマンドライン識別子はありません。 これは、サーバー マネージャーのコマンドの同じインスタンスでは、役割サービスをインストールできない場合に大文字と小文字です。 たとえば、active directory フェデレーションサービスとフェデレーションサービスプロキシの役割サービスのフェデレーションサービスの役割サービスは、同じサーバーマネージャーコマンドインスタンスを使用してインストールすることはできません。<br />-    **-resultpath** \< *result.xml >   によって表される XML ファイルにインストールの結果を保存します。 \*result.xml*します。 このパラメーターの短い形式を使用することもできます。 **-r**します。 **注:**    **-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。<br />-    **-再起動**すると、インストールが完了したときにコンピューターが自動的に再起動されます (インストールされている役割または機能によって再起動が必要な場合)。<br />-    **-whatif** **-install**パラメーターに指定されたすべての操作を表示します。 **-Whatif**パラメーターの短い形式 ( **-w**) を使用することもできます。 **-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。<br />-    **-logpath** \<[[\<ドライブ >:]\<パス >] *.log*> 既定の **%windir%\temp\servermanager.log**以外のログファイルの名前と場所を指定します。 |
|                -\<*Id*> を削除します                 |                                                                                                                                                                                                                                                                                                                                                                     *Id*で指定された役割、役割サービス、または機能を削除します。識別子では大文字と小文字が区別されません。 複数の役割、役割サービス、および機能は、スペースで区切る必要があります。 次のオプション パラメーターを使用、 **-削除** パラメーター。<br /><br />-    **-resultpath** \<[[\<ドライブ >:]\<パス >]*結果の xml*> は、*結果の*.xml で表される Xml ファイルに削除結果を保存します。 このパラメーターの短い形式を使用することもできます。 **-r**します。 **注:**    **-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。<br />-   **の再起動**では、削除が完了すると、コンピューターが自動的に再起動されます (残りの役割または機能によって再起動が必要な場合)。<br />-    **-whatif**は、 **-remove**パラメーターに指定されたすべての操作を表示します。 **-Whatif**パラメーターの短い形式 ( **-w**) を使用することもできます。 **-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。<br />-    **-logpath**\<[[\<ドライブ >:]\<パス >] *.log*> 既定の **%windir%\temp\servermanager.log**以外のログファイルの名前と場所を指定します。                                                                                                                                                                                                                                                                                                                                                                      |
|                     -ヘルプ                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            コマンドプロンプトウィンドウにヘルプを表示します。 短い形式を使用することもできます。 **-?** します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                    バージョン                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            サーバー マネージャーのバージョン番号を表示します。 短い形式を使用することもできます。 **-v**します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="remarks"></a>注釈
**Servermanagercmd** は推奨されず、および Windows の将来のリリースでサポートされるとは限りません。 Windows Server 2008 R2 を実行しているコンピューターでサーバー マネージャーを実行している場合、サーバー マネージャーの使用できる Windows PowerShell コマンドレットを使用することをお勧めします。 詳細については、次を参照してください。 [サーバー マネージャー コマンドレット](https://go.microsoft.com/fwlink/?LinkID=137653)します。
Servermanagercmd は、サーバーのローカル ドライブ上の任意のディレクトリから実行できます。 インストールまたはソフトウェアを削除するサーバーの Administrators グループのメンバーである必要があります。

> [!IMPORTANT]
> Windows Server 2008 R2 のユーザーアカウント制御によって課せられるセキュリティ上の制限のため、 **servermanagercmd.exe**は、昇格されたアクセス許可で開かれたコマンドプロンプトウィンドウで実行する必要があります。 これを行うには、コマンドプロンプトの実行可能ファイル、または **[スタート]** メニューの **[コマンドプロンプト]** オブジェクトを右クリックし、 **[管理者として実行]** をクリックします。

## <a name="BKMK_examples"></a>例
次の例は、使用する方法を示しています。 **servermanagercmd** を一連のすべての役割、役割サービス、および機能の使用可能な、どの役割、役割サービス、および機能がコンピューターにインストールされているを表示します。
```
servermanagercmd -query
```
次の例は、使用する方法を示しています。 **servermanagercmd** Web サーバー (IIS) の役割をインストールし、インストールの結果をによって表される XML ファイルに保存 *installResult.xml*します。
```
servermanagercmd -install Web-Server -resultpath installResult.xml
```
次の例では、 **whatif**パラメーターを**servermanagercmd.exe**と共に使用して、*インストール*または削除される役割、役割サービス、および機能に関する詳細情報を、system.xml で表される xml 応答ファイルで指定された手順に基づいて表示する方法を示します。
```
servermanagercmd -inputpath install.xml -whatif
```

#### <a name="additional-references"></a>その他の参照情報
-   *Id*パラメーターに指定できる役割、役割サービス、または機能の識別子の完全な一覧については、または**servermanagercmd.exe**で XML 応答ファイルを使用する方法の詳細については、[サーバーマネージャーのヘルプ](https://go.microsoft.com/fwlink/?LinkID=137387)を参照してください。 (https://go.microsoft.com/fwlink/?LinkID=137387)。
-   参照してください [サーバー マネージャー コマンドレット](https://go.microsoft.com/fwlink/?LinkID=137653) サーバー マネージャーの使用できる Windows PowerShell コマンドレットの一覧です。
-   [コマンド ライン構文の記号](command-line-syntax-key.md)
