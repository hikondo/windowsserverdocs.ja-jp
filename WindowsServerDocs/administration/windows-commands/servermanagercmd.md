---
title: Servermanagercmd
description: 参照記事 * * * *-
ms.topic: article
ms.assetid: 507c4b87-8e13-4872-8b34-0c7508eecbc1
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: 9026bd527108f8d04e13bc75458a97d27f148d90
ms.sourcegitcommit: 53d526bfeddb89d28af44210a23ba417f6ce0ecf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2020
ms.locfileid: "87882747"
---
# <a name="servermanagercmd"></a>Servermanagercmd

> 適用対象: Windows Server (半期チャネル)、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

> [!IMPORTANT]
> このコマンドは、Windows Server 2008 を実行しているサーバーまたは Windows Server 2008 R2 でのみ使用できます。 **Servermanagercmd.exe**は非推奨とされており、Windows Server 2012 では使用できません。 インストールまたは Windows Server 2012 の役割、役割サービス、および機能を削除する方法については、次を参照してください。 [インストールまたは役割、役割サービス、および機能をアンインストール](https://go.microsoft.com/fwlink/?LinkID=239563) Microsoft TechNet のです。

インストールし、役割、役割サービス、および機能を削除します。 すべての役割、役割サービス、および使用可能な機能の一覧が表示され、このコンピューターにインストールされているかを示します。 このツールを使用して指定できる役割、役割サービス、および機能の詳細については、[サーバーマネージャーのヘルプ](https://go.microsoft.com/fwlink/?LinkID=137387)を参照してください。

## <a name="syntax"></a>構文
```
servermanagercmd -query [[[<Drive>:]<path>]<query.xml>] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -inputpath  [[<Drive>:]<path>]<answer.xml> [-resultpath <result.xml> [-restart] | -whatif] [-logpath [[<Drive>:]<path>]<log.txt>]
servermanagercmd -install <Id> [-allSubFeatures] [-resultpath   [[<Drive>:]<path>]<result.xml> [-restart] | -whatif] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -remove <Id> [-resultpath    <result.xml> [-restart] | -whatif] [-logpath  [[<Drive>:]<path>]<log.txt>]
servermanagercmd [-help | -?]
servermanagercmd -version
```

### <a name="parameters"></a>パラメーター

|                   パラメーター                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                説明                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  -query [[ \<Drive> :]] \<path> \<*query.xml*>   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                サーバー上のすべての役割、役割サービス、およびインストールされ、インストール可能な機能の一覧を表示します。 このパラメーターの短い形式を使用することもできます。 **-q**します。 クエリの結果を XML ファイルに保存する場合は、置換する XML ファイルを指定 *query.xml*します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| -inputpath < [[ \<Drive> :] \<path> ]*answer.xml*> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             インストールまたは削除、役割、役割サービス、およびによって表される XML 応答ファイルで指定されている機能 *answer.xml*します。 このパラメーターの短い形式を使用することもできます。 **-p します。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                -インストール\<*Id*>                | *Id*で指定された役割、役割サービス、または機能をインストールします。識別子では大文字と小文字が区別されません。 複数の役割、役割サービス、および機能は、スペースで区切る必要があります。 次のオプション パラメーターを使用、 **-インストール** パラメーター。<p>-   **-** \<*SettingName*> = 設定 \<*SettingValue*>  インストールに必要な設定を指定します。<br />-   **-allsubfeatures**機能親の役割、役割サービス、または*Id*値に指定された機能と共に、すべての下位サービスと機能のインストールを指定します。 **注:**     役割コンテナーによってはすべての役割サービスのインストールを許可するコマンドライン識別子はありません。 これは、サーバー マネージャーのコマンドの同じインスタンスでは、役割サービスをインストールできない場合に大文字と小文字です。 たとえば、active directory フェデレーションサービスとフェデレーションサービスプロキシの役割サービスのフェデレーションサービスの役割サービスは、同じサーバーマネージャーコマンドインスタンスを使用してインストールすることはできません。<br />-   **-resultpath** \<*result.xml>  インストールの結果をresult.xmlで表される XML ファイルに保存 \* *します。このパラメーターの短い形式である **-r**を使用することもできます。**注:**    **-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。 <br /> -   **-再起動**インストールが完了したらコンピューターを自動的に再起動します (インストールされている役割または機能によって再起動が必要な場合)。 <br /> -   **-whatif****-Install**パラメーターに指定されたすべての操作を表示します。**-Whatif**パラメーターの短い形式 ( **-w**) を使用することもできます。**-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。 <br /> -   **-logpath** \<[[\<Drive> :] \<path> ]* log.txt * > 既定の **%windir%\temp\servermanager.log**以外のログファイルの名前と場所を指定します。 |
|                -削除\<*Id*>                 |                                                                                                                                                                                                                                                                                                                                                                     *Id*で指定された役割、役割サービス、または機能を削除します。識別子では大文字と小文字が区別されません。 複数の役割、役割サービス、および機能は、スペースで区切る必要があります。 次のオプション パラメーターを使用、 **-削除** パラメーター。<p>-   **-resultpath** \<[[\<Drive> :] \<path> ]*result.xml*> は、 *result.xml*によって表される XML ファイルに削除結果を保存します。 このパラメーターの短い形式を使用することもできます。 **-r**します。 **注:**    **-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。<br />-   **-再起動**削除が完了したらコンピューターを自動的に再起動します (残りの役割または機能によって再起動が必要な場合)。<br />-   **-whatif****-Remove**パラメーターに指定されたすべての操作を表示します。 **-Whatif**パラメーターの短い形式 ( **-w**) を使用することもできます。 **-Resultpath**パラメーターと **-whatif**パラメーターの両方を指定して**servermanagercmd.exe**を実行することはできません。<br />-   **-logpath** \<[[\<Drive> :] \<path> ]*log.txt*> 既定の **%windir%\temp\servermanager.log**以外のログファイルの名前と場所を指定します。                                                                                                                                                                                                                                                                                                                                                                      |
|                     -help                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            コマンドプロンプトウィンドウにヘルプを表示します。 短い形式を使用することもできます。 **-?** します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                    -version                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            サーバー マネージャーのバージョン番号を表示します。 短い形式を使用することもできます。 **-v**します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="remarks"></a>Remarks
**Servermanagercmd** は非推奨とされ、および Windows の将来のリリースでサポートされるとは限りません。 Windows Server 2008 R2 を実行しているコンピューターでサーバー マネージャーを実行している場合、サーバー マネージャーの使用できる Windows PowerShell コマンドレットを使用することをお勧めします。 詳細については、次を参照してください。 [サーバー マネージャー コマンドレット](https://go.microsoft.com/fwlink/?LinkID=137653)します。
Servermanagercmd は、サーバーのローカル ドライブ上の任意のディレクトリから実行できます。 インストールまたはソフトウェアを削除するサーバーの Administrators グループのメンバーである必要があります。

> [!IMPORTANT]
> Windows Server 2008 R2 のユーザーアカウント制御によって課せられるセキュリティ上の制限のため、 **servermanagercmd.exe**は、昇格されたアクセス許可で開かれたコマンドプロンプトウィンドウで実行する必要があります。 これを行うには、コマンドプロンプトの実行可能ファイル、または [**スタート**] メニューの [**コマンドプロンプト**] オブジェクトを右クリックし、[**管理者として実行**] をクリックします。

## <a name="examples"></a>例
**Servermanagercmd.exe**を使用して、使用可能なすべての役割、役割サービス、および機能の一覧と、コンピューターにインストールされている役割、役割サービス、および機能を表示する方法について説明します。
```
servermanagercmd -query
```
**Servermanagercmd.exe**を使用して Web サーバー (IIS) の役割をインストールし、インストール結果を*installResult.xml*で表される XML ファイルに保存する方法を示します。
```
servermanagercmd -install Web-Server -resultpath installResult.xml
```
**Servermanagercmd.exe**で**whatif**パラメーターを使用して、インストールまたは削除される役割、役割サービス、および機能に関する詳細情報を表示する方法については、 *install.xml*によって表される XML 応答ファイルで指定された手順に基づいて説明します。
```
servermanagercmd -inputpath install.xml -whatif
```

## <a name="additional-references"></a>その他の参照情報
-   *Id*パラメーターに指定できる役割、役割サービス、または機能の識別子の完全な一覧については、または**servermanagercmd.exe**で XML 応答ファイルを使用する方法の詳細については、[サーバーマネージャーのヘルプ](https://go.microsoft.com/fwlink/?LinkID=137387)を参照してください。 (https://go.microsoft.com/fwlink/?LinkID=137387).
-   参照してください [サーバー マネージャー コマンドレット](https://go.microsoft.com/fwlink/?LinkID=137653) サーバー マネージャーの使用できる Windows PowerShell コマンドレットの一覧です。
- [コマンド ライン構文の記号](command-line-syntax-key.md)
