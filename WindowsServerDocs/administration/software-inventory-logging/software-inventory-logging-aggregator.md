---
title: ソフトウェア インベントリ ログ アグリゲーター
description: ソフトウェアインベントリログアグリゲーターのインストールと管理の方法について説明します。
ms.topic: article
ms.assetid: e4230a75-6bcd-47d9-ba92-a052a90a6abc
author: brentfor
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 4f8e7743e51a5316df474ad97768cf01292db668
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87991913"
---
# <a name="software-inventory-logging-aggregator"></a>ソフトウェア インベントリ ログ アグリゲーター

> Windows Server 2012 R2 の適用対象:

## <a name="what-is-software-inventory-logging-aggregator"></a>ソフトウェアインベントリログアグリゲーターとは

ソフトウェア インベントリ ログ アグリゲーター (SILA) は、データ センター内の Windows Server にインストールされている Microsoft のエンタープライズ ソフトウェアの数と種類の情報を受信して集計し、基本情報をまとめたレポートを生成します。

SILA は Windows Server 上にインストールされるソフトウェアですが、Windows Server のインストールには含まれていません。 このソフトウェアをインストールするには、まず、Windows ダウンロード センターから無料で [Software Inventory Logging Aggregator 1.0 for Windows Server](https://www.microsoft.com/download/details.aspx?id=49046)をダウンロードします。

ソフトウェア インベントリ ログ フレームワークは、IT 環境で多くのサーバーに展開されている Microsoft ソフトウェアのインベントリにかかる運用コストの削減を目的としています。 このフレームワークは、この SIL アグリゲーターと、Windows Server 2012 R2 で導入されたソフトウェアインベントリログ (SIL) の2つのコンポーネントで構成されています。 Software Inventory Logging Aggregator 1.0 は、1 台のサーバーにインストールされ、SIL 経由でデータを転送するように構成されたすべての Windows Server からインベントリ データを送受信します。 これにより、データ センターの管理者は、環境全体に幅広く配布することを意図した Windows Server のマスター イメージ内で SIL を有効にすることができます。  このソフトウェア パッケージは、ターゲット ポイントであり、社内にインストールするお客様を対象にしており、時間の経過に伴うインベントリ データのログ記録を容易にします。 このソフトウェアではまた、基本的なインベントリ レポートを Microsoft Excel で定期的に作成することができます。 Software Inventory Logging Aggregator 1.0 のレポートには、Windows Server、System Center、および SQL Server のインストール数が含まれます。

> [!IMPORTANT]
> このソフトウェアを使用してもデータが Microsoft に送信されることはありません。

### <a name="data-sil-collects-over-time"></a>時間の経過と共に SIL が収集するデータ

展開が正しく行われると、SIL アグリゲーターで、次のデータを表示できるようになります。

-   データ センター内の固有の Windows Server インストール

-   FQDN

-   識別 GUID

-   物理プロセッサとコアの数

-   仮想プロセッサの数 (VM の場合)

-   物理プロセッサのモデルと種類

-   物理プロセッサ上でのハイパー スレッディングの有効化の有無

-   シャーシのシリアル番号

-   各ホスト上で同時に実行されている Windows Server VM の、時間の経過に伴うハイ ウォーターマーク カウントと ID (ハイパーバイザーを実行しているホストの場合)

-   同時に実行されている管理された System Center エージェントの高ウォーターマーク数とホスト名は \( \) 、各ホスト上の Windows Server vm に時間の経過と共に存在します。

-   管理されたハイウォーターマークでカウントされた Vm にインストールされている System Center エージェントの名前 \-

-   \(ライセンスが必要な sku とエディションのみの SQL Server インストールの数と場所\)

-   [プログラムの追加と削除] にインストールされたソフトウェアの一覧

### <a name="who-will-use-sil"></a>誰が SIL を使用するか?

-   **IT 担当者またはデータ センター管理者**: 有用なソフトウェア インベントリ データを時間の経過と共に自動的に低コストで収集する方法を探し求めている。

-   **Cio および Finance コントローラー**。組織の IT 展開における Microsoft エンタープライズソフトウェアの使用状況を報告する必要があります。

## <a name="getting-started"></a>はじめに
**前提条件**

集計またはレポートの対象となる少なくとも 1 つのサーバー上の VM または物理ハードウェアにソフトウェア インベントリ ログ アグリゲーター (SIL アグリゲーター) が存在する

-   **Windows Server 2012 R2** (Standard または Datacenter Edition)

-   .Net Framework 4.5、WCF Services、および HTTP Activation の **IIS サーバー ロール**が **[役割と機能の追加]** ウィザードの同じ選択ツリーに置かれている必要があります。

-   **SQL Server** 2012 Sp2 Standard Edition または SQL Server 2014 Standard Edition

-   **64 ビット Microsoft Excel** 2013 (インストールでは省略可能になっているがレポートの作成で必要)

-   省略可能: **VMware PowerCLI 5.5.0.5836** (VMware 環境で必要)

>[!Note]
>Windows Management Framework を使用する場合、SIL アグリゲーターでのみ、WMF release 5.1 と互換性に関する既知の問題があります。  SIL アグリゲーターがインストールされているサーバーでは、WMF バージョン4.0 を超える必要はありません。

ソフトウェア インベントリ ログ (SIL) は次の更新プログラムがインストールされた Windows Server バージョン内にあります。

-   **Windows Server 2016**以降

-   **Windows Server 2012 R2** (Standard または Datacenter Edition)

    -   Windows Server 2012 R2 更新プログラム **KB3000850** (2014 年 11 月)

    -   Windows Server 2012 R2 更新プログラム **KB3060681** (2015 年 6 月)(Windows Update でオプションの更新プログラムとして表示される場合があります)

### <a name="security-and-account-types"></a>セキュリティおよびアカウントの種類
**証明書の要件**

SIL と SIL アグリゲーターは、認証済み通信用の SSL 証明書に依存します。 一般的な実装では、1 つの証明書 (サーバー名と証明書名が一致) で SIL アグリゲーターをインストールし、インベントリ データを受信する Web サービスをホストします。 次に、SIL 機能を使用してインベントリされる Windows Server では、異なるクライアント証明書を使用して、SIL アグリゲーターにデータをプッシュします。 PowerShell コマンドレットを使用して、アグリゲーターが関連データを受け入れる SIL アグリゲーターの承認済み証明書の一覧に証明書の拇印を追加する必要があります。 証明書でデータの各ペイロードの認証が行われた後、SIL アグリゲーターは処理およびデータベースへの挿入を続行します。 この動作方法については、「**SIL アグリゲーター コマンドレットの詳細**」セクションを参照してください。

### <a name="polling-account-setup"></a>ポーリング アカウントのセットアップ
SIL アグリゲーターに資格情報を追加してポーリング操作を有効にするには、最低権限のアカウントを使う必要があります。 また、セキュリティのベストプラクティスとして、データセンターまたはその他の IT 展開に含まれるすべてのホストまたは多くのホストで同じ資格情報を使用しないでください。

SIL アグリゲーターによるポーリングをセットアップする Windows Server ホスト上で、aministrators グループに属するユーザーを使用しないようにするには、次の手順に従ってユーザー アカウントへのアクセスに必要な最低限の権限のみを付与します。

#### <a name="to-setup-a-polling-account"></a>ポーリング アカウントをセットアップするには

1.  SIL アグリゲーターからポーリングする Windows Server Hyper-V ホスト上で、Windows の **[コンピューターの管理]** を使用してローカル ユーザー アカウントを作成します (最初のログオン時に、パスワードの変更を求めるボックスをオフにしてください)。

2.  このユーザーを **[リモート管理ユーザー]** グループに追加します。

3.  このユーザーを **[Hyper-V 管理者]** グループに追加します。

4.  **Start**Run を使用して、 **wmimgmt .msc**を開き -> **Run**ます。

5.  **[アクション]** セクションの **[他のアクション]** をクリックし、**[プロパティ]** を選択します。

6.  **[セキュリティ]** をクリックします。

7.  **[名前空間]** ツリービューで **[cimv2 名前空間]** を選択します。

8.  **[セキュリティ]** (ボタン) をクリックします。

9. **[リモート管理ユーザー]** グループを**マシン名\グループ名**の形式で追加します。

10. **[OK]** をクリックします。

11. **root \cimv2** ウィンドウの [セキュリティ] に戻り、**[リモート管理ユーザー]** を選択します。

12. 下部にある [アクセス許可] セクションで、[**リモートの有効化**] がオンになっていることを確認します。

13. **[適用]** をクリックし、**[OK]** をクリックします。

14. **[プロパティ]** ウィンドウの **[OK]** をクリックします。

### <a name="installing-sil-aggregator"></a>SIL アグリゲーターのインストール
SIL アグリゲーターを Windows Server にインストールする前に次のことを確認する必要があります。

-   このソフトウェアの web サービスをホストするために使用する**有効な SSL 証明書があり**ます。

    -   証明書は **.pfx** 形式である必要があります。

    -   Windows Server の名前と証明書の名前が一致している必要があります。

-   **SQL Server Standard Edition がインストールされている**か、またはこのソフトウェアと一緒に使用されるリモート サーバーにインストールされています。

    -   SIL アグリゲーターは、SQL Server 2012 sp2 と SQL Server 2014 の両方で動作します。 SQL Server のインストール中に行う選択で、特別なことはありません。

    -   SIL アグリゲーターのインストールで使用するアカウントは、インストール中にデータベースを作成できるように SQL の sysadmin ロールとする必要があります。

    -   SIL アグリゲーターをインストールする前に、SIL アグリゲーターのインストールで使用するアカウントを管理者として SQL Analysis Services に追加する必要があります。

    -   インストールが完了したら、自動的に実行されるように SQL Server エージェントを構成する必要があります。

-   **IIS サーバー ロールが** .Net Framework 4.5、WCF Services、および HTTP Activation と共に追加され、これらすべてが **[役割と機能の追加]** ウィザードの同じ選択ツリーに置かれている必要があります。

-   サーバーに対して **管理者特権を有するアカウントで、サーバーにログオンしています** 。

-   Windows 認証が必要な場合、**SQL Server に対して sysadmin 特権を有するアカウントでサーバーにログオンしています**。

    または

    SQL 認証が必要な場合、**SQL 管理者特権を有するアカウントに対するパスワードがあります**。

#### <a name="to-install-software-inventory-logging-aggregator"></a>ソフトウェア インベントリ ログ アグリゲーターをインストールするには

1.  **Setup.exe** をダブルクリックしてインストールを開始します。

2.  [ようこそ] ウィンドウで **[次へ]** をクリックします。

3.  使用許諾契約に同意する場合は、契約書に同意するボックスを選択して、 **[次へ]** をクリックします。

4.  **[機能の選択]** で、**[ソフトウェア インベントリ ログ アグリゲーターとレポート モジュールをインストールする]** を選択し、**[次へ]** をクリックします。

    レポート モジュールのみをインストールする方法の詳細については、「**SIL アグリゲーター コマンドレットの詳細**」セクションの「`Publish-SilReport`」を参照してください。

5.  すべての前提条件が満たされていることを確認したら、**[次へ]** をクリックします。

6.  **[アカウントの種類を選択してください]** で、使用している設定に応じて **[ローカル ユーザー]** または **[gMSA]** のいずれかを選択します。

    ローカル ユーザー アカウント オプションを選択すると、ローカル ユーザーが作成されると共に、強力なパスワードが自動的に生成されます。 このアカウントは、ローカル サーバーでのすべての SIL アグリゲーター サービスとタスク操作に使用されます。  アグリゲーターが Active Directory ドメインの一部である場合は、グループ管理サービス アカウント (gMSA) の使用が推奨されます (Windows Server 2012 以降)。 gMSA の詳細については、「 [グループの管理されたサービス アカウントの概要](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/hh831782(v=ws.11))」を参照してください。

    -   SIL アグリゲーターから別のサーバーにある SQL Server データベースを実行する場合は、gMSA アカウント オプションを使用する必要があります。

    -   Active Directory の gMSA enabled セキュリティグループにコンピューターアカウントを追加した後は、必ずサーバーを再起動してください。

7.  **[SQL Server の選択]** で、SQL インスタンスがインストールされている SQL Server を入力します。SQL インスタンスがローカル サーバーにインストールされている場合は、「**localhost**」を入力します。

    SQL インスタンス当たり SIL アグリゲーターは 1 つだけサポートされます。

8.  認証の種類を選択し、**[SQL の確認]** をクリックします。

9. **[次へ]** をクリックし、**[インターネット情報サービス サーバーの詳細]** で、ポート番号を選択するか、既定値をそのまま適用します。

10. **.pfx** ファイルの場所を参照し、.pfx ファイルのパスワードを入力し、**[次へ]** をクリックします。

11. 最終画面にインストールの進行状況が表示されます。 正常に完了したら、**[完了]** をクリックします。

### <a name="uninstalling-sil-aggregator"></a>SIL アグリゲーターのアンインストール

#### <a name="to-uninstall-software-inventory-logging-aggregator"></a>ソフトウェア インベントリ ログ アグリゲーターをアンインストールするには

1.  管理者として **PowerShell** を開き、「 `Stop-SilAggregator`」と入力します。 プロンプトが返されたとき、SIL アグリゲーターはすでに停止しています。

    仕様では、SIL アグリゲーターは、20 分後または 100 個のファイルを受信した後でファイルを処理するようになっています。  大規模環境では、このシナリオは決して発生しませんが、小規模環境ではアグリゲーターを停止する前にいくつかのファイルが未処理のまま残っている場合があります。 これらのファイルとデータを維持する必要がない場合は、 `–Force` パラメーターを使用します。

2.  **[コントロール パネル]** に進み、**[プログラムと機能]**、**[プログラムのアンインストール]**、**[ソフトウェア インベントリ ログ アグリゲーター]**、**[アンインストール]** の順にクリックします。

    ソフトウェア インベントリ ログ アグリゲーターは、データベース内のすべてのデータを削除するか、データベース内のすべてのデータを保存するかを選択するように求めるウィンドウを表示します。 既定の選択では、データベース内のすべてのデータが保存されます (再インストールが必要な場合は、既存のデータベースに接続して、アグリゲーターが終了した箇所を取得することができます)。

3.  **[保存]** または **[削除]** を選択し、**[次へ]** をクリックします。

4.  進行状況バーが完了したら、**[完了]** をクリックします。

### <a name="start-using-sil-and-the-sil-aggregator"></a>SIL および SIL アグリゲーターの使用開始

#### <a name="introduction-to-sil-aggregator-powershell-cmdlets"></a>SIL アグリゲーターの PowerShell コマンドレットの概要
次のコマンドは、Windows PowerShell コンソールから管理者として実行できます。

|Windows PowerShell コマンドレット|機能|
|-----------------------------|------------|
|`Start-SilAggregator`|ソフトウェア インベントリ ログ アグリゲーターのすべてのサービスとタスクを開始します。 アグリゲーターが、SIL ログが開始されたサーバーから HTTPS 経由でデータを受信するために必要です。|
|`Stop-SilAggregator`|ソフトウェア インベントリ ログ アグリゲーターのすべてのサービスとタスクを停止します。 タスクまたはサービスが操作途中である場合は、このコマンドの完了に遅延が生じる可能性があります。|
|`Set-SilAggregator`|ソフトウェア インベントリ ログ アグリゲーターの構成に管理者が変更を加えることを許可します。|
|`Add-SilVmHost`|一定の間隔でポーリングする特定のホスト名またはホスト名の配列を追加するために使用され \( ます。既定値は1時間間隔 \) です。|
|`Remove-SilVmHost`|一定の間隔でポーリングする特定のホスト名またはホスト名の配列を削除するために使用します。|
|`Get-SilVMHost`|状態データを実行している進行中の VM についてポーリングするようにソフトウェア インベントリ ログ アグリゲーターが構成されている物理ホストの一覧を取得するために使用します。|
|`Get-SILAggregatorData`|データベースからデータを取得して PowerShell コンソールに取り込むために使用します。|
|`Publish-SilReport`|ソフトウェア インベントリ ログ データのデータベースからレポートを作成するために使用します。 **注:** アグリゲーターでのキューブの処理は1日に1回発生します。 そのため、アグリゲーターで取得されたデータは、翌日までレポートに表示されません。|

#### <a name="suggested-order-to-start"></a>推奨する開始手順
ソフトウェア インベントリ ログ アグリゲーターがサーバーにインストールされたら、管理者として PowerShell を開きます。

-   SIL アグリゲーター上で以下の操作を行います。

    -   `Start-SilAggregator` を実行する

        この操作は、インベントリされるようにセットアップした (またはセットアップする) サーバーから HTTPS 経由でアグリゲーターに転送されるデータをアグリゲーターがアクティブに受信するために必要です。 このアグリゲーターに転送するサーバーを最初に有効にしたとしても、問題ありません。それらのサーバーはデータ ペイロードを最大で 30 日間、ローカルにキャッシュするからです。 アグリゲーターが "targeturi" を実行すると、キャッシュされたすべてのデータが一度にアグリゲーターに転送され、すべてのデータが処理されます。

    -   `Add-SilVMHost` を実行する

        例: `add-silvmhost –vmhostname contoso1 –hostcredential get-credential`

        -   この例で、**contoso1** はポーリング対象の物理ホスト サーバーのネットワーク名 (または IP アドレス) です。アグリゲーターを使用して、この物理ホスト サーバーをポーリングして、どの VM が実行中かという情報を定期的に更新し、そのデータを時間の経過と共に追跡します。 Get-Credential は、これ以降、このホストをポーリングするために使用するアカウントを入力するように、ログオンしているユーザーに求めます。 同じホスト上で同じコマンドを実行することで、使用するアカウントをいつでも更新できます。 時間の経過に伴うアカウント パスワードの変更および有効期限切れに注意してください。 資格情報が変更されたり有効期限切れになると、ホスト上でのポーリングは失敗します。

        -   既定では、ポーリングは時間単位で開始されます。つまり、`Start-SilAggregator` が実行されてから 1 時間後、またはホストがポーリング リストに新たに追加されてから 1 時間後に開始されます。  ポーリング間隔は、 `Set-SilAggregator cmdlet`を使用して変更できます。

        -   このコマンドレットでは、オプションのプリセット リスト (「**SIL アグリゲーター コマンドレットの詳細**」セクションを参照) から、追加するホストに適切な HostType および HyperVisorType を自動的に検出します。 適切なものを認識できない場合、または指定された資格情報が正しくない場合は、プロンプトが表示されます。 「**Y**」と入力して確定すると、ホストは追加され、**[不明]** とリストされますが、ポーリング対象外となります。

    -   `Set-SilAggregator –AddCertificateThumbprint`"クライアント証明書の拇印" を実行する

        この操作は、SIL ログが有効にされている Windows Server から HTTPS 経由でデータを受信するために必要です。 拇印は、SIL アグリゲーターがデータを受け入れるときに使用する拇印の一覧に追加されます。 SIL アグリゲーターは有効なエンタープライズ クライアント認証証明書を受け入れるように設計されています。 使用する証明書は、データを転送するサーバー上の** \\ Localmachine\MY (Local Computer-> Personal**) ストアにインストールする必要があります。

-   インベントリされる Windows Server 上で、管理者として PowerShell を開き、次のコマンドを実行します。

    -   `Set-SilLogging –TargetUri "https://contososilaggregator" –CertificateThumbprint "your client certificate's thumbprint"` を実行する

        -   これにより、インベントリ データを送信する場所と認証で使用する証明書が Windows Server 内の SIL に指示されます。

            > [!IMPORTANT]
            > "Https://" が TargetUri 値にあることを確認してください。

        -   この拇印を持つエンタープライズ クライアント証明書は **\localmachine\MY** にインストールする必要があります。または、**certmgr.msc** を使用して、**[Local Computer] -> [Personal]** ストアに証明書をインストールします。

            > [!IMPORTANT]
            > これらの値が正しくない場合、または証明書が適切なストアにインストールされていない (または有効でない) 場合は、SIL ログを開始しても、ターゲットへの転送は失敗します。 データは、最大で 30 日間、ローカルにキャッシュされます。

    -   `Start-SilLogging` を実行する

        これにより、SIL ログが開始します。 1 時間ごとに、時間内のランダムなポイントで、SIL は `–targeturi` パラメーターにより指定されたアグリゲーターにインベントリ データを転送します。 最初の転送は、完全なデータ セットになります。 後続の各転送は、何も変更されていないデータだけを識別する "ハートビート" になります。 データ セットに何らかの変更が加えられている場合は、別の完全なデータ セットが転送されます。

    -   `Publish-SilData` を実行する

        -   SIL でログを初めて有効にするとき、この手順は省略できます。

        -   これは、完全なデータ セットの 1 回限りの手動転送です。

        -   SIL ログが起動されてしばらくして、新しい SIL アグリゲーターを `Set-SilLogging` で指定する場合は、このコマンドレットを 1 回だけ実行し、完全なデータ セットを新しいアグリゲーターに送信する必要があります。

これらの手順に従って Windows Server 仮想マシンを実行している物理ホストを追加し、それらの Windows Server 内でソフトウェア インベントリ ログ (または SIL ログ) を有効にすると、SIL アグリゲーターでいつでも `Publish-SilReport –OpenReport` を実行できるようになります (Excel 2013 が必要)。 ただし、SQL Server Analysis Services のキューブの処理は 1 日に 1 回しか行われないので、データは同日のレポートには含まれません。

## <a name="architectural-overview"></a>アーキテクチャの概要
SIL はプッシュ モードとプル モードの両方で動作し、並列に動作する 2 つのコンポーネントで構成されています。1 つは、Windows Server 内部のソフトウェア インベントリ ログ (SIL) 機能であり、もう 1 つは、ソフトウェア インベントリ ログ アグリゲーター (SILA) のダウンロード可能な MSI です。 インベントリ対象のサーバーは、SIL を使用して HTTPS 経由でソフトウェア インベントリ データを SIL アグリゲーターにプッシュします (1 時間ごとに、各時間内のランダムなポイントで)。 次に、アグリゲーターは、物理ハイパーバイザー ホストをポーリングまたはクエリして、ハードウェア インベントリ データを 1 時間ごとにプルします。 プッシュとプルは両方とも、SIL の全機能を利用できるように、適切に構成する必要があります。 プッシュとプルはどちらを先に構成しても構いません。 ただし、アグリゲーターでのキューブの処理は 1 日に 1 回しか行われないので、アグリゲーターでプッシュまたはプルのいずれかを使用して取得されたデータは、翌日になるまでレポートに表示されません。

![ソフトウェアインベントリログアグリゲーターの図](../media/software-inventory-logging/SILA_Architecture.png)

> [!IMPORTANT]
> このソフトウェアを使用してもデータが Microsoft に送信されることはありません。

## <a name="enable-sil-on-multiple-servers"></a>複数のサーバーで SIL を有効にする
分散サーバーのインフラストラクチャ (たとえば、仮想マシンのプライベート クラウドなど) で SIL を有効にする方法は複数あります。  Windows Server イメージがネットワーク上で初めて起動したとき、インベントリ データを SIL アグリゲーターに自動的に送信するように Windows Server イメージをセットアップする 1 つの例を次に示します。

Windows Server がインストールされている各実行中の VM、または物理コンピューター/デバイスで (「**前提条件**」セクションを参照)、PowerShell コンソールから管理者として次のコマンドレットを実行します。

これらの手順を使用するには、.pfx 形式の有効なクライアント SSL 証明書が必要です。  この証明書の拇印は、`Set-SILAggregator –AddCertificateThumbprint` コマンドレットを使用して SIL アグリゲーターに追加する必要があります。 このクライアント証明書は、SIL アグリゲーターの名前と一致する必要はありません。

-   `$secpasswd = ConvertTo-SecureString "`**<password for the account with permissions to the network location holding your client pfx file>**`" -AsPlainText –Force`

-   `$mycreds = New-Object System.Management.Automation.PSCredential ("`**<user account with permissions to the network location holding your client  pfx file>**`", $secpasswd)`

-   `$driveLetters = ([int][char]'C')..([int][char]'Z') | % {[char]$_}`

-   `$occupiedDriveLetters = Get-Volume | % DriveLetter`

-   `$availableDriveLetters = $driveLetters | ? {$occupiedDriveLetters -notcontains $_}`

-   `$firstAvailableDriveLetter = $availableDriveLetters[0]`

-   `New-PSDrive -Name $firstAvailableDriveLetter -PSProvider filesystem -root`** < \\ pfx 証明書ファイルが格納されている共有のディレクトリ名>**`-credential $mycreds`

-   `Copy-Item ${firstAvailableDriveLetter}:\`**新しいドライブのディレクトリ> c: では、次のように<します。\<location of your choice>**

-   `Remove-PSDrive –Name $firstAvailableDriveLetter`

-   `$mypwd = ConvertTo-SecureString -String "`**<password for the certificate pfx file>**`" -Force –AsPlainText`

-   `Import-PfxCertificate -FilePath c:\`**<の場所は \\ 、>**`cert:\localMachine\my -Password $mypwd`

-   `Set-sillogging –targeturi "https://`**<machinename of your SIL Aggregator>** `–certificatethumbprint`

> [!NOTE]
> クライアントの pfx ファイルから証明書の拇印を使用し、**セット**を使用して Sil アグリゲーターに追加します。

-   `Start-sillogging`

SIL インベントリ データは、SIL アグリゲーターに到達できないときは必ず、Windows Server 上にローカルに最大 30 日間、キャッシュされます。 アグリゲーターへのプッシュが成功すると、すべてのキャッシュされたデータが転送されます。

古いアグリゲーターへのプッシュが成功した後で新しい SIL アグリゲーターに SIL データをプッシュする場合は、上記のリストに `Publish-SilData` を追加します (これにより、新しいアグリゲーターが必要としているこのマシンの SIL データの完全な補数が送信されます)。

## <a name="software-inventory-logging-aggregator-reports"></a>ソフトウェア インベントリ ログ アグリゲーターのレポート
![ソフトウェアインベントリログアグリゲーターレポートの画像](../media/software-inventory-logging/SILA_Report.png)

### <a name="cube-processing"></a>キューブの処理
ソフトウェア インベントリ ログ アグリゲーターで、SQL Server Analysis Services のキューブは、1 日 1 回、ローカル システム時刻の午前 3 時 00 分 00 秒に処理されます。 レポートにはその時刻までにアップされたすべてのデータが反映されますが、同日のそれ以降のデータは反映されません。

### <a name="high-water-mark"></a>ハイ ウォーターマーク
ソフトウェアインベントリログアグリゲーターレポートの基本的な側面は、同時に実行される Windows Server の "ハイウォーターマーク" と呼ばれるものをキャプチャすることです。 ハイ ウォーターマークは、当該レポート内の Windows Server と System Center の数に適用されます。 Windows Server の場合、各物理ホストには 1 か月の間にほとんどの Windows Server VM が同時に実行される時点があります (ホスト上の OS の種類に関係なく)。 これは月間のハイ ウォーターマークです。 さらに、System Center の場合、1 か月の間に各物理ホストでほとんどの管理された Windows Server が同時に実行される時点があります (管理されたサーバーは 1 つ以上の System Center エージェントが存在する場合に識別される)。 どの物理ホストについても最新のハイ ウォーターマークのみがレポートに表示されます。 ハイ ウォーターマークの後のデータは表示されません。 Windows Server VM (WS タブ) の数、または管理された Windows Server VM (SC タブ) の数が、それ以降ハイ ウォーターマークを下回ったとみなすことができます。 使用状況を追跡して表示するこの方法を使用すれば、容量の計画策定や当該製品のライセンス モデルの調整を容易に行うことができます。

レポート内の SQL 関連のタブでは、SQL Server のインストールは累積的にカウントされます。hig-ウォーターマークではありません。 合計は、SQL Server インストールの実行数を表します。

> [!NOTE]
> ソフトウェア インベントリ ログを使用することは、適用可能なライセンス条項のもとで Microsoft ソフトウェアの使用状況を正確にレポートする義務に置き換わるものではありません。

### <a name="poll-date-time"></a>ポーリング日時
ソフトウェア インベントリ ログ アグリゲーターを使用する場合は、ハイ ウォーターマーク数の集計がポーリングをベースにしていることを理解する必要があります。 つまり、ハイ ウォーターマークは、基になる物理ホストのポーリングによってのみキャプチャできます。 したがって、ハイウォーターマークカウントは、対応する "ポーリング日時" に直接関連付けられます。 ポーリング間隔は調整可能ですが、間隔値を大きくした場合、キャプチャされるハイ ウォーターマーク キャプチャの忠実性に影響があります。 間隔が長くなると、実際の使用状況を表すデータの正確さが低下します。

### <a name="reports-are-month-by-month"></a>レポートは月ごとに作成される
年単位のレポートも含めてすべてのレポートが、月ごとのレポートとして表示されます。 ハイ ウォーターマーク、合計、およびマシン データは、各カレンダー月の初めにリセットされます。

新しい月への切り替えで影響を受けるレポート データには次のようなものがあります。

-   すべてのホストのすべてハイ ウォーターマークは、新しい月の初めでリセットされます。

-   アグリゲーターが少なくとも 1 つの完全なペイロードを VM から (HTTPS 経由で) 受信するが、ハートビートの受信は停止する場合、その月の基になるホストのすべてのポーリングは、1 か月を通して VM が実行されているか停止されているときの仮想マシン、ホスト、および VM のデータ間の関連付けを前提にして行われます。 新しい月の初めに、この関連付けはクリアされ、該当する VM から完全なペイロードまたはハートビートを受信するまでその状態のままとなります。

### <a name="additional-notes-on-report-behavior"></a>レポートの動作に関する追加の注意事項

-   [概要] タブは、インベントリのクイック リファレンス リストとして使用されます。 ホストとその VM は同じ列に表示されます。

-   グレーまたはディムのすべての値を無視します。これらは、SSAS キューブからのレポート作成の成果物です。

-   VM が "不明な OS" と表示されている場合は、アグリゲーターが SIL 経由でその VM から HTTPS 経由で完全なデータペイロードを受信していないことを意味します。

-   [不明なホスト] の下に一覧表示される Vm は、Windows Server Vm がインベントリデータを HTTPS 経由でアグリゲーターに正常に転送していますが、アグリゲーターがその VM の基になるホストをアクティブまたは正常にポーリングしていません。 これらのエントリでは、基になるホストが不明なために、カウントは常に 0 になります。 `Add-SilVMHost` コマンドレットを正しい資格情報と組み合わせて使用することで、SIL アグリゲーターにホスト (またはすべてのホスト) を追加してポーリングを行います。 ポーリングが正常に行われると、VM データとホスト データはこの先、レポート上で関連付けられます。

-   すべての日付と時刻は、SIL アグリゲーターのシステム時刻とロケールに対してローカルです。 これには、SIL 対応のシステムから HTTPS 経由で受信したインベントリ データが含まれます。 これらのファイルが処理されるとき (受信後 20 分以内に)、データはローカル システム時刻でデータベースに挿入されます。

-   "SIL アグリゲーター" は、ソフトウェアインベントリログアグリゲーターがインストールされているすべてのサーバーコンピューターで表示されます。

-   物理ホストでプロセッサ数または物理メモリ量のいずれかが変更された場合、レポートには新しい行が古い行と一緒に表示されます。 ポーリングの更新は、古い行では停止し、新しい行ではそれがあたかも新たに追加されたホストであるように続行されます。

-   **[概要]** タブおよび **[詳細]** タブで、同時に実行されている Windows Server または管理された Windows Server の列に一覧された合計は、次のすべてのホストのすべてのハイ ウォーターマークの合計を示します。 これには、ハイパーバイザーホストではなく、vm が実行されていない Windows サーバーや、vm を実行しているサーバーがありますが、VM 内から HTTPS 経由でデータが受信されることはないため、"不明" になります。 これらは便宜上合計されます。

-   **[ダッシュ ボード]** タブの **[SQL Server]** セクションにある SQL Server のインストール総数は、ダッシュ ボードでのすべてのエディション合計の要約となります。  単一のサーバー上に SQL の複数のエディションがインストールされている場合、**[SQL の詳細]** タブに表示される合計との間で差異が生じる可能性があります。  ダッシュ ボードの場合はこれらをサーバーごとに別々にカウントします。**[詳細]** タブの場合はそうではありません。  1 つの Windows Server にインストールされた SQL の複数のエディションは、ライセンス条項に従って、常に 1 つとしてカウントされます。

-   **[ダッシュ ボード]** タブの **[Windows Server]** セクションにある **[その他のハイパーバイザー ホスト]** と **[ハイパーバイザー ホストの合計]** の行には、Hyper-V を実行している場合もあれば、そうでない場合もある Windows Server 物理ホストが含まれます。

### <a name="column-descriptions"></a>列の説明
SIL アグリゲーターで作成される Excel ベースのレポートの **[Windows Server の詳細]** タブにある各列について以下に説明します。 その他のデータ タブは、前述の列と同じになるか、またはそれらの列のサブセットとなります。 1つの例外は、[SQL Server] タブの "インストール数" です (「**ハイウォーターマーク**」セクションを参照してください)。

|列ヘッダー|説明|
|-----------------|---------------|
|カレンダー月|レポート内のデータは月別にまとめられ、最も新しいものが最初にきます。 月内のデータは、特定の順序で一覧表示されません。|
|ホスト名|SIL アグリゲーターが正常にポーリングしている物理ホストのネットワーク名または FQDN です。<p>Get SilVMHost コマンドレットを使用すると、追加済みであるがポーリングが正常に行われていない、または正常に行われなくなったホストを検索できます。 最後に成功したポーリングが表示されます。|
|ホストの種類|物理ホスト上のオペレーティング システムの製造元です。|
|ハイパーバイザーの種類|物理ホスト上のハイパーバイザーの製造元です。|
|プロセッサの製造元|物理ホスト上のプロセッサの製造元です。|
|プロセッサのモデル|物理ホスト上のプロセッサのモデルです。|
|ハイパー スレッディングは有効ですか?|物理ホストのプロセッサでハイパー スレッディングが有効になっているかどうかに応じて False または True として表示されます。|
|VM 名|Windows Server 仮想マシンのネットワーク名または FQDN です。 アグリゲーターがこのマシンから HTTPS 経由でデータを受信していない場合は、ハイパーバイザー内の仮想マシンのフレンドリ名が表示されます。|
|ホストで同時に実行されている Windows Server VM|ホスト上で同時に実行されている Windows Server VM の数です。 対象ホストにおける月内での最大カウント数は、その時点で一覧表示およびキャプチャされたハイ ウォーターマーク カウントです。<p>このドキュメントの「**ハイ ウォーターマーク**」を参照してください。<p>Windows Server がインストールされている物理ホスト、または Windows Server がインストールされていて既知の Windows Server VM が実行されていない物理ホストは常に、カウントが 1 になります。 少なくとも 1 つの既知の Windows Server VM がホスト上で実行されていてホスト自体で Windows Server が実行されている場合、ホスト OS はカウントに含まれません。|
|物理プロセッサ数|物理ホストにインストールされている物理プロセッサの数です。|
|物理コア数|物理ホストにインストールされている物理プロセッサ コアの数です。|
|仮想プロセッサ数|Windows が VM 内で認識した仮想プロセッサの数です。 この値は、Windows Server 内の SIL を使用して HTTPS 経由で転送されたデータにのみ基づくものです。|
|ポーリング日時|当該物理ホストで同時に実行されている Windows Server VM の最新のハイ ウォーターマーク ポイントの日時です。<p>このドキュメントの「 **ポーリング日時** 」を参照してください。|
|VM が最後に表示された日時|アグリゲータがこの Windows Server VM から HTTPS 経由でデータ インベントリを最後に受信した日時です。|
|ホストが最後に表示された日時|アグリゲータがこの Windows Server 物理ホストから HTTPS 経由でデータ インベントリを最後に受信した日時です。<p>Windows Server および HyperV を実行している物理ホストで、SIL を有効にし、インベントリ データを HTTPS 経由で SIL アグリゲーターに転送することがサポートされています。|

## <a name="sil-aggregator-cmdlets-detail"></a>SIL アグリゲーター コマンドレットの詳細
SIL アグリゲーターのコマンドレットの詳細を次に示します。 コマンドレットの完全なドキュメントについては、「 [SIL アグリゲーターの PowerShell コマンドレット](/previous-versions/windows/powershell-scripting/mt548455(v=wps.640))」を参照してください。

### <a name="publish-silreport"></a>Publish-SilReport

-   このコマンドレットはそのように使用され、ソフトウェアインベントリログレポートを作成し、ログインユーザーの Documents ディレクトリに配置します (コマンドレットを実行するコンピューターには Excel 2013 が必要です)。

-   `–OpenReport` パラメーターと組み合わせて使用すると、レポートが作成され、Excel に表示されます。

-   SIL アグリゲーターをインストールする場合は、レポート モジュールのみをインストールするオプションがあることがわかります。 Windows 8.1 または Windows 10 などの Windows クライアント オペレーティング システムにレポート モジュールをインストールすることができます。 これにより、ラップトップやタブレットのようなシン クライアントで SIL アグリゲーター データベース サーバーに接続し、SIL レポートを直接発行することができます。

    -   次の例では、SILContoso という名前の SIL アグリゲーター データベース サーバーを使用し、これに接続し、ローカル コンピューター上で SIL レポートを作成して開くための資格情報を求めています。

        `Publish-SilReport -DBServerName "SILContoso" -DBServerCredential Get-Credential –OpenReport`

    -   初めて接続する場合は、その前に SIL アグリゲーター データベース サーバー上のファイアウォール内のポートを開き、接続を許可しておく必要があるケースがほとんどです。 IT 担当者は事前にこのセットアップを実施して、財務管理者または他のインベントリ マネージャーが独自のレポートを作成できるようにアクセスを許可します。 これを行う手順については、次のリンクを参照してください。 SQL Server Analysis Services の代表的な既定ポートは 2383 です。

### <a name="add-silvmhost"></a>Add-SilVMHost
`Add-SilVMHost` コマンドレットを使用する場合、次のホストの種類とハイパーバイザー バージョンがサポートされています。 これらは指定する必要がありません。 `Add-SilVMHost` コマンドレットは、サポートされている組み合わせを自動的に検出します。 適切なものを検出できない場合、または指定された資格情報が正しくない場合は、プロンプトが表示されます。 ユーザーが "Y" エントリで受け入れた場合、ホストは追加されますが、ポーリングされません。 "Unknown" として追加されます。

|ハイパーバイザーのバージョン|SIL アグリゲーター         HostType 値|SIL アグリゲーターの HypervisorType 値|
|----------------------|-----------------------------------------|---------------------------------------|
|Windows Server, 2012 R2|Windows|HyperV|
|VMware 5.5|VMware|Esxi|
|Xen 4.x|Ubuntu、OpenSuse、または CentOS|Xen|
|XenServer 6.2|Citrix|XenServer|
|KVM|Ubuntu、OpenSuse、または CentOS|KVM|

これらのハイパーバイザー プラットフォームおよびタイプの他のバージョンの場合も同様に機能します。  SIL アグリゲーターには、次の sshnet バージョンが付属します。  これは Linux ベースの仮想化プラットフォームと通信する場合に使用されます。

<pre>sshnet 2014.4.6-beta1
https://sshnet.codeplex.com/releases/view/120504
Copyright (c) 2010, RENCI</pre>

### <a name="get-silaggregator"></a>Get-SilAggregator
`Get-SilAggregator` は、ソフトウェア インベントリ ログ アグリゲーター アプリケーションに構成情報を提供します。 出力の例を次に示します。

-   アプリケーションは実行中

-   ポーリング間隔は 1 時間ごと (時間単位で間隔を変更できる)

-   ポーリングの開始時刻

-   他のマシンがこのアグリゲーターにデータを転送する上で設定する必要があるターゲット URI

-   このアグリゲーターが受け入れる SIL データの出所である証明書の拇印

-   インストール時に指定されたアカウント タイプ

    `PS C:\Windows\system32> Get-SilAggregator`

    ``

    `State          : Running HostPollIntervalInHours : Every 1 Hour(s)`

    `PollStartTime      : 8/24/2015 5:07:33 AM`

    `TargetURI        : https://SilContoso`

    `CertificateThumbprint  : 3efc6b8ce7d5eefba5107ede9d1caca550417452, 2dc4ea8bfb64b1246a8c1ffa1b701cd1042a3412`

    `UserProfile       : Local`

### <a name="set-silaggregator"></a>Set-SilAggregator
`Set-SilAggregator` コマンドレット使用すると、次のことができます。

-   ポーリングが発生する時間単位の間隔を変更します。

-   指定した間隔で開始するポーリングの開始日時を変更します。

-   SIL アグリゲーターが受け入れるデータの取得元である証明書の拇印、または SIL アグリゲーターに関連付けられた証明書の拇印を追加または削除します。

### <a name="get-aggregatordata"></a>Get-AggregatorData

-   このコマンドレットを単独で使用した場合は、SIL アグリゲーター Excel レポートの [Windows Server の詳細] タブの内容が表示されます。

-   このコマンドレットをパラメーターと組み合わせて使用すると、SIL ソリューション全体のカスタマイズ使用に有用なデータベースからデータを直接取得することができます。

-   `–StartTime` パラメーターと `–Endtime` パラメーターを使用すると、開始日で始まる月の初めから、終了日で終わる月の最後までのレポート データが表示されます。

![完成した Get/集積 Atordata コマンドレットの画像](../media/software-inventory-logging/SILA_Get-SILAggregator.png)

### <a name="get-silvmhost"></a>Get-SilVMHost

-   このコマンドレットでは、SIL アグリゲーターでポーリング対象として構成されている物理ホストの一覧、最新のポーリング成功の日付と時刻、HostType (または OS の製造元)、および HypervisorType (ハイパーバイザーの製造元) を出力します。 HostType および HypervisorType については、Add-SilVMHost の詳細を参照してください。

    ホストに、ポーリングの日付と時刻は表示されていないが、サポートされている HostType と HypervisorType は表示されている場合、ポーリングがまだ始まっていないか、まだ正常終了していないことを意味します。

-   このコマンドレットは、VM から利用可能な場合、VM 自体から取得したデータを使用して追加されているホスト名も表示します。 これらは、一覧に表示されますが、HypervisorType と HostType はいずれも表示されません。 このデータは、ポーリングのためのセットアップが行われていない可能性のある VM とホストを対応させるのに有用です。

-   `–StartTime` パラメーターと `–EndTime` パラメーターを使用すると、ホストが最初に追加されたタイミング、または最後にポーリングされたタイミングを容易に把握できます。

### <a name="remove-silvmhost"></a>Remove-SilVMHost

-   このコマンドレットは、ポーリング対象のホストの一覧から任意のホストを削除します。 ホストが削除された場合、ホスト上の仮想マシンでホストを一覧にもう一度追加することはできますが、`Add-SilVMHost` コマンドレットで正しい資格情報を指定してもホストはポーリングされません。

-   ホストを削除した場合、そのホストはポーリングからは外されますが、レポートからは取り除かれません。 ポーリングは中止になるので、ホストは翌月のレポートには含まれません。

-   `–StartTime` パラメーターおよび`–EndTime` パラメーターを個別に使用することで、特定の日付までに正常にポーリングされたホスト グループ、または特定の日付以降に正常にポーリングされたホスト グループを容易に削除することができます。

## <a name="avoid-these-errors-and-issues-with-sil-and-sil-aggregator-troubleshooting-guide"></a>SIL および SIL アグリゲーターでの以下のエラーおよび問題を回避する (トラブルシューティング ガイド)

-   `SilLogging` コマンドレットまたは `Publish-Sildata` コマンドレットが失敗またはエラーになった場合は、以下のことを確認してください。

    -   **targeturi** のエントリに **https://** が含まれていることを確認してください。

    -   Windows Server 用の必須の更新プログラムがすべてインストールされていることを確認してください (「SIL の前提条件」を参照)。  確認する簡単な方法は、次のコマンドレットを使用してこれらを検索することです。`Get-SilWindowsUpdate *3060*, *3000*`

    -   アグリゲーターでの認証に使用される証明書が、SilLogging でインベントリされるローカル サーバー上の適切なストアにインストールされていることを確認します (「はじめに」セクションを参照)。

    -   SIL アグリゲーター上で、アグリゲーターでの認証に使用される証明書の拇印が、`Set-SilAggregator –AddCertificateThumbprint` コマンドレットを使用して一覧に追加されていることを確認してください (「はじめに」セクションを参照)。

    -   エンタープライズ証明書を使用する場合、SIL が有効になっているサーバーが、証明書を作成したドメインに参加していること、あるいはルート証明機関で検証できることを確認します。 アグリゲーターへのデータの転送/プッシュを試みるローカル マシン上で証明書が信頼されていない場合、この操作は失敗しエラーが返されます。

    -   上記の項目をすべて確認したら、SIL アグリゲーターのインストールで使用される証明書が正常な状態であり、SIL アグリゲーター サーバーそのものの名前と一致していることを確認します (他のマシンが同じ SIL アグリゲーターへの転送に成功している場合、この手順は不要です)。

    -   次の場所で、転送/プッシュを試行するサーバー上のキャッシュされた SIL ファイルを確認することができます (\Windows\System32 ログファイルの \\ \\ sil)。 `SilLogging` が開始され、1 時間より長く実行されている場合、または `Publish-SilData` が最近実行され、このディレクトリにファイルが存在しない場合、アグリゲーターへのログインは成功しています。

-   ログインしたユーザーが SQL データベースおよび Analysis Services のアクセス権を有することを確認します。

    -   これは、SIL アグリゲーターをインストールするときに必要です。

    -   これは、PowerShell をリモートで使用して SIL アグリゲーターを管理する場合に必要です。

-   クライアント デスクトップ OS から SIL アグリゲーター レポートを発行するには

    -   Windows クライアント (8.1/10) にのみレポート モジュールをインストールするオプションを使用します。

    -   PowerShell をリモートで使用してレポートの作成を試みているときにエラーが発生した場合、接続しようとしている SIL アグリゲーターでファイアウォール ポートが開かれていることが必要である可能性があります (「SIL アグリゲーター コマンドレットの詳細」セクションの「 `Publish-SilReport` コマンドレット」を参照)。

-   gMSA オプションを使用する場合:

    -   Active Directory の gMSA 対応のマシングループに参加した後は、必ずサーバーを再起動してください。

    -   インストールプロセスでは、domain\user を入力するときに完全修飾ドメインを使用しないでください。 たとえば、 **mygpo**を使用します。 Mydomain を入力しないでください **。 <i></i>mydomain.com \gmsaaccount**。

-   環境内で Windows Management Framework を使用する場合:

    -   装着されたがインストールされているサーバーに WMF 5.1 がインストールされていないことを確認します。  DLL **' mpunits.dll '** に関するイベントログでエラーが発生する可能性があります。  これにより、適切な操作を実行できなくなります。  では、WMF 4.0 のみが必要です。

## <a name="managing-sil-over-time"></a>時間の経過と共に SIL を管理する

### <a name="uninstallreinstall-sil-aggregator"></a>SIL アグリゲーターのアンインストール/再インストール
SIL アグリゲーターのアンインストールおよび再インストールが必要になった場合は、既存および過去のインベントリ データを失うことがなくその操作を実行できます。 単純にアンインストール (このドキュメントに記載の手順を参照) を実行し、ソフトウェア インベントリ ログ データベースを保持するオプションを選択します。 SIL アグリゲーターを再インストールし (このドキュメントに記載の手順を参照)、既存のデータベースをアタッチするオプションを選択します。

この操作を実行したら、以前 SIL アグリゲーターでポーリングしていたホストで `Add-SilVMHost` コマンドレットを使用して、資格情報を更新する必要があります (これらのホストから引き続きデータを収集する必要があることが前提)。 さらに、レポートに同じホストが重複してエントリされるのを避けるには、元々追加されていたものと同じネットワーク アドレスを使用して、ポーリングするホストを再度追加する必要もあります。 `Add-SilVMHost` コマンドレットを使用してホストを追加するのに使用できる 3 つのサポートされた vmhostname タイプを次に示します。

-   IP アドレス

-   完全修飾ドメイン名 (FQDN)

-   Netbios 名

### <a name="changing-sil-aggregators"></a>SIL アグリゲーターの変更
環境内で異なる SIL アグリゲーターを使用してサーバーのインベントリを開始する場合は、これらのサーバー上で SIL コマンドレット (`Set-SilLogging –TargetUri`) を使用して targeturi (および必要に応じて証明書の拇印) を変更するだけです。 この変更を行ったら、`Publish-SilData` コマンドレットを使用して、新しく指定した SIL アグリゲーターに完全なインベントリを少なくとも 1 回、転送する必要があるので注意してください。

### <a name="changing-or-updating-certificates"></a>証明書の変更または更新
**データ損失を回避するための重要な手順:** サーバーが SIL アグリゲーターにデータを転送するときに使用している証明書を変更する必要があるが、転送先のアグリゲーターがそのまま同じとなる場合は、次の手順を使用してアグリゲーターへの送信中にデータが損失する可能性を回避します。

-   SIL アグリゲーター上で、 `Set-SilAggregator –AddCertificateThumbprint` コマンドレットは使用して、新しい拇印を SIL アグリゲーターに追加します。

-   データ転送元のすべてのサーバー上で、新たに使用する証明書を **\LOCALMACHINE\MY** に任意の方法でインストールします。

-   データを転送元のすべてのサーバー上で、 `Set-SilLogging –CertificateThumbprint` コマンドレットを使用して新しい証明書の拇印に更新します。

-   **重大:** データ転送元のすべてのサーバーが更新された後でのみ、`Set-SilAggregator –RemoveCertificateThumbprint` コマンドレットを使用して SIL アグリゲーターから古い拇印を削除します。 SIL アグリゲーターから削除された古い証明書を使用して、データ転送元のサーバーが転送を続けた場合、 **データは失われ** 、アグリゲーターのデータベースに挿入されません。 これは、サーバーが以前に SIL アグリゲーターにデータを正常に転送し、その後、データを受け入れる SIL アグリゲーターの拇印一覧から証明書を削除する場合にのみ影響します。

## <a name="release-notes"></a>リリース ノート

-   SIL アグリゲーターには、SQL Server Standard Edition インストールを処理したり、その存在をレポートしないという既知の問題があります。  この問題を解決するには、次の手順を実行します。

    1.  SIL アグリゲーターで SQL Server Management Studio を開きます。

    2.  データベース エンジンに接続します。

    3.  選択ツリーから SoftwareInventoryLogging データベース、[テーブル] の順に展開します。

    4.  [Dbo] を右クリックし**ます。Dbo.sqlserveredition**をクリックし、[**上位200行の編集**] を選択します。

    5.  "Standard Edition" の横にある PropertyNumValue を**2760240536** (-1534726760) に変更します。

    6.  クエリを閉じ、変更を保存します。

    7.  このアグリゲーターにデータを既に記録している SIL を実行しているサーバーがある場合、アグリゲーターが SQL Server Standard Edition の存在を適切に処理するよう、一度 `Publish-SilData` コマンドレットを実行する必要があります。

-   物理サーバーでハイパー スレッディングが有効になっている場合、SIL で生成されるレポートでは、すべてのプロセッサ コア カウントにスレッド数も含められます。  ハイパースレッディングが有効になっているサーバー上の実際の物理コアの数を取得するには、これらのカウント数を半分に減らす必要があります。

-   Windows Server と System Center の両方について、"**同時に実行されている**..." というラベルの付いた行 ([**ダッシュボード**] タブ) と列 ([概要] タブと [**詳細**] タブ) の合計は、2つの場所で完全に一致しません。 [**ダッシュボード**] タブで、[**Windows Server デバイス (既知の vm を使用していません**)] の値を [**同時に実行して**います...] に追加する必要があります。[概要] タブと [**詳細**] タブで、この数値に等しい値を指定します。

-   このドキュメントの「**時間の経過と共に SIL を管理する**」セクションで、証明書を変更または更新する場合は、「**データ損失を回避するための重要な手順**」を参照してください。

-   Windows Server 2008 R2 および Windows Server 2012 のホストをポーリング ホスト リストに追加することはできますが、SIL アグリゲーターのこのバージョン (1.0) では、すべての機能で成功するように Windows Server 2012 R2 (Windows/Hyper-V ベースのホストに対応) のポーリングしかサポートしていません。  具体的には、Windows Server 2008 R2 ホストをポーリングした場合、SIL アグリゲーターのレポートで仮想マシンとホストが一致しない場合があります。

## <a name="see-also"></a>参照
[Software Inventory Logging Aggregator 1.0 for Windows Server](https://www.microsoft.com/download/details.aspx?id=49046)<br>
[SIL アグリゲーターの PowerShell コマンドレット](/previous-versions/windows/powershell-scripting/mt548455(v=wps.640))<br>
[SIL PowerShell コマンドレット](/powershell/module/softwareinventorylogging/?view=winserver2012R2-ps)<br>
[SIL の概要](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn268301(v=ws.11))<br>
[SIL の管理](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn383584(v=ws.11))