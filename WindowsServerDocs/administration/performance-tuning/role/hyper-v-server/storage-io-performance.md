---
title: Hyper-v ストレージ i/o パフォーマンス
description: Hyper-v のパフォーマンスチューニングに関する記憶域の i/o パフォーマンスに関する考慮事項
ms.topic: article
ms.author: asmahi; sandysp; jopoulso
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 6322d7f32c78109623a06a7674c08f76a2d5d542
ms.sourcegitcommit: 53d526bfeddb89d28af44210a23ba417f6ce0ecf
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/06/2020
ms.locfileid: "87896087"
---
# <a name="hyper-v-storage-io-performance"></a>Hyper-v ストレージ i/o パフォーマンス

このセクションでは、仮想マシンの記憶域 i/o パフォーマンスをチューニングするためのさまざまなオプションと考慮事項について説明します。 記憶域の i/o パスは、ゲスト記憶域スタック、ホスト仮想化層、ホスト記憶域スタック、および物理ディスクにまで拡張されます。 これらの各段階で最適化を実行する方法について、次に説明します。

## <a name="virtual-controllers"></a>仮想コントローラー

Hyper-v には、IDE、SCSI、仮想ホストバスアダプター (Hba) の3種類の仮想コントローラーが用意されています。

## <a name="ide"></a>IDE

IDE コントローラーは、IDE ディスクを仮想マシンに公開します。 IDE コントローラーはエミュレートされており、仮想マシン Integration Services ではなく、以前のバージョンの Windows を実行しているゲスト Vm で使用できる唯一のコントローラーです。 仮想マシン Integration Services に用意されている IDE フィルタードライバーを使用して実行されるディスク i/o は、エミュレートされた IDE コントローラーで提供されるディスク i/o パフォーマンスよりも大幅に優れています。 IDE ディスクは、オペレーティングシステムディスクに対してのみ使用することをお勧めします。これは、これらのデバイスに対して発行できる最大 i/o サイズが原因でパフォーマンスが制限されるためです。

## <a name="scsi-sas-controller"></a>SCSI (SAS コントローラー)

Scsi コントローラーは SCSI ディスクを仮想マシンに公開し、各仮想 SCSI コントローラーは最大64台のデバイスをサポートできます。 最適なパフォーマンスを得るには、複数のディスクを1つの仮想 SCSI コントローラーに接続し、追加のコントローラーを作成することをお勧めします。これは、仮想マシンに接続するディスクの数を増やす必要があるためです。 SCSI パスはエミュレートされません。これにより、オペレーティングシステムディスク以外の任意のディスクに対して推奨されるコントローラーになります。 第2世代の Vm では、可能な唯一の種類のコントローラーです。 Windows Server 2012 R2 で導入されたこのコントローラーは、共有 VHDX をサポートするために SAS として報告されます。

## <a name="virtual-fibre-channel-hbas"></a>仮想ファイバーチャネル Hba

仮想ファイバーチャネル Hba は、仮想マシンへの直接アクセスを許可するように構成して、イーサネット (FCoE) Lun 経由でファイバーチャネルおよびファイバーチャネルできます。 仮想ファイバーチャネルディスクは、ルートパーティション内の NTFS ファイルシステムをバイパスします。これにより、記憶域 i/o の CPU 使用率が低下します。

複数の仮想マシン間で共有される大規模なデータドライブとドライブ (ゲストクラスタリングのシナリオの場合) は、仮想ファイバーチャネルディスクの候補として最適です。

仮想ファイバーチャネルディスクでは、ホストに1つ以上のファイバーチャネルホストバスアダプター (Hba) がインストールされている必要があります。 各ホスト HBA は、Windows Server 2016 の仮想ファイバーチャネル/NPIV 機能をサポートする HBA ドライバーを使用する必要があります。 SAN ファブリックは NPIV をサポートする必要があり、仮想ファイバーチャネルに使用する HBA ポートは、NPIV をサポートするファイバーチャネルトポロジで設定する必要があります。

複数の HBA がインストールされているホストでスループットを最大化するには、Hyper-v 仮想マシン内に複数の仮想 Hba を構成することをお勧めします (仮想マシンごとに最大4つの Hba を構成できます)。 Hyper-v では、仮想 Hba と、同じ仮想 SAN にアクセスするホスト Hba とのバランスを自動的に取ることができます。

## <a name="virtual-disks"></a>仮想ディスク

仮想コントローラーを介して仮想マシンにディスクを公開できます。 これらのディスクは、ディスクまたはホスト上のパススルーディスクのファイル抽象化であるバーチャルハードディスクである可能性があります。

## <a name="virtual-hard-disks"></a>バーチャル ハード ディスク

VHD と VHDX という2つの仮想ハードディスクフォーマットがあります。 これらの各形式では、3種類の仮想ハードディスクファイルがサポートされています。

## <a name="vhd-format"></a>VHD 形式

VHD 形式は、過去のリリースで Hyper-v によってサポートされていた唯一の仮想ハードディスクフォーマットでした。 Windows Server 2012 で導入された VHD 形式は、より適切なアラインメントを実現するために変更されているため、新しい大きなセクターディスクではパフォーマンスが大幅に向上します。

Windows Server 2012 以降で作成された新しい VHD には、4 KB のアラインメントが最適です。 このアラインされた形式は、以前の Windows Server オペレーティングシステムと完全に互換性があります。 ただし、配置プロパティは、4 KB のアラインメントに対応していないパーサーからの新しい割り当て (以前のバージョンの Windows Server または Microsoft 以外のパーサーの VHD パーサーなど) からの新しい割り当てでは壊れています。

以前のリリースから移動された VHD は、この新しい強化された VHD 形式に自動的に変換されることはありません。

新しい VHD 形式に変換するには、次の Windows PowerShell コマンドを実行します。

``` syntax
Convert-VHD –Path E:\vms\testvhd\test.vhd –DestinationPath E:\vms\testvhd\test-converted.vhd
```

システム上のすべての Vhd の配置プロパティを確認し、最適な 4 KB のアラインメントに変換する必要があります。 元の VHD からのデータで新しい VHD を作成するには、[**ソースから作成**] オプションを使用します。

Windows Powershell を使用して配置を確認するには、次に示すように配置線を確認します。

``` syntax
Get-VHD –Path E:\vms\testvhd\test.vhd

Path                    : E:\vms\testvhd\test.vhd
VhdFormat               : VHD
VhdType                 : Dynamic
FileSize                : 69245440
Size                    : 10737418240
MinimumSize             : 10735321088
LogicalSectorSize       : 512
PhysicalSectorSize      : 512
BlockSize               : 2097152
ParentPath              :
FragmentationPercentage : 10
Alignment               : 0
Attached                : False
DiskNumber              :
IsDeleted               : False
Number                  :
```

Windows PowerShell を使用して配置を確認するには、次に示すように配置線を確認します。

``` syntax
Get-VHD –Path E:\vms\testvhd\test-converted.vhd

Path                    : E:\vms\testvhd\test-converted.vhd
VhdFormat               : VHD
VhdType                 : Dynamic
FileSize                : 69369856
Size                    : 10737418240
MinimumSize             : 10735321088
LogicalSectorSize       : 512
PhysicalSectorSize      : 512
BlockSize               : 2097152
ParentPath              :
FragmentationPercentage : 0
Alignment               : 1
Attached                : False
DiskNumber              :
IsDeleted               : False
Number                  :
```

## <a name="vhdx-format"></a>VHDX 形式

VHDX は、Windows Server 2012 で導入された新しい仮想ハードディスクフォーマットで、回復力のある高パフォーマンスの仮想ディスクを最大 64 tb まで作成できます。 この形式の利点は次のとおりです。

-   最大 64 tb の仮想ハードディスク記憶域容量のサポート。

-   VHDX メタデータ構造体に更新情報を記録することで、電源障害が発生した場合にデータを破損から保護します。

-   ユーザーが記録する必要のあるファイルに関するカスタムメタデータ (オペレーティングシステムのバージョンや適用された修正プログラムなど) を格納する機能。

VHDX 形式には、次のようなパフォーマンス上の利点もあります。

-   仮想ハード ディスク フォーマットの配置の改善により、大容量セクター ディスクで適切に動作します。

-   ダイナミックディスクおよび差分ディスクのブロックサイズを大きくすると、これらのディスクをワークロードのニーズに順応ことができます。

-   4 kb の論理セクター仮想ディスク。 4 KB のセクター向けに設計されたアプリケーションとワークロードで使用する場合にパフォーマンスを向上させることができます。

-   データの表現効率が向上します。これにより、ファイルサイズが小さくなり、基になる物理記憶装置が未使用領域を再利用できるようになります。 (Trim には、パススルーまたは SCSI ディスクとトリム互換のハードウェアが必要です)。

Windows Server 2016 にアップグレードする場合は、これらの利点により、すべての VHD ファイルを VHDX 形式に変換することをお勧めします。 VHD 形式のファイルを保持することが理にかなっているシナリオは、仮想マシンが、VHDX 形式をサポートしていない以前のバージョンの Hyper-v に移動する可能性がある場合のみです。

## <a name="types-of-virtual-hard-disk-files"></a>バーチャルハードディスクファイルの種類

VHD ファイルには3種類あります。 次のセクションでは、これらの型のパフォーマンス特性とトレードオフについて説明します。

VHD ファイルの種類の選択に関しては、次の推奨事項について考慮する必要があります。

-   VHD 形式を使用する場合、固定型を使用することをお勧めします。これは、他の VHD ファイルの種類と比較して、回復性とパフォーマンスの特性が優れているためです。

-   VHDX 形式を使用する場合は、動的な型を使用することをお勧めします。これは、必要な場合にのみ領域を割り当てることに関連する領域の節約に加えて、回復性の保証を提供するためです。

-   また、実行時に VHD ファイルを展開するときに十分なディスク領域があることを確認するために、ホストボリュームの記憶域がアクティブに監視されていない場合は、形式に関係なく、固定型も推奨されます。

-   仮想マシンのスナップショットは、ディスクへの書き込みを格納する差分 VHD を作成します。 スナップショットが少数しかない場合、ストレージ i/o の CPU 使用率が高くなる可能性がありますが、i/o 集中型サーバーの負荷が高い場合を除き、パフォーマンスに大きな影響を与えることはありません。 ただし、多数のスナップショットがあると、VHD からの読み取りでは、多くの差分 Vhd で要求されたブロックを確認する必要があるため、パフォーマンスが著しく低下する可能性があります。 適切なディスク i/o パフォーマンスを維持するには、スナップショットチェーンを短くしておくことが重要です。

## <a name="fixed-virtual-hard-disk-type"></a>固定バーチャルハードディスクの種類

Vhd ファイルの作成時に、VHD の領域が最初に割り当てられます。 この種類の VHD ファイルは、フラグメントの可能性が低くなります。1つの i/o が複数の i/o に分割されると、i/o スループットが低下します。 読み取りと書き込みではブロックのマッピングを検索する必要がないため、3つの VHD ファイルの種類の CPU オーバーヘッドは最も低くなります。

## <a name="dynamic-virtual-hard-disk-type"></a>ダイナミックバーチャルハードディスクの種類

VHD の空き領域は必要に応じて割り当てられます。 ディスクのブロックは、未割り当てブロックとして起動し、ファイル内の実際の領域によってバックアップされません。 ブロックが最初に書き込まれるときに、仮想化スタックは、そのブロックの VHD ファイル内の領域を割り当ててから、メタデータを更新する必要があります。 これにより、書き込みに必要なディスク i/o の数が増え、CPU 使用率が増加します。 既存のブロックに対する読み取りと書き込みでは、メタデータ内でブロックのマッピングを検索するときに、ディスクアクセスと CPU のオーバーヘッドが発生します。

## <a name="differencing-virtual-hard-disk-type"></a>差分仮想ハードディスクの種類

VHD は親 VHD ファイルを指しています。 に書き込まれていないブロックへの書き込みは、容量可変の VHD の場合と同様に、VHD ファイルに領域が割り当てられます。 ブロックに書き込みが行われた場合、読み取りは VHD ファイルから処理されます。 それ以外の場合は、親 VHD ファイルからサービスが提供されます。 どちらの場合も、メタデータが読み取られ、ブロックのマッピングが決定されます。 この VHD に対する読み取りと書き込みは、より多くの CPU を消費するため、固定の VHD ファイルよりも多くの i/o が発生します。

## <a name="block-size-considerations"></a>ブロックサイズに関する考慮事項

ブロックサイズは、パフォーマンスに大きな影響を与えます。 ブロックサイズは、ディスクを使用しているワークロードの割り当てパターンと一致させることをお勧めします。 たとえば、アプリケーションが 16 MB のチャンク単位で割り当てを行っている場合、仮想ハードディスクのブロックサイズを 16 MB にするのが最適です。 2 MB のブロックサイズ &gt; は、VHDX 形式のバーチャルハードディスクでのみ可能です。 ランダム i/o ワークロードの割り当てパターンよりも大きなブロックサイズを使用すると、ホスト上の領域の使用量が大幅に増加します。

## <a name="sector-size-implications"></a>セクターサイズの影響

ソフトウェア業界の多くは、512バイトのディスクセクターに依存していましたが、標準は 4 KB のディスクセクターに移行しています。 セクターサイズの変更によって発生する可能性のある互換性の問題を減らすために、ハードドライブベンダーには、512エミュレーションドライブ (512e) と呼ばれる移行サイズが導入されています。

これらのエミュレーションドライブは、フォーマット効率の向上やエラー修正コード (ECC) の強化されたスキームなど、4 KB のディスクセクターネイティブドライブによって提供されるいくつかの利点を提供します。 ディスクインターフェイスで 4 KB のセクターサイズを公開することによって発生する互換性の問題が少なくなります。

## <a name="support-for-512e-disks"></a>512e ディスクのサポート

512e ディスクは、物理セクターに関してのみ書き込みを実行できます。つまり、発行された512e セクターを直接書き込むことはできません。 これらの書き込みを可能にするディスク内の内部プロセスは、次の手順に従います。

-   ディスクは 4 KB の物理セクターを内部キャッシュに読み取ります。これには、書き込みで参照されている512バイトの論理セクターが含まれます。

-   4 KB のバッファーのデータは、更新された 512 バイト セクターを含むように変更されます。

-   更新された 4 KB のバッファーが、ディスクの物理セクターに書き戻されます。

このプロセスは、読み取り/変更/書き込み (RMW) と呼ばれます。 RMW プロセスの全体的なパフォーマンスの影響は、ワークロードによって異なります。 RMW プロセスでは、次の理由により、仮想ハードディスクのパフォーマンスが低下します。

-   動的および差分仮想ハードディスクには、データペイロードの前に512バイトのセクタービットマップがあります。 さらに、フッター、ヘッダー、および親ロケーターは、512バイトのセクターに配置されます。 仮想ハードディスクドライバーは、これらの構造を更新するために512バイトの書き込みコマンドを発行することが一般的です。その結果、前に説明した RMW プロセスになります。

-   一般に、アプリケーションは 4 KB のサイズ (NTFS の既定のクラスターサイズ) の倍数で読み取りと書き込みを実行します。 容量可変および差分仮想ハードディスクのデータペイロードブロックの前には512バイトのセクタービットマップがあるため、4 KB ブロックは物理 4 KB 境界には揃っていません。 次の図は、物理的な 4 KB 境界と整合していない VHD 4 KB ブロック (強調表示されている) を示しています。

![vhd 4 kb ブロック](../../media/perftune-guide-vhd-4kb-block.png)

ペイロードデータを更新するために現在のパーサーによって発行された 4 KB の書き込みコマンドごとに、ディスク上の2つのブロックに対して2つの読み取りが行われます。その後、更新された後、2つのディスクブロックに書き戻されます。 Windows Server 2016 の hyper-v は、vhd 形式で 4 KB の境界に配置するために前述の構造を準備することによって、VHD スタック上の512e ディスクのパフォーマンスへの影響の一部を軽減します。 これにより、仮想ハードディスクファイル内のデータにアクセスするときと、仮想ハードディスクのメタデータ構造を更新するときに、RMW 効果は回避されます。

既に説明したように、以前のバージョンの Windows Server からコピーされた Vhd は、自動的に 4 KB にアラインされません。 VHD インターフェイスで使用可能な [**コピー元ディスクからコピー**する] オプションを使用して、これらを最適な位置に手動で変換できます。

既定では、Vhd は、物理的なセクターサイズが512バイトで公開されます。 これは、アプリケーションと Vhd を以前のバージョンの Windows Server から移動した場合に、物理的なセクターサイズに依存するアプリケーションが影響を受けないようにするためです。

既定では、VHDX 形式のディスクは、パフォーマンスプロファイルの標準ディスクと大きなセクターディスクを最適化するために、4 KB の物理セクターサイズで作成されます。 4 KB のセクターを最大限に活用するには、VHDX 形式を使用することをお勧めします。

## <a name="support-for-native-4kb-disks"></a>ネイティブ 4 KB ディスクのサポート

Windows Server 2012 R2 以降の hyper-v では、4 KB のネイティブディスクがサポートされています。 ただし、VHD ディスクを 4 KB のネイティブディスクに格納することもできます。 これを行うには、512バイトのアクセスおよび更新要求を、対応する 4 KB のアクセスおよび更新に変換する software RMW アルゴリズムを仮想ストレージスタックレイヤーに実装します。

VHD ファイルは、512バイトの論理セクターサイズのディスクとしてのみ公開されるため、512バイトの i/o 要求を発行するアプリケーションが存在する可能性が非常に高くなります。 このような場合、RMW レイヤーはこれらの要求を満たし、パフォーマンスが低下します。 これは、VHDX でフォーマットされ、論理セクターサイズが512バイトのディスクにも当てはまります。

VHDX ファイルを 4 kb の論理セクターサイズのディスクとして公開するように構成することができます。これは、ディスクが 4 KB のネイティブ物理デバイスでホストされている場合のパフォーマンスを最適化するための最適な構成になります。 仮想ディスクを使用しているゲストとアプリケーションが、4 KB の論理セクターサイズでバックアップされていることを確認する必要があります。 VHDX のフォーマットは、4 KB の論理セクターサイズのデバイスで正しく動作します。

## <a name="pass-through-disks"></a>パススルーディスク

バーチャルマシンの VHD は、VHD ファイルではなく、物理ディスクまたは論理ユニット番号 (LUN) に直接マップできます。 その利点は、この構成によってルートパーティション内の NTFS ファイルシステムがバイパスされるため、記憶域 i/o の CPU 使用率が低下することです。 リスクとして、物理ディスクまたは Lun が VHD ファイルよりもコンピューター間を移動するのが困難になることがあります。

仮想マシンの移行シナリオで導入された制限により、パススルーディスクを使用しないようにする必要があります。

## <a name="advanced-storage-features"></a>高度なストレージ機能

### <a name="storage-quality-of-service-qos"></a>記憶域のサービスの品質 (QoS)

Windows Server 2012 R2 以降、Hyper-v には、仮想マシン上の記憶域に対して特定のサービス品質 (QoS) パラメーターを設定する機能が含まれています。 ストレージ QoS では、マルチテナント環境でのストレージ パフォーマンスの分離と、仮想マシンのワークロードを効率的に実行するために定義されているしきい値をストレージの I/O パフォーマンスが満たしていないときにユーザーに通知するメカニズムが提供されます。

ストレージ QoS では、仮想ハード ディスクの 1 秒あたりの最大入力/出力操作数 (IOPS) の値を指定できます。 管理者は、ストレージの I/O を調整して、テナントが別のテナントに影響を与えるほど過剰にストレージ リソースを消費するのを防ぐことができます。

最小 IOPS 値を設定することもできます。 管理者は、指定した仮想ハード ディスクの IOPS が最適なパフォーマンスに必要なしきい値より低下すると通知を受け取ります。

仮想マシンのメトリック インフラストラクチャも更新されており、管理者は、ストレージ関連のパラメーターを使用することによって、パフォーマンスおよびチャージバックに関するパラメーターを監視できます。

最大値と最小値は正規化された IOPS に関して指定されます。この場合、8 KB のデータはすべて i/o としてカウントされます。

制限事項の一部を次に示します。

-   仮想ディスクのみ

-   差分ディスクの親仮想ディスクを別のボリュームにすることはできません

-   レプリカ-プライマリサイトとは別に構成されたレプリカサイトの QoS

-   共有 VHDX はサポートされていません

記憶域のサービス品質の詳細については、「 [hyper-v の記憶域のサービスの品質](https://technet.microsoft.com/library/dn282281.aspx)」を参照してください。

### <a name="numa-io"></a>NUMA I/O

Windows Server 2012 以降では大規模な仮想マシンがサポートされています。また、大規模な仮想マシン構成 (たとえば、64仮想プロセッサを使用して実行されている Microsoft SQL Server の構成) では、i/o スループットの点でスケーラビリティも必要になります。

Windows Server 2012 ストレージスタックで最初に導入された次の主な機能強化により、Hyper-v は大規模な仮想マシンの i/o スケーラビリティのニーズを実現します。

-   ゲストデバイスとホスト記憶域スタックの間に作成される通信チャネルの数が増加します。

-   高負荷のプロセッサ間の中断を避けるために、仮想プロセッサ間での割り込み分布を含む、より効率的な i/o 完了メカニズム。

Windows Server 2012 で導入されたいくつかのレジストリエントリは、HKLM \\ System \\ CurrentControlSet \\ Enum \\ VMBUS \\ {device id} \\ {instance id} \\ storchannel にあります。これにより、チャネルの数を調整できます。 また、i/o の完了を処理する仮想プロセッサを、アプリケーションによって i/o プロセッサとして割り当てられた仮想 Cpu に配置します。 レジストリ設定は、デバイスのハードウェアキーでアダプターごとに構成されます。

-   **Channelcount (DWORD)** 使用するチャネルの合計数 (最大 16)。 既定値は、仮想プロセッサ/16 の数である天井です。

-   **Channelmask (QWORD)** チャネルのプロセッサ関係。 この値が設定されていない場合、または0に設定されている場合は、通常のストレージまたはネットワークチャネルに使用する既存のチャネル配布アルゴリズムが既定値になります。 これにより、ストレージチャネルがネットワークチャネルと競合しないようになります。

### <a name="offloaded-data-transfer-integration"></a>オフロードデータ転送統合

マージ、移動、コンパクトなど、Vhd の重要なメンテナンスタスクは、大量のデータのコピーに依存します。 現在主流のデータ コピーの方法ではデータを読み取ってから別の場所に書き込む必要があるため、処理に時間がかかります。 また、ホスト上の CPU リソースとメモリリソースも使用します。これは、バーチャルマシンのサービスに使用されている可能性があります。

記憶域ネットワーク (SAN) のベンダーは、大量のデータのコピー処理がほとんど即時に行われるように取り組んでいます。 この記憶域は、ディスク上のシステムが特定のデータセットをある場所から別の場所に移動することを許可するように設計されています。 このハードウェア機能はオフロードデータ転送として知られています。

Windows Server 2012 以降の hyper-v では、これらの操作をゲストオペレーティングシステムからホストハードウェアに渡すことができるように、オフロードデータ転送 (ODX) 操作をサポートしています。 これにより、仮想化されていない環境で実行されている場合と同様に、ワークロードが ODX 対応の記憶域を使用できるようになります。 Hyper-v ストレージスタックは、ディスクのマージや記憶域の移行メタ操作 (大量のデータが移動される場合など) でも、ODX 操作を発行します。

### <a name="unmap-integration"></a>統合のマップ解除

仮想ハードディスクファイルは、記憶域ボリューム上のファイルとして存在し、使用可能な領域を他のファイルと共有します。 これらのファイルのサイズは大きくなる傾向があるため、使用する領域が急速に増大する可能性があります。 物理記憶域の需要が増えると、IT ハードウェアの予算に影響します。 可能な限り物理記憶域の使用を最適化することが重要です。

Windows Server 2012 より前のバージョンでは、アプリケーションが仮想ハードディスク内のコンテンツを削除して、コンテンツの記憶域スペースを効果的に破棄した場合、ゲストオペレーティングシステムと Hyper-v ホストの Windows 記憶域スタックには、この情報が仮想ハードディスクおよび物理記憶装置に伝達されないという制限がありました。 これにより、Hyper-v 記憶域スタックは、VHD ベースの仮想ディスクファイルによる領域の使用を最適化できなくなります。 また、削除されたデータが以前に占有していた領域を、基になるストレージデバイスで再利用できなくなりました。

Windows Server 2012 以降の Hyper-v では、通知のマップ解除がサポートされています。これにより、VHDX ファイル内のデータをより効率的に表すことができます。 これにより、ファイルサイズが小さくなり、基になる物理記憶装置で未使用領域を再利用できるようになります。

Hyper-v 固有の SCSI、対応 IDE、および仮想ファイバーチャネルコントローラーのみが、ゲストからのマップ解除コマンドでホスト仮想記憶域スタックに接続できます。 バーチャルハードディスク上では、VHDX としてフォーマットされたバーチャルディスクのみが、ゲストからのコマンドのマッピングをサポートしています。

このような理由から、仮想ファイバーチャネルディスクを使用しない場合は、SCSI コントローラーに接続された VHDX ファイルを使用することをお勧めします。

## <a name="additional-references"></a>その他の参照情報

-   [Hyper-V の用語](terminology.md)

-   [Hyper-V のアーキテクチャ](architecture.md)

-   [Hyper-V サーバーの構成](configuration.md)

-   [Hyper-V プロセッサのパフォーマンス](processor-performance.md)

-   [Hyper-V メモリのパフォーマンス](memory-performance.md)

-   [Hyper-V ネットワークの I/O のパフォーマンス](network-io-performance.md)

-   [仮想化環境のボトルネックの検出](detecting-virtualized-environment-bottlenecks.md)

-   [Linux 仮想マシン](linux-virtual-machine-considerations.md)
