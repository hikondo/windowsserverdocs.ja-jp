---
title: サーバー マネージャーへのサーバーの追加
description: サーバー マネージャー
ms.prod: windows-server
ms.technology: manage-server-manager
ms.topic: article
ms.assetid: aab895f2-fe4d-4408-b66b-cdeadbd8969e
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.localizationpriority: medium
ms.date: 02/01/2018
ms.openlocfilehash: f7b5a5b358fa2df54777e0f1f88b1e86a7dafd80
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/08/2020
ms.locfileid: "80851575"
---
# <a name="add-servers-to-server-manager"></a>サーバー マネージャーへのサーバーの追加

>適用対象: Windows Server (半期チャネル)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

Windows Server では、単一のサーバー マネージャー コンソールを使用して複数のリモート サーバーを管理できます。 サーバー マネージャーを使用して管理するサーバーは、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012、Windows Server 2008 R2、または Windows Server 2008 が実行されているサーバーです。 新しいリリースの Windows Server を、古いリリースのサーバー マネージャーで管理することはできません。

このトピックでは、サーバー マネージャーのサーバー プールにサーバーを追加する方法について説明します。

> [!NOTE]
> マイクロソフトによるテストでは、Windows Server 2012 およびそれ以降のリリースの Windows Server でサーバー マネージャーを使用して、典型的なワークロードのサーバーを 100 台まで管理できることが実証されています。 1 つのサーバー マネージャー コンソールを使用して管理できるサーバーの数は、サーバー マネージャーを実行するコンピューターの管理対象サーバーと使用可能なハードウェアとネットワーク リソースを要求するデータの量によって異なることがあります。 表示するデータの量がコンピューターのリソースの上限に近づくと、サーバー マネージャーからの応答が遅くなり、更新が完了するまでに時間がかかることがあります。 サーバー マネージャーで管理できるサーバーの数を増やすには、 **[イベント データの構成]** ダイアログ ボックスの設定を使用して、管理対象サーバーからサーバー マネージャーが受け取るイベント データを制限することをお勧めします。 [イベント データの構成] は、 **[イベント]** タイルの **[タスク]** メニューから開くことができます。 組織内でエンタープライズ レベルのサーバーを管理する必要がある場合は、[Microsoft System Center スイート](https://go.microsoft.com/fwlink/p/?LinkId=239437)製品の検討をお勧めします。
> 
> Windows Server 2003 が実行されているサーバーからは、サーバー マネージャーはオンラインまたはオフラインの状態のみを受信することができます。 サーバー マネージャーを使用して Windows Server 2008 R2 または Windows Server 2008 を実行しているサーバーで管理タスクを実行することはできますが、Windows Server 2008 R2、Windows Server 2008、または Windows Server 2003 を実行しているサーバーに役割と機能を追加することはできません。
> 
> Windows Server オペレーティング システムのそれ以降のリリースを管理する、サーバー マネージャーを使用できません。 Windows Server 2012 R2、Windows Server 2012、Windows 8.1、または Windows 8 で実行されているサーバー マネージャーを使用して、Windows Server 2016 を実行しているサーバーを管理することはできません。

このトピックの内容は次のとおりです。

-   [管理するサーバーの追加](#BKMK_add)

-   [[管理に使用する資格情報] コマンドで資格情報を指定する](#BKMK_creds)

## <a name="provide-credentials-with-the-manage-as-command"></a><a name=BKMK_creds></a>[管理に使用する資格情報] コマンドで資格情報を指定する
サーバー マネージャーに追加するリモート サーバーの一部では、アクセスまたは管理するために異なるユーザー アカウントの資格情報が必要になる場合があります。 サーバー マネージャーを実行しているコンピューターへのログオンに使用するものとは異なる資格情報を管理対象サーバーに指定するには、サーバー マネージャーにサーバーを追加した後で、 **[管理に使用する資格情報]** コマンドを使用します。このコマンドには、ロールまたはグループのホーム ページの **[サーバー]** タイルで管理対象サーバーのエントリを右クリックしてアクセスできます。 **[管理に使用する資格情報]** をクリックすると **[Windows セキュリティ]** ダイアログ ボックスが開き、そこでは管理対象サーバーでのアクセス権限を持つユーザー名を次のいずれかの形式で入力できます。

-   *ユーザー名*

-   *ユーザー名*@example.domain.com

-   *Domain*\\ *[ユーザー名]*

**[管理に使用する資格情報]** コマンドで開く **[Windows セキュリティ]** ダイアログ ボックスでは、スマート カードの資格情報は入力できません。サーバー マネージャーでのスマート カード資格情報の提供はサポートされていません。 **[管理に使用する資格情報]** コマンドを使用して提供した管理対象サーバーの資格情報はキャッシュされ、現在サーバー マネージャーを実行しているのと同じコンピューターを使用してサーバーを管理している間、または同じサーバーに対して空白または別の資格情報を指定することによって上書きしない限り、保持されています。 サーバー マネージャーの設定を他のコンピューターにエクスポートする場合、またはサーバー マネージャーの設定を他のコンピューターでも使用できるようにドメイン プロファイルをローミングするように構成する場合は、サーバー プール内のサーバーに対する **[管理に使用する資格情報]** の資格情報はローミング プロファイルに格納されません。 それらの資格情報については、管理元の各コンピューターで サーバー マネージャー ユーザーがそれぞれ追加する必要があります。

このトピックの手順に従って管理するサーバーを追加した後、追加したサーバーを管理するために必要になる可能性がある代替の資格情報を **[管理に使用する資格情報]** で指定する前に、次の管理可能性状態エラーがサーバーに対して表示されることがあります。

-   Kerberos ターゲット解決エラー

-   Kerberos 認証エラー

-   オンライン - アクセス拒否

> [!NOTE]
> **[管理に使用する資格情報]** コマンドをサポートしないロールおよび機能としては、リモート デスクトップ サービス (RDS) や IP アドレス管理 (IPAM) サーバーなどがあります。 サーバー マネージャーを実行しているコンピューターで使用しているものと同じ資格情報を使用して、リモート RDS または IPAM サーバーを管理できない場合は、これらのリモート サーバーの管理に通常使用するアカウントを、サーバー マネージャーを実行しているコンピューターの Administrators グループに追加してみてください。 次に、RDS または IPAM を実行しているリモート サーバーの管理に使用するアカウントで、サーバー マネージャーを実行しているコンピューターにログオンします。

## <a name="add-servers-to-manage"></a><a name=BKMK_add></a>管理するサーバーの追加
**[サーバーの追加]** ダイアログ ボックスでは、次の 3 種類の方法で、管理対象サーバーをサーバー マネージャーに追加できます。

-   **Active Directory® Domain Services** ローカル コンピューターと同じドメインにある Active Directory によって検出されたサーバーを管理対象として追加します。

-   **ドメイン ネーム システム (DNS) エントリ** コンピューター名または IP アドレスを使用して、管理するサーバーを検索します。

-   **複数のサーバーのインポート** コンピューター名または IP アドレスごとにサーバーが一覧表示されたファイルを使用して、インポートする複数のサーバーを指定します。

#### <a name="to-add-servers-to-the-server-pool"></a>サーバーをサーバー プールに追加するには

1.  サーバー マネージャーを既に開いている場合は、次の手順に進んでください。 サーバー マネージャーをまだ開いていない場合は、次のいずれかの方法で開きます。

    -   Windows デスクトップで、Windows タスク バーの **[サーバー マネージャー]** をクリックし、サーバー マネージャーを開始します。

    -   Windows の**スタート**画面で、サーバー マネージャー タイルをクリックします。

2.  **[管理]** メニューの **[サーバーの追加]** をクリックします。

3.  次のいずれかの操作を行います。

    -   **[Active Directory]** タブで、現在のドメインに含まれるサーバーを選択します。 複数のサーバーを選択するには、**Ctrl** キーを押しながら選択します。 右矢印ボタンをクリックし、選択したサーバーを **[選択]** の一覧に移動します。

    -   **[DNS]** タブで、コンピューター名または IP アドレスの最初の数文字を入力し、**Enter** キーを押すか、 **[検索]** をクリックします。 追加するサーバーを選択し、右矢印ボタンをクリックします。

    -   **[インポート]** タブで、追加するコンピューターの DNS 名または IP アドレスが 1 行に 1 つずつ列挙されたテキスト ファイルを参照します。

4.  サーバーの追加が完了したら、 **[OK]** をクリックします。

### <a name="add-and-manage-servers-in-workgroups"></a>ワークグループのサーバーを追加して管理する
ワークグループのサーバーはサーバー マネージャーに正常に追加できますが、追加後に、ワークグループのサーバーが含まれる役割またはグループのページの **[サーバー]** タイルの **[管理状態]** 列に、 **"資格情報が無効です"** というエラーが表示される場合があります。このエラーは、リモートのワークグループ サーバーへの接続またはそこからのデータ収集の試行時に発生します。

これらのエラーまたは似たエラーは、次の状況で発生する可能性があります。

-   管理対象サーバーが、サーバー マネージャーを実行しているコンピューターと同じワークグループに属している。

-   管理対象サーバーが、サーバー マネージャーを実行しているコンピューターとは異なるワークグループに属している。

-   コンピューターの 1 台はワークグループに属しているが、他はドメインに属している。

-   サーバー マネージャーを実行しているコンピューターはワークグループに属しており、リモートの管理対象サーバーは別のサブネット上にある。

-   どちらのコンピューターもドメインに属しているが、2 つのドメイン間に信頼関係がない。

-   どちらのコンピューターもドメインに属しているが、2 つのドメイン間に一方向の信頼関係しかない。

-   管理対象サーバーが IP アドレスを使用して追加された。

##### <a name="to-add-remote-workgroup-servers-to-server-manager"></a>リモートのワークグループ サーバーをサーバー マネージャーに追加するには

1.  サーバー マネージャーが実行されているコンピューターで、ワークグループ サーバーの名前を **TrustedHosts** の一覧に追加します。 これには NTLM 認証が必要です。 信頼されたホストの既存のリストにコンピューター名を追加するには、`Concatenate` パラメーターをコマンドに追加します。 たとえば、 `Server01` コンピューターを既存の信頼されたホストの一覧に追加するには、次のコマンドを使用します。

    ```
    Set-Item wsman:\localhost\Client\TrustedHosts Server01 -Concatenate -force
    ```

2.  管理対象にするワークグループ サーバーが、サーバー マネージャーを実行しているコンピューターと同じサブネットにあるかどうかを調べます。

    2 台のコンピューターが同じサブネットにある場合、または **[ネットワークと共有センター]** でワークグループ サーバーのネットワーク プロファイルが **[プライベート]** に設定されている場合は、次の手順に進みます。

    2 台のコンピューターが同じサブネットにない場合、またはワークグループ サーバーのネットワーク プロファイルが **[プライベート]** に設定されていない場合は、Windows ファイアウォールの受信の **[Windows リモート管理 (HTTP 受信)]** 設定の **[プロパティ]** ダイアログ ボックスの **[コンピューター]** タブでコンピューター名を追加して、リモート コンピューターからの接続を明示的に許可するように変更します。

3.  > [!IMPORTANT]
    > この手順のコマンドレットを実行すると、ワークグループ コンピューター上で、ビルトイン Administrator またはシステム アカウントでプロセスを実行する場合を除き、昇格されたプロセスの実行を防ぐユーザー アカウント制御 (UAC) の基準が上書きされます。 コマンドレットを実行すると、Administrators グループのメンバーは、ビルトイン Administrator としてログオンすることなく、ワークグループ サーバーを管理できるようになります。 ワークグループ サーバーを管理できるユーザーを追加するとセキュリティは低下しますが、ワークグループ サーバーを管理する複数のユーザーにビルトイン Administrator アカウントの資格情報を提供する方法より安全です。

    ワークグループ コンピューター上での昇格されたプロセスの実行に関する UAC 制限をオーバーライドするには、次のコマンドレットを実行して、ワークグループ サーバー上に **LocalAccountTokenFilterPolicy** というレジストリ エントリを作成します。

    ```
    New-ItemProperty -Name LocalAccountTokenFilterPolicy -path HKLM:\SOFTWARE\Microsoft\Windows\Currentversion\Policies\System -propertytype DWord -value 1
    ```

4.  サーバー マネージャーを実行しているコンピューターで、 **[すべてのサーバー]** ページを開きます。

5.  サーバー マネージャーを実行しているコンピューターと対象とするワークグループ サーバーが同じワークグループに属している場合は、最後の手順に進みます。 2 台のコンピューターが同じワークグループに属していない場合は、**サーバー** タイルで対象とするワークグループ サーバーを右クリックし、 **[管理に使用する資格情報]** をクリックします。

6.  ワークグループ サーバーのビルトイン Administrator アカウントを使ってワークグループ サーバーにログオンします。

7.  **[すべてのサーバー]** ページを最新の情報に更新し、ワークグループ サーバーの管理状態を表示して、サーバー マネージャーを使ってワークグループ サーバーに接続でき、データを収集できることを確認します。

##### <a name="to-add-remote-servers-when-server-manager-is-running-on-a-workgroup-computer"></a>サーバー マネージャーをワークグループ コンピューター上で実行している場合にリモート サーバーを追加するには

1.  サーバー マネージャーを実行しているコンピューターの Windows PowerShell セッションで、ローカル コンピューターの **TrustedHosts** の一覧にリモート サーバーを追加します。 信頼されたホストの既存のリストにコンピューター名を追加するには、`Concatenate` パラメーターをコマンドに追加します。 たとえば、 `Server01` コンピューターを既存の信頼されたホストの一覧に追加するには、次のコマンドを使用します。

    ```
    Set-Item wsman:\localhost\Client\TrustedHosts Server01 -Concatenate -force
    ```

2.  管理対象にするサーバーが、サーバー マネージャーを実行しているワークグループ コンピューターと同じサブネットにあるかどうかを調べます。

    2 台のコンピューターが同じサブネットにある場合、または **[ネットワークと共有センター]** でワークグループ コンピューターのネットワーク プロファイルが **[プライベート]** に設定されている場合は、次の手順に進みます。

    2 台のコンピューターが同じサブネットにない場合、またはワークグループ コンピューターのネットワーク プロファイルが **[プライベート]** に設定されていない場合は、サーバー マネージャーを実行しているワークグループ コンピューターで、Windows ファイアウォールの受信の **[Windows リモート管理 (HTTP 受信)]** 設定の **[プロパティ]** ダイアログ ボックスの **[コンピューター]** タブでコンピューター名を追加して、リモート コンピューターからの接続を明示的に許可するように変更します。

3.  サーバー マネージャーを実行しているコンピューターで、 **[すべてのサーバー]** ページを開きます。

4.  **[すべてのサーバー]** ページを最新の情報に更新し、リモート サーバーの管理状態を表示して、サーバー マネージャーを使ってリモート サーバーに接続でき、データを収集できることを確認します。 **[サーバー]** タイルにリモート サーバーに関する管理状態のエラーがまだ表示されている場合は、次の手順に進みます。

5.  サーバー マネージャーを実行しているコンピューターからログオフし、ビルトイン Administrator アカウントを使って再度ログオンします。 サーバー マネージャーを使ってリモート サーバーに接続でき、データを収集できることを確認するには、前に示した手順を繰り返します。

このセクションで説明した手順を実行しても、ワークグループ コンピューターからの管理に関する問題が解決しない場合は、Microsoft Web サイトの「[about_remote_Troubleshooting](https://technet.microsoft.com/library/dd347642.aspx)」を参照してください。

### <a name="add-and-manage-servers-in-clusters"></a>クラスターのサーバーを追加して管理する
サーバー マネージャーを使用して、フェールオーバー クラスター (サーバー クラスターまたは MSCS とも呼ばれます) 内にあるサーバーを管理できます。 フェールオーバー クラスターに含まれるサーバーには、クラスター ノードが物理か仮想かに関わらず、サーバー マネージャーではいくつかの固有の動作と管理の制限があります。

-   クラスター内の 1 台のサーバーをサーバー マネージャーに追加すると、クラスター内の物理および仮想の両方のサーバーが自動的にサーバー マネージャーに追加されます。 同様に、クラスター化されたサーバーをサーバー マネージャーから削除するときは、クラスター内の他のサーバーも削除するように求められます。

-   クラスター化された仮想サーバーのデータは動的であり、クラスター化された仮想ノードがホストされているサーバーのデータと同じなので、サーバー マネージャーには表示されません。 仮想サーバーをホストしているサーバーを選択することで、そのデータを表示できます。

-   サーバーの仮想クラスター オブジェクト名を使用してサーバーをサーバー マネージャーに追加した場合、サーバー マネージャーには (期待するような) 物理サーバー名ではなく仮想オブジェクト名が表示されます。

-   クラスター化された仮想サーバーにロールと機能をインストールすることはできません。

## <a name="see-also"></a>参照
[サーバー マネージャー](server-manager.md)
[サーバー グループの作成と管理](create-and-manage-server-groups.md)
