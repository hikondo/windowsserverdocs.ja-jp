---
title: Windows 認証の概念
description: Windows Server のセキュリティ
ms.topic: article
ms.assetid: 29d1db15-cae0-4e3d-9d8e-241ac206bb8b
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: 7ef3b9fde0ca9b9364a1fdcc99690b58f4f14f68
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87990008"
---
# <a name="windows-authentication-concepts"></a>Windows 認証の概念

>適用先:Windows Server (半期チャネル)、Windows Server 2016

このリファレンスの概要トピックでは、Windows 認証の基礎となる概念について説明します。

認証は、オブジェクトまたは利用者の ID を検証するプロセスです。 オブジェクトを認証する目的は、そのオブジェクトが本物であることを確認することにあります。 個人を認証する場合、目標は、ユーザーがなりすましではないことを確認することです。

ネットワーキングのコンテキストでの認証とは、ネットワーク アプリケーションまたはリソースに身元を証明する行為を表します。 通常、id は、ユーザーが知っているキー (公開キー暗号化と同様) または共有キーのいずれかを使用する暗号操作によって証明されます。 認証交換のサーバー側は、署名されたデータを既知の暗号化キーと比較して、認証試行を検証します。

暗号化キーを安全な一元的な場所に保管すると、認証プロセスのスケーラビリティと保守性が向上します。 Active Directory は、ユーザーの資格情報である暗号化キーを含む id 情報を格納するための推奨されるテクノロジであり、既定のテクノロジです。 既定の NTLM および Kerberos 実装には、Active Directory が必要です。

認証手法は、単純なログオンからオペレーティングシステムへの、またはサービスまたはアプリケーションへのサインインから、ユーザーが知っているもの (パスワードなど) に基づいてユーザーを識別します。これにより、トークン、公開キー証明書、画像、または生物属性などの機能を使用するより強力なセキュリティメカニズムが使用されます。 ビジネス環境のユーザーは、1 つまたは複数の場所に配置された複数の種類のサーバー上の複数のアプリケーションにアクセスすることがあります。 これらの理由から、認証では、他のプラットフォームや他の Windows オペレーティング システムの環境をサポートする必要があります。

## <a name="authentication-and-authorization-a-travel-analogy"></a>認証と承認: 旅行の例え
旅行の例えは、認証のしくみを説明するのに役立ちます。 通常、作業を開始するには、いくつかの準備タスクが必要です。 旅行者は、実際の id をホスト機関に証明する必要があります。 本証明書は、身分証明、出生地、個人の券、写真、またはホストの国の法律によって必要とされるもののいずれかになります。 旅行者の id は passport の発行によって検証されます。これは、組織によって発行および管理されるシステムアカウント (セキュリティプリンシパル) に似ています。 Passport および目的の宛先は、政府機関によって発行された一連のルールと規制に基づいています。

**旅**

旅行者が国際的な境界に到着すると、境界ガードによって資格情報の入力が求められ、旅行者が passport を提示します。 プロセスは2つのフォールドです。

-   ガードは、ローカル政府によって信頼されている (少なくともパスポートを発行する) セキュリティ機関によって発行されたことを確認し、passport が変更されていないことを確認することで、passport を認証します。

-   ガードは、顔がパスポートの顔と一致し、その他の必要な資格情報が正しい順序であることを確認して、旅行者を認証します。

Passport が有効であることが証明され、その所有者であることが証明された場合、認証は成功し、旅行者は境界を越えてアクセスを許可することができます。

セキュリティ機関間の推移的な信頼は、認証の基礎となります。国際的な境界で行われる認証の種類は、信頼に基づいています。 地方自治体は、出張を認識していませんが、host government が行うことを信頼しています。 ホスト政府が passport を発行したときに、その出張者を知ることはできませんでした。 これは、誕生証明書またはその他のドキュメントを発行した機関を信頼しています。 さらに、誕生証明書を発行した機関は、証明書に署名した医師を信頼しています。 医師は、促進の誕生日を持っています。この場合、この例では、新たに生まれたフットプリントを使用して証明書を送信します。 このようにして、信頼できる中継局を介して転送される信頼は推移的です。

推移的な信頼は、Windows クライアント/サーバーアーキテクチャにおけるネットワークセキュリティの基礎となります。 信頼関係は、ドメインツリーなどの一連のドメインにわたってフローし、ドメインとそのドメインを信頼するすべてのドメインとの間の関係を形成します。 たとえば、ドメイン A にドメイン B との推移的な信頼関係があり、ドメイン B がドメイン C を信頼している場合、ドメイン A はドメイン C を信頼します。

認証と承認には違いがあります。 認証を使用すると、ユーザーが本人であることがシステムによって証明されます。 承認によって、必要な操作を実行する権限があるかどうかがシステムによって確認されます。 次の手順と同じように境界線を作成するには、出張者が有効な passport の正しい所有者であることを認証するだけでは、必ずしも旅行者が国の入力を承認するとは限りません。 特定の国の居住者は、入力する国が特定の国のすべての市民に対して無制限のアクセス許可を付与する場合にのみ、passport を提示することで、別の国に入ることができます。

同様に、特定のドメインのアクセス許可のすべてのユーザーにリソースへのアクセスを許可することもできます。 カナダと同じように、そのドメインに属しているすべてのユーザーがカナダにアクセスできます。 ただし、ブラジルまたはインドに入力しようとした米国の市民は、これらの国の両方が、米国の市民にアクセスして有効な visa を持っている必要があるため、それらの国を単に入力することはできません。 そのため、認証ではリソースへのアクセスやリソースの使用に対する承認は保証されません。

## <a name="credentials"></a>資格情報
Passport と関連する可能性のある visas は、旅行のために受け入れられる資格情報です。 ただし、これらの資格情報では、旅行時に国内のすべてのリソースを入力したり、アクセスしたりすることはできません。 たとえば、会議に参加するには、追加の資格情報が必要です。 Windows では、アカウント所有者がネットワーク経由でリソースにアクセスできるようにするために、資格情報を何度も入力しなくても資格情報を管理できます。 この種類のアクセスでは、ユーザーは、別のアカウント識別子またはパスワードを入力しなくても、使用することが許可されているすべてのアプリケーションとデータソースにアクセスするために、システムから一度認証を受けることができます。 Windows プラットフォームでは、オペレーティングシステムのローカルセキュリティ機関 (LSA) のユーザー資格情報をローカルにキャッシュすることで、ネットワーク全体で1つのユーザー id (Active Directory によって管理される) を使用できるようになります。 ユーザーがドメインにログオンすると、Windows 認証パッケージは資格情報を透過的に使用して、ネットワークリソースに対して資格情報を認証するときにシングルサインオンを提供します。 資格情報の詳細については、「 [Windows 認証の資格情報プロセス](credentials-processes-in-windows-authentication.md)」を参照してください。

旅行のための多要素認証の形式は、passport やカンファレンスの登録情報などの id を認証するために複数のドキュメントを提供し、提示する必要がある場合があります。 Windows では、スマートカード、仮想スマートカード、および生体認証テクノロジを使用して、このフォームまたは認証を実装しています。

## <a name="security-principals-and-accounts"></a>セキュリティプリンシパルとアカウント
Windows では、アクションを開始できるすべてのユーザー、サービス、グループ、またはコンピューターは、セキュリティプリンシパルです。 セキュリティプリンシパルにはアカウントがあります。アカウントは、コンピューターに対してローカルにすることも、ドメインベースにすることもできます。 たとえば、Windows クライアントのドメインに参加しているコンピューターは、ユーザーがログオンしていない場合でも、ドメインコントローラーと通信することで、ネットワークドメインに参加できます。 通信を開始するには、コンピューターがドメイン内にアクティブなアカウントを持っている必要があります。 コンピューターからの通信を受け入れる前に、ドメインコントローラーのローカルセキュリティ機関がコンピューターの id を認証し、ユーザーのセキュリティプリンシパルの場合と同様に、コンピューターのセキュリティコンテキストを定義します。 このセキュリティコンテキストでは、ネットワーク上の特定のコンピューター、ユーザー、サービス、グループ、またはコンピューター上のユーザーまたはサービスの id と機能を定義します。 たとえば、アクセス可能なファイル共有やプリンターなどのリソースや、そのリソースのユーザー、サービス、またはコンピューターによって実行される読み取り、書き込み、変更などの操作を定義します。 詳細については、「[セキュリティプリンシパル](/windows/security/identity-protection/access-control/security-principals)」を参照してください。

アカウントは、claimant (人間のユーザーまたはサービス) を識別する手段であり、アクセスやリソースを要求します。 認証済みの passport を所有している旅行者は、ホストの国を持つアカウントを所有しています。 ユーザー、ユーザー、オブジェクト、およびサービスのグループはすべて、個別のアカウントまたは共有アカウントを持つことができます。 アカウントはグループのメンバーになることができ、特定の権限とアクセス許可を割り当てることができます。 アカウントは、ローカルコンピューター、ワークグループ、ネットワークに制限することも、ドメインのメンバーシップを割り当てられるようにすることもできます。

組み込みのアカウントと、メンバーであるセキュリティグループは、各バージョンの Windows で定義されています。 セキュリティグループを使用すると、正常に認証された多くのユーザーに同じセキュリティアクセス許可を割り当てることができます。これにより、アクセスの管理が簡単になります。 パスポートを発行するためのルールでは、出張がビジネス、tourist、政府機関などの特定のグループに割り当てられていることが必要になる場合があります。 このプロセスにより、グループのすべてのメンバーに対して一貫したセキュリティ権限が確保できます。 セキュリティグループを使用してアクセス許可を割り当てることにより、リソースのアクセス制御は一定で、管理と監査が容易になります。 必要に応じて適切なセキュリティグループからアクセスする必要があるユーザーを追加および削除することにより、アクセス制御リスト (Acl) に対する変更の頻度を最小限に抑えることができます。

スタンドアロンの管理されたサービスアカウントと仮想アカウントは、Microsoft Exchange Server やインターネットインフォメーションサービス (IIS) などの必要なアプリケーションを独自のドメインアカウントの分離と共に提供するために、管理者がこれらのアカウントのサービスプリンシパル名 (SPN) と資格情報を手動で管理する必要がなくなりまし2008た。 グループ管理サービスアカウントは、Windows Server 2012 で導入され、ドメイン内で同じ機能を提供しますが、その機能を複数のサーバーに拡張することもできます。 ネットワーク負荷分散など、サーバー ファームにホストされているサービスに接続されると、相互認証をサポートする認証プロトコルでは、サービスのすべてのインスタンスが同じプリンシパルを使用する必要があります。

アカウントの詳細については、以下を参照してください。

-   [Active Directory アカウント](/windows/security/identity-protection/access-control/active-directory-accounts)

-   [Active Directory セキュリティ グループ](/windows/security/identity-protection/access-control/active-directory-security-groups)

-   [ローカル アカウント](https://technet.microsoft.com/itpro/windows/keep-bastion.local-accounts)

-   [Microsoft アカウント](/windows/security/identity-protection/access-control/microsoft-accounts)

-   [サービス アカウント](/windows/security/identity-protection/access-control/service-accounts)

-   [特別な Id](/windows/security/identity-protection/access-control/special-identities)

## <a name="delegated-authentication"></a>委任された認証
旅行の例えを使用するには、デリゲートがよく知られている限り、政府機関の正式な委任のすべてのメンバーに同じアクセス権を発行する可能性があります。 この委任により、1つのメンバーが別のメンバーの機関に対して動作するようになります。 Windows では、ネットワークサービスがユーザーからの認証要求を受け入れ、2番目のネットワークサービスへの新しい接続を開始するためにそのユーザーの id を前提としている場合に、委任された認証が行われます。 委任された認証をサポートするには、フロントエンドまたは第1層のサーバー (web サーバーなど) を確立する必要があります。これらのサーバーは、クライアント認証要求とバックエンドまたは n 層サーバー (大規模データベースなど) を処理し、情報の格納を担当します。 組織内のユーザーに委任された認証を設定する権限を委任して、管理者の管理負荷を軽減することができます。

サービスまたはコンピューターを委任に対して信頼されているものとして確立することで、サービスまたはコンピューターが委任された認証を完了し、要求を行っているユーザーのチケットを受け取り、そのユーザーの情報にアクセスできるようにします。 このモデルでは、バックエンドサーバー上のデータアクセスを、適切なアクセス制御トークンを持つ資格情報を提示するユーザーまたはサービスだけに制限します。 さらに、これらのバックエンドリソースのアクセスを監査することもできます。 クライアントの代わりに使用するためにサーバーに委任される資格情報によって、すべてのデータへのアクセスを要求することにより、サーバーが侵害されないようにし、他のサーバーに格納されている機密情報にアクセスできるようにすることができます。 委任された認証は、複数のコンピューターでシングルサインオン機能を使用するように設計された多層アプリケーションで役立ちます。

### <a name="authentication-in-trust-relationships-between-domains"></a>ドメイン間の信頼関係での認証
複数のドメインを持つほとんどの組織は、出張先が国の別の地域に移動することが許可されているのと同じように、ユーザーが別のドメインにある共有リソースにアクセスする正当なニーズを持っています。 このアクセスを制御するには、あるドメインのユーザーも認証し、別のドメインのリソースを使用することを承認する必要があります。 異なるドメインのクライアントとサーバーの間で認証と承認の機能を提供するには、2つのドメイン間に信頼関係がある必要があります。 信頼関係は、セキュリティで保護された Active Directory 通信を行うための基盤となるテクノロジであり、Windows Server ネットワークアーキテクチャの重要なセキュリティコンポーネントです。

2つのドメイン間に信頼関係が存在する場合、各ドメインの認証メカニズムは、他方のドメインからの認証を信頼します。 信頼関係は、リソースドメイン内の共有リソースへのアクセスを制御するために役立ちます。信頼する側のドメインは、信頼された機関から受信した認証要求であることを確認することによって行われます (信頼される側のドメイン)。 このようにして、信頼は、ドメイン間での認証要求の検証のみを行うブリッジとして機能します。

特定の信頼が認証要求に渡す方法は、どのように構成されているかによって異なります。 信頼される側のドメインから信頼する側のドメインのリソースにアクセスできるようにすることで、信頼関係のあるドメインから他のドメインのリソースへのアクセスを提供することで、信頼関係を一方向にすることができます。 信頼も非推移的です。この場合の信頼関係は、2つの信頼関係パートナードメイン間にのみ信頼が存在するか、または推移的であり、パートナーのいずれかが信頼している他のすべてのドメインに対して信頼が自動的に拡張されます。

信頼のしくみの詳細については、「[ドメインおよびフォレストの信頼](/previous-versions/windows/it-pro/windows-server-2003/cc773178(v=ws.10))のしくみ」を参照してください。

### <a name="protocol-transition"></a>プロトコル遷移
プロトコルの移行は、アプリケーションの設計を支援します。これにより、アプリケーションは、ユーザー認証層でさまざまな認証メカニズムをサポートし、2つ目のアプリケーション層で相互認証や制約付き委任などのセキュリティ機能に対して Kerberos プロトコルに切り替えることができます。

プロトコル遷移の詳細については、「 [Kerberos プロトコル遷移と制約付き委任](/previous-versions/windows/it-pro/windows-server-2003/cc758097(v=ws.10))」を参照してください。

### <a name="constrained-delegation"></a>制約付き委任
制約付き委任を使用すると、管理者は、アプリケーションサービスがユーザーの代理として動作できる範囲を制限することで、アプリケーションの信頼境界を指定および適用することができます。 委任に対して信頼されているコンピューターからリソースを要求できる特定のサービスを指定できます。 サービスの承認権限を制限する柔軟性により、信頼されていないサービスによるセキュリティ侵害の機会を減らすことで、アプリケーションのセキュリティ設計を向上させることができます。

制約付き委任の詳細については、「 [Kerberos の制約付き委任の概要](../kerberos/kerberos-constrained-delegation-overview.md)」を参照してください。

## <a name="additional-references"></a>その他の参照情報
[Windows のログオンと認証の技術概要](https://technet.microsoft.com/library/dn269029.aspx)