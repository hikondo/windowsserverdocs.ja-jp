---
title: Windows ログオンのシナリオ
description: Windows Server のセキュリティ
ms.topic: article
ms.assetid: 66b7c568-67b7-4ac9-a479-a5a3b8a66142
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: b1a7783e02746f53d818066eb20ceb3094bd2707
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87990036"
---
# <a name="windows-logon-scenarios"></a>Windows ログオンのシナリオ

>適用先:Windows Server (半期チャネル)、Windows Server 2016

IT 担当者向けのこのリファレンストピックでは、一般的な Windows ログオンとサインインのシナリオについて概要を説明します。

Windows オペレーティングシステムでは、すべてのユーザーが、ローカルリソースとネットワークリソースにアクセスするために有効なアカウントを使用してコンピューターにログオンする必要があります。 Windows ベースのコンピューターは、ユーザーが認証されるログオンプロセスを実装することによって、リソースをセキュリティで保護します。 ユーザーが認証されると、承認とアクセス制御のテクノロジによって、リソース保護の2番目のフェーズが実装されます。認証されたユーザーがリソースへのアクセスを承認されているかどうかを判断します。

このトピックの内容は、このトピックの冒頭にある「**適用対象**」の一覧に指定されている Windows のバージョンに適用されます。

また、アプリケーションとサービスでは、アプリケーションまたはサービスによって提供されるリソースにアクセスするために、ユーザーにサインインを要求することもできます。 サインインプロセスはログオンプロセスと似ていますが、有効なアカウントと正しい資格情報が必要ですが、ログオン情報は、ローカルコンピューターのセキュリティアカウントマネージャー (SAM) データベースに格納されています。また、Active Directory にも該当します。 サインインアカウントと資格情報は、アプリケーションまたはサービスによって管理され、必要に応じて資格情報保管ボックスにローカルに保存することができます。

認証のしくみを理解するには、「 [Windows 認証の概念](windows-authentication-concepts.md)」を参照してください。

このトピックでは、次のシナリオについて説明します。

-   [対話型ログオン](#BKMK_InteractiveLogon)

-   [ネットワークログオン](#BKMK_NetworkLogon)

-   [スマート カード ログオン](#BKMK_SmartCardLogon)

-   [生体認証ログオン](#BKMK_BioLogon)

## <a name="interactive-logon"></a><a name="BKMK_InteractiveLogon"></a>対話型ログオン
ログオンプロセスは、ユーザーが資格情報の入力ダイアログボックスで資格情報を入力したとき、またはユーザーがスマートカードをスマートカードリーダーに挿入したとき、またはユーザーが生体認証デバイスと対話したときに開始されます。 ユーザーは、ローカルユーザーアカウントまたはドメインアカウントを使用してコンピューターにログオンすることで、対話型ログオンを実行できます。

次の図は、対話型のログオン要素とログオンプロセスを示しています。

![対話型ログオン要素とログオンプロセスを示す図](../media/windows-logon-scenarios/AuthN_LSA_Architecture_Client.gif)

**Windows クライアント認証アーキテクチャ**

### <a name="local-and-domain-logon"></a><a name="BKMK_LocaDomainLogon"></a>ローカルログオンとドメインログオン
ドメインログオンに対してユーザーに提示される資格情報には、アカウント名、パスワード、証明書などのローカルログオンに必要なすべての要素と、ドメイン情報の Active Directory が含まれます。 このプロセスでは、ユーザーのローカルコンピューターまたは Active Directory ドメインのセキュリティデータベースに対するユーザー id が確認されます。 ドメイン内のユーザーに対して、この必須ログオンプロセスを無効にすることはできません。

ユーザーは、次の2つの方法のいずれかで、コンピューターへの対話型ログオンを実行できます。

-   ローカル、ユーザーがコンピューターに直接物理的にアクセスできる場合、またはコンピューターがコンピューターのネットワークの一部である場合。

    ローカルログオンでは、ローカルコンピューター上の Windows リソースにアクセスするためのアクセス許可がユーザーに付与されます。 ローカルログオンでは、ユーザーがローカルコンピューターのセキュリティアカウントマネージャー (SAM) にユーザーアカウントを持っている必要があります。 SAM は、ローカルコンピューターのレジストリに格納されているセキュリティアカウントの形式で、ユーザーとグループの情報を保護および管理します。 コンピューターはネットワークにアクセスできますが、必須ではありません。 ローカルユーザーアカウントとグループメンバーシップ情報は、ローカルリソースへのアクセスを管理するために使用されます。

    ネットワークログオンでは、資格情報のアクセストークンによって定義されているネットワークコンピューター上のリソースに加えて、ローカルコンピューター上の Windows リソースにアクセスするためのアクセス許可がユーザーに付与されます。 ローカルログオンとネットワークログオンの両方で、ユーザーがローカルコンピューターのセキュリティアカウントマネージャー (SAM) にユーザーアカウントを持っている必要があります。 ローカルユーザーアカウントとグループメンバーシップ情報は、ローカルリソースへのアクセスを管理するために使用され、ユーザーのアクセストークンによって、ネットワーク接続されたコンピューター上でアクセスできるリソースを定義します。

    ローカルログオンとネットワークログオンでは、ドメインリソースにアクセスして使用するためのアクセス許可をユーザーとコンピューターに付与するのに十分ではありません。

-   ターミナルサービスまたはリモートデスクトップサービス (RDS) を使用してリモートで実行します。この場合、ログオンはリモート対話型としてさらに限定されます。

対話型ログオンの後、Windows はユーザーに代わってアプリケーションを実行し、ユーザーはこれらのアプリケーションと対話できます。

ローカルログオンでは、ローカルコンピューター上のリソースまたはネットワークに接続されたコンピューター上のリソースにアクセスするためのアクセス許可がユーザーに付与されます。 コンピューターがドメインに参加している場合、Winlogon 機能はそのドメインにログオンしようとします。

ドメインログオンでは、ローカルおよびドメインのリソースにアクセスするためのアクセス許可がユーザーに付与されます。 ドメインにログオンするには、ユーザーが Active Directory にユーザーアカウントを持っている必要があります。 コンピューターは、Active Directory ドメインにアカウントを持ち、ネットワークに物理的に接続されている必要があります。 また、ユーザーは、ローカルコンピューターまたはドメインにログオンするためのユーザー権限を持っている必要があります。 ドメインユーザーアカウント情報とグループメンバーシップ情報は、ドメインおよびローカルリソースへのアクセスを管理するために使用されます。

### <a name="remote-logon"></a><a name="BKMK_RemoteLogon"></a>リモートログオン
Windows では、リモートログオンによる別のコンピューターへのアクセスは、リモートデスクトッププロトコル (RDP) に依存します。 リモート接続を試行する前に、ユーザーがクライアントコンピューターに正常にログオンしている必要があるため、対話型ログオンプロセスは正常に完了しています。

RDP は、ユーザーがリモートデスクトップクライアントを使用して入力する資格情報を管理します。 これらの資格情報は対象のコンピュータを対象とし、ユーザーはそのターゲットコンピュータのアカウントを持っている必要があります。 また、ターゲットコンピューターは、リモート接続を受け入れるように構成されている必要があります。 対象のコンピューターの資格情報が送信され、認証プロセスの実行が試行されます。 認証が成功した場合、ユーザーは、指定された資格情報を使用してアクセスできるローカルおよびネットワークリソースに接続されます。

## <a name="network-logon"></a><a name="BKMK_NetworkLogon"></a>ネットワークログオン
ネットワークログオンは、ユーザー、サービス、またはコンピューターの認証が行われた後にのみ使用できます。 ネットワークログオン中、このプロセスでは、データを収集するための資格情報の入力ダイアログボックスは使用されません。 代わりに、以前に確立された資格情報または資格情報を収集する別の方法が使用されます。 このプロセスでは、ユーザーがアクセスしようとしているネットワークサービスに対してユーザーの id を確認します。 このプロセスは、別の資格情報を指定する必要がない限り、通常はユーザーに表示されません。

この種の認証を提供するために、セキュリティシステムには次の認証メカニズムが含まれています。

-   Kerberos version 5 プロトコル

-   公開キー証明書

-   Secure Sockets Layer/トランスポート層セキュリティ (SSL/TLS)

-   ダイジェスト

-   NTLM (Microsoft Windows NT 4.0 ベースのシステムとの互換性のため)

要素とプロセスの詳細については、上の対話型ログオン図を参照してください。

## <a name="smart-card-logon"></a><a name="BKMK_SmartCardLogon"></a>スマート カード ログオン
スマートカードは、ローカルアカウントではなく、ドメインアカウントにのみログオンするために使用できます。 スマートカード認証では、Kerberos 認証プロトコルを使用する必要があります。 Windows 2000 Server で導入された Windows ベースのオペレーティングシステムでは、Kerberos プロトコルの初期認証要求に対する公開キーの拡張機能が実装されています。 共有秘密キーの暗号化とは異なり、公開キーの暗号化は非対称です。つまり、暗号化するキーと復号化するキーの2つの異なるキーが必要です。 また、両方の操作を実行するために必要なキーによって、秘密キーと公開キーのペアが構成されます。

一般的なログオンセッションを開始するには、ユーザーがユーザーおよび基になる Kerberos プロトコルインフラストラクチャにのみ知られている情報を提供することによって、ユーザーの身元を証明する必要があります。 シークレット情報は、ユーザーのパスワードから派生した暗号化共有キーです。 共有シークレットキーは対称であり、同じキーが暗号化と復号化の両方に使用されることを意味します。

次の図は、スマートカードログオンに必要な要素とプロセスを示しています。

![スマートカードログオンに必要な要素とプロセスを示す図](../media/windows-logon-scenarios/SmartCardCredArchitecture.gif)

**スマート カード資格情報プロバイダーのアーキテクチャ**

パスワードの代わりにスマートカードを使用すると、ユーザーのスマートカードに格納されている秘密キーと公開キーのペアが、ユーザーのパスワードから派生した共有シークレットキーに置き換えられます。 秘密キーは、スマートカードにのみ保存されます。 公開キーは、所有者が機密情報の交換を希望するすべてのユーザーが利用できるようにすることができます。

Windows でのスマートカードログオンプロセスの詳細については、「 [windows でのスマートカードのサインインのしくみ](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/ff404285(v=ws.10))」を参照してください。

## <a name="biometric-logon"></a><a name="BKMK_BioLogon"></a>生体認証ログオン
デバイスは、指紋などの成果物のデジタル特性をキャプチャして構築するために使用されます。 このデジタル表現は、同じ成果物のサンプルと比較され、2つが正常に比較されると、認証が発生する可能性があります。 このトピックの冒頭にある「**適用対象**」の一覧に指定されているオペレーティングシステムのいずれかを実行しているコンピューターで、この形式のログオンを受け入れるように構成できます。 ただし、生体認証ログオンがローカルログオン用に構成されている場合、ユーザーは Active Directory ドメインにアクセスするときにドメイン資格情報を提示する必要があります。

## <a name="additional-resources"></a>その他のリソース
ログオンプロセス中に送信された資格情報を Windows が管理する方法の詳細については、「 [Windows 認証での資格情報の管理](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dn169014(v=ws.10))」を参照してください。

[Windows のログオンと認証の技術概要](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dn169029(v=ws.10))