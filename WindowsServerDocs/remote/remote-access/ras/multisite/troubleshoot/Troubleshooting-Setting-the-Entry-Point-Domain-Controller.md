---
title: エントリ ポイント ドメイン コントローラー設定のトラブルシューティング
description: このトピックは、「Windows Server 2016 のマルチサイト展開に複数のリモートアクセスサーバーを展開する」の一部です。
manager: brianlic
ms.prod: windows-server
ms.technology: networking-ras
ms.topic: article
ms.assetid: b12dd0e8-1d80-4d4b-bb45-586f19d17ef0
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 8bec7bd14dba051a1151869f8dc6c4251c941208
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/08/2020
ms.locfileid: "80858275"
---
# <a name="troubleshooting-setting-the-entry-point-domain-controller"></a>エントリ ポイント ドメイン コントローラー設定のトラブルシューティング

>適用対象: Windows Server (半期チャネル)、Windows Server 2016

このトピックでは、`Set-DAEntryPointDC` コマンドに関連する問題のトラブルシューティング情報を示します。 表示されたエラーがエントリ ポイント ドメイン コントローラーの設定に関連していることを確認するには、Windows イベント ログにイベント ID 10065 があることを確認してください。  
  
## <a name="saving-server-gpo-settings"></a><a name="SaveGPOSettings"></a>サーバーの GPO 設定を保存しています  
**エラーを受信しました**。 リモートアクセス設定を GPO < GPO_name > に保存中にエラーが発生しました。  
  
このエラーのトラブルシューティングについては、「サーバーの GPO 設定の保存」を参照してください。  
  
## <a name="remote-access-is-not-configured"></a>リモート アクセスが構成されていない  
**エラーを受信しました**。 リモートアクセスが < server_name > で構成されていません。 マルチサイト展開に属するサーバーの名前を指定してください。  
  
または  
  
サーバー < server_name > のリモートアクセスが構成されていません。 DirectAccess が有効になっているコンピューターを指定してください。  
  
**原因**  
  
*ComputerName* パラメーターで指定されたコンピューターでリモート アクセスが構成されていません。  
  
`Set-DaEntryPointDC` コマンドレットは、構成されたマルチサイト展開の一部となっているサーバーでのみ使用できます。  
  
**ソリューション**  
  
コマンドを実行し、*ComputerName* パラメーターにマルチサイト展開の一部として既に構成されているサーバーの名前を指定します。  
  
## <a name="multisite-is-not-enabled"></a>マルチサイトが有効でない  
**エラーを受信しました**。 この操作を実行する前に、マルチサイト展開を有効にする必要があります。 有効にするには、`Enable-DAMultiSite` コマンドレットを使用してください。  
  
**原因**  
  
*ComputerName* パラメーターで指定されたサーバーでマルチサイトが有効になっていません。  
  
`Set-DaEntryPointDC` コマンドレットは、構成されたマルチサイト展開の一部となっているサーバーでのみ使用できます。  
  
**ソリューション**  
  
コマンドを実行し、*ComputerName* パラメーターにマルチサイト展開の一部として既に構成されているサーバーの名前を指定します。  
  
## <a name="entry-point-and-domain-controller-not-provided-in-cmdlet"></a>エントリ ポイントおよびドメイン コントローラーがコマンドレットで指定されていない  
`Set-DaEntryPointDC` コマンドレットを使用すると、特定のドメイン コントローラーが利用できなくなった場合などに、異なるエントリ ポイントに関連付けられているドメイン コントローラーを変更できます。 特定のエントリ ポイントを更新して別のドメイン コントローラーを使用したり、特定のドメイン コントローラーを使用するすべてのエントリ ポイントを更新して新しいドメイン コントローラーを使用したりすることができます。 1 つ目のケースでは、*EntryPointName* パラメーターを使用して更新するエントリ ポイントを指定する必要があります。 2 つ目のケースでは、*ExistingDC* パラメーターを使用して置き換えるドメイン コントローラーを指定する必要があります。 指定できるのは、これらのパラメーターのどちらか 1 つだけです。  
  
**エラーを受信しました**。 必須のパラメーターが指定されていません。 エントリ ポイントまたは既存のドメイン コントローラーの名前を指定してください。  
  
または  
  
コマンドレット `Set-DaEntryPointDC` に、必要なすべてのパラメーターが指定されていません。  
  
**原因**  
  
`Set-DaEntryPointDC` コマンドレットで、 *EntryPointName*パラメーターまたは*existingdc*パラメーターが指定されなかったか、両方のパラメーターが指定されました。  
  
**ソリューション**  
  
コマンドを実行し、*EntryPointName* パラメーターまたは *ExistingDC* パラメーターのどちらかを指定します。  
  
## <a name="could-not-locate-domain-controller"></a>ドメイン コントローラーを検出できない  
**エラーを受信しました**。 新しいドメインコントローラーが自動的に見つかりません。 後でやり直すか、ドメイン コントローラーの設定を確認してください。  
  
**原因**  
  
*ComputerName* パラメーターで指定されているコンピューターに RPC を介してアクセスできないか、ドメインに使用できる書き込み可能なドメイン コントローラーがありません。  
  
**ソリューション**  
  
リモート コンピューターに RPC を介してアクセスできること、およびドメインで使用できる書き込み可能なドメイン コントローラーがあることを確認します。 書き込み可能なドメイン コントローラーがドメインで使用できる場合、*NewDC* パラメーターを使用してその名前を明示的に指定することもできます。  
  
## <a name="could-not-connect-to-domain-controller"></a>ドメイン コントローラーに接続できない  
  
-   **問題1**  
  
    **エラーを受信しました**。 ドメインコントローラ < domain_controller > に到達できません。 ネットワーク接続とサーバーが使用可能かどうかを確認してください。  
  
    **原因**  
  
    ドメイン コントローラーに到達できません。 これは、管理者が *NewDC* パラメーターまたは *ExistingDC* パラメーターでドメイン コントローラーを指定した場合にのみ発生します。  
  
    **ソリューション**  
  
    ドメイン コントローラーの名前が正しく入力されていることを確認します。 短い名前を使用して名前を指定した場合は、FQDN を使用して再試行してください。  
  
-   **問題2**  
  
    **エラーを受信しました**。 ドメインコントローラ < domain_controller > に接続できません。  
  
    **原因**  
  
    ネットワークの問題がある可能性があり、*NewDC* パラメーターで指定されたドメイン コントローラー、または構成にあるその他の既存のドメイン コントローラーに到達できないことを意味しています。  
  
    **ソリューション**  
  
    ドメイン コントローラーの名前が正しく入力されていることを確認して、ドメイン コントローラーが存在し、実行されていて、書き込み可能であること、およびドメイン コントローラーとドメインの間に信頼関係があることを確認します。  
  
-   **問題3**  
  
    **エラーを受信しました**。 %2! s! のドメインコントローラー < domain_controller > に到達できません。  
  
    **原因**  
  
    マルチサイト展開で構成の一貫性を維持するためには、各 GPO が単一のドメイン コントローラーによって管理されるようにすることが重要です。 エントリポイントのサーバー GPO を管理するドメインコントローラーを使用できない場合、リモートアクセスの構成設定を読み取りまたは変更することはできません。  
  
    **ソリューション**  
  
    「2.4」で説明されている「サーバーの Gpo を管理するドメインコントローラーを変更するには」の手順に従い[ます。Gpo を構成する](assetId:///b1960686-a81e-4f48-83f1-cc4ea484df43#ConfigGPOs)。  
  
-   **問題4**  
  
    **エラーを受信しました**。 ドメイン < domain_name > のプライマリドメインコントローラに到達できません。  
  
    **原因**  
  
    マルチサイト展開で構成の一貫性を維持するためには、各 GPO が単一のドメイン コントローラーによって管理されるようにすることが重要です。 クライアント GPO は、プライマリ ドメイン コントローラーで管理されます。 プライマリ ドメイン コントローラーを利用できない場合、リモート アクセスの構成設定を読み取ったり変更したりすることはできません。  
  
    **ソリューション**  
  
    「2.4」で説明されている「PDC エミュレーターの役割を転送するには」の手順に従い[ます。Gpo を構成する](assetId:///b1960686-a81e-4f48-83f1-cc4ea484df43#ConfigGPOs)。  
  
## <a name="read-only-domain-controller"></a>読み取り専用ドメイン コントローラー  
**エラーを受信しました**。 ドメインコントローラ < domain_controller > は読み取り専用です。 読み取り専用ではないドメイン コントローラーを指定してください。  
  
**原因**  
  
*NewDC* パラメーターで指定されたドメイン コントローラーは読み取り専用です。  
  
**ソリューション**  
  
`Set-DAEntryPointDC` を使用するときは、*NewDC* パラメーターを使用して、特定のエントリ ポイントに関連付けられたドメイン コントローラーを更新するか、ドメイン コントローラーに関連付けられたすべてのエントリ ポイントを更新します。 このため、新しいドメイン コントローラーは書き込み可能である必要があります。 *NewDC* パラメーターで書き込み可能なドメイン コントローラーを指定し、再試行してください。  
  
## <a name="cannot-retrieve-gpo"></a>GPO を取得できない  
  
-   **問題1**  
  
    **エラーを受信しました**。 ドメインコントローラー < previous_domain_controller > の GPO < GPO_name > は、同じドメイン内にないため、ドメインコントローラー < replacement_domain_controller > から取得することはできません。  
  
    **原因**  
  
    リモート アクセス サーバーとドメイン コントローラーが同じドメインにないため、GPO を取得できません。  
  
    **ソリューション**  
  
    特定のエントリ ポイントを更新しようとした場合は、新しいドメイン コントローラーがエントリ ポイント サーバーと同じドメインにあることを確認します。 特定のドメイン コントローラーを更新しようとした場合は、新しいドメイン コントローラーが置き換えるドメイン コントローラーと同じドメインにあることを確認します。  
  
-   **問題2**  
  
    **エラーを受信しました**。 ドメインコントローラー < previous_domain_controller > の GPO < GPO_name > は、ドメインコントローラー < replacement_domain_controller > から取得できません。 ドメインのレプリケーションが完了するまで待ってからやり直してください。  
  
    **原因**  
  
    エントリ ポイント ドメイン コントローラーを更新するとき、コマンドレットは新しいドメイン コントローラーからサーバーの GPO を読み取ろうとします。しかし、GPO はまだレプリケートされていないため、新しいドメイン コントローラーで見つかりません。  
  
    **ソリューション**  
  
    サーバーの GPO が新しいドメイン コントローラーに存在しません。 新しいドメイン コントローラーに GPO が正常にレプリケートされたことを確認し、再試行してください。  
  
-   **問題3**  
  
    **エラーを受信しました**。 GPO < GPO_name > にアクセスするためのアクセス許可がありません。  
  
    **原因**  
  
    エントリ ポイント ドメイン コントローラーを更新するとき、コマンドレットは新しいドメイン コントローラーからサーバーの GPO を読み取ろうとします。しかし、適切なアクセス許可がないため、新しいドメイン コントローラーで GPO を読み取ることができません。  
  
    **ソリューション**  
  
    GPO はドメイン コントローラーに存在しますが、読み取ることができません。 必要なアクセス許可があることを確認し、再試行してください。  
  
## <a name="entry-point-not-part-of-multisite-deployment"></a>エントリ ポイントがマルチサイト展開に含まれていない  
**エラーを受信しました**。 エントリポイント < entry_point_name > は、マルチサイト展開の一部ではありません。 別の値を指定してください。  
  
**原因**  
  
指定したエントリ ポイント名が見つかりませんでした。  
  
**ソリューション**  
  
エントリ ポイント名が正しく入力されていること、および GPO が必要なドメイン コントローラーにレプリケートされていることを確認し、再試行してください。 各エントリ ポイントで割り当てられているドメイン コントローラーを表示するには、`Get-DAEntryPointDC` を使用します。  
  
## <a name="remote-access-server-settings"></a>リモート アクセス サーバーの設定  
  
-   **問題1**  
  
    **エラーを受信しました**。 エントリポイント < entry_point_name のサーバー < server_name > にはアクセスできません。  
  
    **原因**  
  
    エントリ ポイント ドメイン コントローラーを更新するとき、コマンドレットは関連するすべてのリモート アクセス サーバーからエントリ ポイント ドメイン コントローラーの読み取りおよび書き込みを試行します。 コマンドレットは 1 つ以上のリモート アクセス サーバーからデータを読み取ることができませんでした。  
  
    **ソリューション**  
  
    関連するすべてのリモート アクセス サーバーが実行されていること、およびそれらすべてに対してローカル管理者のアクセス許可があることを確認し、再試行してください。  
  
-   **問題2**  
  
    **エラーを受信しました**。 設定をサーバー < のレジストリに保存することはできません server_name > エントリポイント < entry_point_name >。  
  
    **原因**  
  
    エントリ ポイント ドメイン コントローラーを更新するとき、コマンドレットは関連するすべてのリモート アクセス サーバーからエントリ ポイント ドメイン コントローラーの読み取りおよび書き込みを試行します。 コマンドレットは 1 つ以上のリモート アクセス サーバーにデータを書き込むことができませんでした。  
  
    **ソリューション**  
  
    関連するすべてのリモート アクセス サーバーが実行されていること、およびそれらすべてに対してローカル管理者のアクセス許可があることを確認し、再試行してください。  
  
-   **問題3**  
  
    **エラーを受信しました**。 GPO の更新を < server_name > に適用することはできません。 次のポリシーの更新まで、変更は有効になりません。  
  
    **原因**  
  
    コマンドレット `Set-DAEntryPointDC` を使用するときに指定された *ComputerName* パラメーターが、マルチサイト展開に最後に追加されたエントリ ポイント以外のエントリ ポイントのリモート アクセス サーバーになっています。  
  
    **ソリューション**  
  
    更新されなかったサーバーは、リモート アクセス管理コンソールの**ダッシュボード**にある **[構成の状態]** を使用して確認できます。 これによって機能上の問題が発生することはありませんが、更新されなかったサーバーで `gpupdate /force` を実行すると、構成の状態をすぐに更新することができます。  
  
## <a name="problem-resolving-fqdn"></a>FQDN の解決の問題  
**エラーを受信しました**。 エントリポイント < entry_point_name のサーバー < server_name > にはアクセスできません。  
  
**原因**  
  
変更する DirectAccess サーバーの一覧を取得するときに、コマンドレットがサーバーの 1 つの完全修飾ドメイン名 (FQDN) をコンピューター SID から解決できませんでした。  
  
**ソリューション**  
  
エラー メッセージで指定されたエントリ ポイントは、ドメイン コントローラーに関連付けられています。 エントリ ポイントがこのドメイン コントローラーを利用できることを確認します。 指定された SID が属するコンピューターをドメインから削除した場合は、このメッセージを無視し、マルチサイト展開からそのサーバーを削除します。  
  
## <a name="no-entry-points-to-update"></a>更新するエントリ ポイントがない  
**警告を受信しました**。 ドメインコントローラーの設定は変更されませんでした。 変更が必要な場合は、コマンドレット パラメーターが正しく構成されており、GPO が必要なドメイン コントローラーにレプリケートされていることを確認してください。  
  
**原因**  
  
`Set-DaEntryPointDC`ExistingDC*パラメーターを使用して* コマンドレットを呼び出すとき、DirectAccess はすべてのエントリ ポイントを調べ、指定されたドメイン コントローラーに関連付けられているエントリ ポイントを更新します。 しかし、指定された *ExistingDC* を使用するエントリ ポイントがありません。  
  
**ソリューション**  
  
エントリ ポイントとそれに関連付けられているドメイン コントローラーの一覧を確認するには、`Get-DAEntryPointDC` コマンドレットを使用します。 変更されている必要がある場合は、コマンドレット パラメーターが正しく入力されていること、および GPO が必要なドメイン コントローラーにレプリケートされていることを確認し、再試行してください。  
  


