---
title: Add DirectAccess to an Existing Remote Access (VPN) Deployment
description: このトピックは、「Windows Server 2016 の既存のリモートアクセス (VPN) 展開に DirectAccess を追加する」の一部です。
manager: brianlic
ms.topic: article
ms.assetid: b5db01f7-1ae0-46f2-9be7-8d9e121446b2
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 865c8a1999a38e6b8393a981b5db523e39fb42f5
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87955259"
---
# <a name="add-directaccess-to-an-existing-remote-access-vpn-deployment"></a>Add DirectAccess to an Existing Remote Access (VPN) Deployment

>適用先:Windows Server (半期チャネル)、Windows Server 2016

## <a name="scenario-description"></a><a name="BKMK_OVER"></a>シナリオの説明
このシナリオでは、VPN を既にインストールして構成した後に、windows Server 2016、Windows Server 2012 R2、または Windows Server 2012 を実行する1台のコンピューターが、推奨設定を使用して DirectAccess サーバーとして構成されます。 負荷分散クラスター、マルチサイト展開、または2要素クライアント認証などのエンタープライズ機能を使用して DirectAccess を構成する場合は、このトピックで説明するシナリオを実行して単一のサーバーを設定し、「[企業でのリモートアクセスの展開](../../ras/Deploy-Remote-Access-in-an-Enterprise.md)」で説明されているように、エンタープライズシナリオを設定します。

## <a name="in-this-scenario"></a>このシナリオの内容
単一のリモート アクセス サーバーを設定するには、いくつかの計画と展開の手順が必要です。

### <a name="planning-steps"></a>計画の手順
計画は 2 つのフェーズに分かれています。

1.  **リモート アクセス インフラストラクチャを計画する**

    このフェーズでは、リモート アクセスの展開を開始する前に、ネットワーク インフラストラクチャを設定するために必要な計画を記述します。 これには、ネットワークおよびサーバー トポロジ、証明書、ドメイン ネーム システム (DNS)、Active Directory およびグループ ポリシー オブジェクト (GPO) 構成、および DirectAccess ネットワーク ロケーション サーバーの計画が含まれます。

2.  **リモート アクセスの展開を計画する**

    このフェーズでは、リモート アクセスの展開を準備するために必要な計画手順を記述します。 これには、リモート アクセス クライアント コンピューター、サーバーおよびクライアント認証要件、およびインフラストラクチャ サーバーの計画が含まれます。

### <a name="deployment-steps"></a>デプロイメントの手順
展開は 3 つのフェーズに分かれています。

1.  **リモート アクセス インフラストラクチャを構成する**

    このフェーズでは、ネットワークとルーティング、ファイアウォール設定 (必要な場合)、証明書、DNS サーバー、Active Directory および GPO 設定、および DirectAccess ネットワーク ロケーション サーバーを構成します。

2.  **リモート アクセス サーバー設定を構成する**

    このフェーズでは、リモート アクセス クライアント コンピューター、リモート アクセス サーバー、およびインフラストラクチャ サーバーを構成します。

3.  **デプロイを検証する**

    このフェーズでは、展開が想定どおりに機能していることを確認します。

## <a name="practical-applications"></a><a name="BKMK_APP"></a>実際の適用例
単一のリモート アクセス サーバーを展開すると、次のことが実現されます。

-   **簡単なアクセス**

    Windows 8 および Windows 7 を実行している管理されたクライアントコンピューターを DirectAccess クライアントコンピューターとして構成できます。 それらのクライアントは、インターネット上に存在しているときはいつでも、VPN 接続にサインインしなくても、DirectAccess を経由して内部ネットワーク リソースにアクセスできます。 これらのオペレーティング システムが実行されていないクライアント コンピューターは、VPN 経由で内部ネットワークに接続できます。 DirectAccess と VPN は、同じコンソールで、同じウィザード セットを使って管理されます。

-   **管理の容易さ**

    リモート アクセス管理者は、クライアント コンピューターが企業内部ネットワーク上に存在しない場合でも、インターネットにアクセスできる DirectAccess クライアント コンピューターを DirectAccess を使用してリモート管理できます。 企業の要件を満たしていないクライアント コンピューターを管理サーバーによって自動的に修正できます。

## <a name="roles-and-features-required-for-this-scenario"></a><a name="BKMK_NEW"></a>このシナリオに必要な役割と機能
次の表に、このシナリオに必要な役割と機能を示します。

|役割/機能|このシナリオのサポート方法|
|---------|-----------------|
|リモート アクセスの役割|この役割をインストールまたはアンインストールするには、サーバー マネージャー コンソールまたは Windows PowerShell を使用します。 この役割には、以前は Windows Server 2008 R2 の機能であった DirectAccess と、以前はネットワーク ポリシーとアクセス サービス (NPAS) サーバーの役割の役割サービスであったリモート アクセス サービスが含まれています。 リモート アクセスの役割は、次の 2 つのコンポーネントで構成されています。<p>1. DirectAccess およびルーティングとリモートアクセスサービス (RRAS) VPN: リモートアクセス管理コンソールで管理されます。<br />2. RRAS ルーティング: ルーティングとリモートアクセスコンソールで管理されます。<p>リモート アクセス サーバーの役割は、次のサーバーの機能に依存しています。<p>-インターネットインフォメーションサービス (IIS) Web サーバー: リモートアクセスサーバーのネットワークロケーションサーバーと既定の web プローブを構成するために必要です。<br />-Windows Internal Database: リモートアクセスサーバーのローカルアカウンティングに使用されます。|
|リモート アクセス管理ツールの機能|この機能は、次のようにインストールされます。<p>-リモートアクセスの役割がインストールされている場合は、既定でリモートアクセスサーバーにインストールされます。 リモート管理コンソール ユーザー インターフェイスおよび Windows PowerShell コマンドレットをサポートします。<br />-必要に応じて、リモートアクセスサーバーの役割を実行していないサーバーにインストールします。 この場合、これは DirectAccess および VPN を実行するリモート アクセス コンピューターのリモート管理に使用されます。<p>リモート アクセス管理ツールの機能は、次の要素で構成されています。<p>-リモートアクセス GUI<br />-Windows PowerShell 用リモートアクセスモジュール<p>次の要素と依存関係があります。<p>-グループポリシー管理コンソール<br />-RAS 接続マネージャー管理キット (CMAK)<br />-Windows PowerShell 3.0<br />-グラフィカル管理ツールとインフラストラクチャ|

## <a name="hardware-requirements"></a><a name="BKMK_HARD"></a>ハードウェア要件
このシナリオのハードウェア要件は次のとおりです。

**サーバーの要件**

-   Windows Server 2012 のハードウェア要件を満たしているコンピューター。

-   サーバーには、少なくとも 1 つのネットワーク アダプターがインストールされ、有効にされて内部ネットワークに参加している必要があります。 アダプターを 2 つ使用する場合は、一方を企業内部ネットワークに接続し、もう一方を外部ネットワーク (インターネット) に接続します。

-   IPv4 から IPv6 への移行プロトコルとして Teredo が必要な場合、サーバーの外部アダプターには連続する 2 つのパブリック IPv4 アドレスが必要です。 連続する 2 つの IP アドレスが存在する場合でも、DirectAccess の有効化ウィザードでは Teredo が有効になりません。 利用できる IP アドレスが 1 つの場合、移行プロトコルとして使用できるのは IP-HTTPS だけです。

-   少なくとも 1 つのドメイン コントローラー。 リモート アクセス サーバーと DirectAccess クライアントはドメインのメンバーである必要があります。

-   DirectAccess の有効化ウィザードでは、IP-HTTPS およびネットワーク ロケーション サーバー用の証明書が必要です。 SSTP VPN で既に証明書を使用している場合、それが IP-HTTPS に再利用されます。 SSTP VPN が構成されていない場合は、IP-HTTPS 用の証明書を構成するか、自動的に作成される自己署名証明書を使用できます。 ネットワーク ロケーション サーバー用には、証明書を構成するか、自動的に作成される自己署名証明書を使用できます。

**クライアントの要件**

-   クライアントコンピューターは、Windows 8 または Windows 7 を実行している必要があります。

    > [!NOTE]
    > DirectAccess クライアントとして使用できるオペレーティングシステムは、Windows Server 2012、Windows Server 2008 R2、Windows 8 Enterprise、Windows 7 Enterprise、および Windows 7 Ultimate だけです。

**インフラストラクチャと管理サーバーの要件**

-   DirectAccess クライアント コンピューターのリモート管理時に、クライアントは、Windows およびウイルス対策の更新、クライアントのネットワーク アクセス保護 (NAP) 準拠などのサービスのために管理サーバー (ドメイン コントローラー、System Center Configuration サーバー、正常性登録機関 (HRA) サーバーなど) と通信を開始します。 リモート アクセスの展開を開始する前に、必要なサーバーを展開する必要があります。

-   リモート アクセスでクライアントが NAP に準拠している必要がある場合は、リモート アクセスの展開を開始する前に、ネットワーク ポリシー サーバー (NPS) および HRS を展開する必要があります。

-   Windows Server 2012、Windows Server 2008 R2、または Windows Server 2008 SP2 を実行している DNS サーバーが必要です。

## <a name="software-requirements"></a><a name="BKMK_SOFT"></a>ソフトウェア要件
このシナリオのソフトウェア要件は次のとおりです。

**サーバーの要件**

-   リモート アクセス サーバーはドメイン メンバーである必要があります。 サーバーは、内部ネットワークのエッジに展開することも、エッジ ファイアウォールまたは他のデバイスの内側に配置することもできます。

-   リモート アクセス サーバーがエッジ ファイアウォールまたはネットワーク アドレス変換 (NAT) デバイスの内側に配置されている場合は、リモート アクセス サーバーとの間で送受信されるトラフィックを許可するようにデバイスを構成する必要があります。

-   サーバーにリモート アクセスを展開する担当者には、サーバーに対するローカル管理者のアクセス許可およびドメイン ユーザーのアクセス許可が必要です。 また、管理者には DirectAccess 展開で使用される GPO に対するアクセス許可も必要です。 DirectAccess 展開をモバイル コンピューターのみに制限する機能を利用するには、ドメイン コントローラーで WMI フィルターを作成するアクセス許可が必要です。

**リモートアクセスクライアントの要件**

-   DirectAccess クライアントは、ドメイン メンバーである必要があります。 クライアントが含まれているドメインは、リモート アクセス サーバーと同じフォレストに属することや、リモート アクセス サーバーのフォレストまたはドメインと双方向の信頼を確立することができます。

-   DirectAccess クライアントとして構成するコンピューターが属する Active Directory セキュリティ グループが必要です。 DirectAccess クライアントの設定の構成時にセキュリティ グループを指定しなかった場合、既定では、Domain Computers セキュリティ グループのすべてのノート PC (DirectAccess 対応) にクライアントの GPO が適用されます。 DirectAccess クライアントとして使用できるオペレーティングシステムは、Windows Server 2012、Windows Server 2008 R2、Windows 8 Enterprise、Windows 7 Enterprise、および Windows 7 Ultimate だけです。

    > [!NOTE]
    > DirectAccess クライアントとして構成されるコンピューターを含むドメインごとにセキュリティ グループを作成することをお勧めします。




