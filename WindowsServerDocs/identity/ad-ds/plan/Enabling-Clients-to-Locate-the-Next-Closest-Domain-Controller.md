---
ms.assetid: 7dd905ea-4235-4519-8400-31b4fa0ed1bf
title: クライアントが次の最も近いドメイン コントローラーを検索できるようにする
description: ''
ms.author: joflore
author: MicrosoftGuyJFlo
manager: mtillman
ms.date: 08/08/2018
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adds
ms.openlocfilehash: ed7663242ae254ecea945a749ee3ce5fac8f96f6
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71408831"
---
# <a name="enabling-clients-to-locate-the-next-closest-domain-controller"></a>クライアントが次の最も近いドメイン コントローラーを検索できるようにする

>適用先:Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

Windows Server 2008 以降を実行しているドメインコントローラーがある場合、Windows Vista 以降または Windows Server 2008 以降を実行しているクライアントコンピューターで、 **[次の最も近いサイトを試す] を有効にすることにより、ドメインコントローラーをより効率的に見つけることができるようになります。** グループポリシー設定です。 この設定では、ネットワークトラフィックの合理化を支援することで、ドメインコントローラーロケーター (DC ロケーター) が改善されます。特に、多数のブランチオフィスやサイトを持つ大企業でも役立ちます。

この新しい設定は、ドメインコントローラーが配置されている順序に影響を与えるため、サイトリンクのコストの構成方法に影響を与える可能性があります。 多数のハブサイトとブランチオフィスがある企業では、最も近いハブサイトにドメインコントローラーが見つからない場合に、クライアントが次に最も近いハブサイトにフェールオーバーするようにすることで、ネットワーク上の Active Directory トラフィックを大幅に削減できます。

一般的なベストプラクティスとして、 **[次に最も近いサイトを試す]** 設定を有効にした場合、サイトトポロジとサイトリンクのコストをできるだけ単純にする必要があります。 多くのハブサイトがある企業では、これにより、あるサイトのクライアントが別のサイトのドメインコントローラーにフェールオーバーする必要がある状況に対処するための計画を簡素化できます。

既定では、 **[次に最も近いサイトを試す]** 設定は有効になっていません。 この設定が有効になっていない場合、DC ロケーターは次のアルゴリズムを使用してドメインコントローラーを検索します。

- 同じサイトでドメインコントローラーを検索してみてください。
- 同じサイト内に使用できるドメインコントローラがない場合は、ドメイン内のドメインコントローラを検索します。

> [!NOTE]
> これは、以前のバージョンの Active Directory で使用されていた DC ロケーターと同じアルゴリズムです。 詳細については、「 [Active Directory の DNS サポートのしくみ](https://go.microsoft.com/fwlink/?LinkId=108587)」を参照してください。

**[次に最も近いサイトを試す**] 設定を有効にすると、DC ロケーターは次のアルゴリズムを使用してドメインコントローラーを検索します。

- 同じサイトでドメインコントローラーを検索してみてください。
- 同じサイト内に使用できるドメインコントローラがない場合は、次に最も近いサイトでドメインコントローラを検索してみてください。 サイトリンクコストが高い別のサイトよりもサイトリンクコストが低い場合、サイトの方が近くにあります。
- 次に最も近いサイトでドメインコントローラーが使用できない場合は、ドメイン内のドメインコントローラーを検索してみてください。

**[次に最も近いサイトを試す**] 設定は、サイトの自動カバレッジと連携して機能します。 たとえば、次に最も近いサイトにドメインコントローラーがない場合、DC ロケーターはそのサイトのサイトの自動カバレッジを実行するドメインコントローラーの検索を試みます。

既定では、DC ロケーターは、次に最も近いサイトを決定するときに、読み取り専用ドメインコントローラー (RODC) を含むサイトを考慮しません。 さらに、クライアントが Windows Server 2008 より前のバージョンを実行しているドメインコントローラーから応答を取得した場合、DC ロケーターの動作は、[設定] が有効になっていない場合と同じになります。

たとえば、サイトトポロジには、次の図に示すサイトリンクの値を持つ4つのサイトがあるとします。 この例では、すべてのドメインコントローラーが、Windows Server 2008 以降を実行している書き込み可能なドメインコントローラーです。

![クライアントによる dc の検出を有効にする](media/Enabling-Clients-to-Locate-the-Next-Closest-Domain-Controller/beff4087-fb2a-463b-96ac-d440a9e29b75.gif)

この例で **[次に最も近いサイト**グループポリシーを試す] 設定が有効になっている場合、Site_B 内のクライアントコンピュータがドメインコントローラを検出しようとすると、まず専用の Site_B にあるドメインコントローラを見つけようとします。 Site_B で使用できないものがある場合は、Site_A でドメインコントローラーを見つけようとします。

この設定が有効になっていない場合、クライアントは、Site_A、Site_C、または Site_D でドメインコントローラーの検索を試みます。ドメインコントローラーが Site_B で使用できない場合は、します。

> [!NOTE]
> **[次に最も近いサイトを試す**] 設定は、サイトの自動カバレッジと連携して機能します。 たとえば、次に最も近いサイトにドメインコントローラーがない場合、DC ロケーターはそのサイトのサイトの自動カバレッジを実行するドメインコントローラーの検索を試みます。

**[次に最も近いサイトを試す**] 設定を適用するには、グループポリシーオブジェクト (GPO) を作成し、組織の適切なオブジェクトにリンクします。または、Windows Vista 以降を実行しているすべてのクライアントに影響を与えるように既定のドメインポリシーを変更することもできます。Windows Server 2008 以降のドメイン。 **[次に最も近いサイトを試す]** 設定を設定する方法の詳細については、[次の最も近いサイトでクライアントがドメインコントローラーを検索できるように](https://technet.microsoft.com/library/cc772592.aspx)する方法に関するページを参照してください。
