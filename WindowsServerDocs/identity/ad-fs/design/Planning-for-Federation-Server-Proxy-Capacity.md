---
ms.assetid: 3ecb6e87-17f1-4d38-97d2-9c4d52b7cf39
title: フェデレーション サーバー プロキシの容量計画
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: ec5b6e39e57539ef3de1c7bd5fed9cc8ed2e64be
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/08/2020
ms.locfileid: "80858765"
---
# <a name="planning-for-federation-server-proxy-capacity"></a>フェデレーション サーバー プロキシの容量計画

フェデレーションサーバープロキシの容量計画では、次のことを見積もることができます。  
  
-   各フェデレーションサーバープロキシの適切なハードウェア要件。  
  
-   各組織に配置するフェデレーションサーバーとフェデレーションサーバープロキシの数。  
  
フェデレーションサーバープロキシは、企業ネットワーク内の保護されたフェデレーションサーバーからフェデレーションユーザーにセキュリティトークンをリダイレクトします。 フェデレーションサーバープロキシを展開する目的は、外部ユーザーがフェデレーションサーバーに接続できるようにすることです。 実際には、トークンに署名したり、AD FS 構成データベースのデータに書き込んだりすることはありません。 そのため、フェデレーションサーバープロキシのハードウェア要件は、通常、フェデレーションサーバーのハードウェア要件を下回っています。  
  
フェデレーションサーバープロキシに対する要求はすべて、フェデレーションサーバーまたはフェデレーションサーバーファームに要求されるため、フェデレーションサーバーとフェデレーションサーバープロキシのキャパシティプランニングは並列で実行する必要があります。  
  
フェデレーションサーバープロキシの1秒あたりのピーク時のサインイン\-を推定するには、フェデレーションサーバープロキシ経由でサインインするフェデレーションユーザーの使用パターンを理解している必要があります。 多くの展開では、フェデレーションサーバープロキシを使用してサインインするフェデレーションユーザーは、インターネット上に配置されます。 AD FS によって保護される既存の Web アプリケーションで、これらのフェデレーションユーザーの使用パターンを確認すると、1秒あたりのピーク時のサインイン\-を推定できます。  
  
> [!NOTE]  
> 運用環境の展開では、展開する各フェデレーションサーバーファームインスタンスに対して、少なくとも2つのフェデレーションサーバープロキシを使用することをお勧めします。  
  
## <a name="estimate-the-number-of-federation-server-proxies-required-for-your-organization"></a>組織に必要なフェデレーションサーバープロキシの数を推定する  
必要な AD FS フェデレーションサーバープロキシコンピューターの数を推定するには、まず、組織に展開するフェデレーションサーバーの合計数を決定する必要があります。 この方法の詳細については、「[フェデレーションサーバーの容量の計画](Planning-for-Federation-Server-Capacity.md)」を参照してください。  
  
フェデレーションサーバーの数を決定したら、この数のサーバーに対して、企業ネットワーク\)の外部にある外部ユーザー \(から予想される受信フェデレーション認証要求の割合を掛けます。 この計算の値によって、外部ユーザーに対する受信認証要求を処理するフェデレーションサーバープロキシの推定数が示されます。  
  
たとえば、推奨されるフェデレーションサーバーの数が3で、外部ユーザーからの認証要求の合計数が、フェデレーション認証要求の合計数の約60% であると予想される場合、計算は 1.8 \(3 60\) に等しくなります。これは2に切り上げることができます。  この場合、3つのフェデレーションサーバーに対する外部ユーザー認証要求の負荷に対応するために、2つのフェデレーションサーバープロキシコンピューターを展開する必要があります。  
  
AD FS 製品チームによって実行されるテストでは、各フェデレーションサーバープロキシの全体的な CPU 使用率が、同じファームのフェデレーションサーバーで確認された CPU 使用率を大幅に下回っていることがわかりました。  1つのテストでは、1つのフェデレーションサーバー CPU が完全に飽和状態であることを示していましたが、同じファームに対してプロキシサービスを提供しているフェデレーションサーバープロキシの CPU は、20% の使用率でのみ観察されました。 したがって、このテストでは、フェデレーションサーバープロキシの CPU の負荷が、このセクションで前述した同様のハードウェア仕様を使用していると、約3台のフェデレーションサーバーの処理負荷を適切に処理できることが明らかになりました。  
  
ただし、フォールトトレランスのためには、展開する各フェデレーションサーバーファームに対して、少なくとも2つのフェデレーションサーバープロキシを使用することをお勧めします。  
  
## <a name="see-also"></a>参照
[Windows Server 2012 での AD FS 設計ガイド](AD-FS-Design-Guide-in-Windows-Server-2012.md)
