---
title: ソフトウェアの制限のポリシーのトラブルシューティング
description: Windows Server のセキュリティ
ms.topic: article
ms.assetid: 4fd53736-03e7-4bf9-ba90-d1212d93e19a
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: 6e4d31dd6e434c5a5b18491ea7f73b92c993e05a
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87953009"
---
# <a name="troubleshoot-software-restriction-policies"></a>ソフトウェアの制限のポリシーのトラブルシューティング

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

このトピックでは、Windows Server 2008 および Windows Vista 以降でソフトウェアの制限のポリシー (SRP) をトラブルシューティングするときの一般的な問題とその解決策について説明します。

## <a name="introduction"></a>はじめに
ソフトウェアの制限のポリシー (SRP) はグループ ポリシー ベースの機能で、ドメイン内のコンピューターで実行されているソフトウェア プログラムを識別し、これらのプログラムを実行する機能を制御します。 ソフトウェアの制限のポリシーを使えば、コンピューターの構成に厳格な制限を加え、指定したアプリケーションに限って実行を許可することができます。 これらは Microsoft Active Directory Domain Services およびグループポリシーと統合されていますが、スタンドアロンコンピューターで構成することもできます。 SRP の詳細については、「[ソフトウェアの制限のポリシー](software-restriction-policies.md)」を参照してください。

Windows Server 2008 R2 および Windows 7 以降では、アプリケーション制御戦略の一部として、または SRP と連携して Windows AppLocker を使用できます。

### <a name="windows-cannot-open-a-program"></a>Windows がプログラムを開くことができません
"ソフトウェアの制限のポリシーによって禁止されているため、Windows はこのプログラムを開くことができません。 詳細については、イベントビューアーを開くか、システム管理者に連絡してください。 " または、コマンドラインで、"指定されたプログラムを実行できません" というメッセージが表示されます。

**原因:** ソフトウェアプログラムが**許可**されていないものとして設定されるように、既定のセキュリティレベル (または規則) が作成されました。その結果、開始されません。

**解決策:** イベントログで、メッセージの詳細な説明を確認します。 イベントログメッセージには、**許可**されていないソフトウェアプログラムと、プログラムに適用される規則が示されます。

### <a name="modified-software-restriction-policies-are-not-taking-effect"></a>変更されたソフトウェアの制限のポリシーは有効になりません
**原因:** でドメインに指定されているソフトウェアの制限のポリシーは、ローカルに構成されているすべてのポリシー設定を上書きグループポリシーます。 これは、ポリシー設定を上書きしているドメインのポリシー設定があることを示している可能性があります。

**原因:** グループポリシー、そのポリシー設定が更新されていない可能性があります。 グループポリシーは、ポリシー設定に変更を定期的に適用します。そのため、ディレクトリで行われたポリシーの変更がまだ更新されていない可能性があります。

**'83'5c**

1.  ネットワークのソフトウェア制限ポリシーを変更するコンピューターは、ドメインコントローラーにアクセスできる必要があります。 コンピューターがドメインコントローラーに接続できることを確認します。

2.  ネットワークからログオフし、もう一度ネットワークにログオンして、ポリシーを更新してください。 グループポリシーによってポリシーが適用されている場合は、再度ログインすると、これらのポリシーが更新されます。

3.  ポリシー設定を更新するには、コマンドラインユーティリティの gpupdate を使用するか、ログオフしてからコンピューターに再度ログオンします。 最良の結果を得るには、gpupdate を実行し、からログオフしてから、コンピューターにログオンし直します。 一般に、セキュリティ設定は、ワークステーションまたはサーバーでは90分ごと、ドメインコントローラーでは5分ごとに更新されます。 変更の有無にかかわらず、設定は 16 時間ごとにも更新されます。 これらは構成可能な設定であるため、各ドメインで更新間隔が異なる場合があります。

4.  適用するポリシーを確認します。 上書き設定の**ない**ドメインレベルポリシーを確認してください。

5.  でドメインに指定されているソフトウェアの制限のポリシーは、ローカルに構成されているすべてのポリシーを上書きグループポリシーます。 Gpresult コマンドラインツールを使用して、ポリシーの実質的な効果を判断します。 これは、ローカル設定をオーバーライドしているドメインのポリシーがあることを示している可能性があります。

6.  SRP と AppLocker のポリシー設定が同じ GPO 内にある場合、AppLocker の設定は Windows 7、Windows Server 2008 R2 以降で優先されます。 SRP と AppLocker のポリシー設定は異なる Gpo に配置することをお勧めします。

### <a name="after-adding-a-rule-through-srp-you-cannot-log-on-to-your-computer"></a>SRP を使用してルールを追加した後、コンピューターにログオンすることはできません。
**原因:** コンピューターが起動すると、多くのプログラムやファイルにアクセスします。 これらのプログラムまたはファイルのいずれかが誤って使用不可に設定**されて**いる可能性があります。 コンピューターはプログラムまたはファイルにアクセスできないため、正常に起動できません。

**解決策:** コンピューターをセーフモードで起動し、ローカル管理者としてログオンします。次に、ソフトウェアの制限のポリシーを変更して、プログラムまたはファイルを実行できるようにします。

### <a name="a-new-policy-setting-is-not-applying-to-a-specific-file-name-extension"></a>新しいポリシー設定が特定のファイル名拡張子に適用されていません
**原因:** ファイル名の拡張子が、サポートされているファイルの種類の一覧にありません。

**解決策:** SRP でサポートされているファイルの種類の一覧にファイル名拡張子を追加します。

ソフトウェアの制限のポリシーは、不明なコードや信頼されていないコードを調整する問題に対処します。 ソフトウェアの制限のポリシーは、ソフトウェアを識別し、ローカルコンピューター、サイト、ドメイン、または OU で実行する機能を制御するためのセキュリティ設定であり、GPO を使用して実装できます。

### <a name="a-default-rule-is-not-restricting-as-expected"></a>既定のルールは想定どおりに制限されていません
**原因:** 特定の順序で適用される規則により、既定の規則が特定の規則によって上書きされる可能性があります。 SRP では、次の順序で規則が適用されます (最も限定的なもの)。

1.  ハッシュの規則

2.  証明書の規則

3.  パスの規則

4.  インターネットゾーンの規則

5.  既定のルール

**解決策:** アプリケーションを制限する規則を評価し、必要に応じて、既定の規則以外のすべてを削除します。

### <a name="unable-to-discover-which-restrictions-are-applied"></a>適用されている制限を検出できません
**原因:** 予期しない動作の原因は明らかではなく、GPO の更新によって問題が解決されていないため、さらに調査する必要があります。

**'83'5c**

1.  システムイベントログを調査して、"ソフトウェア制限ポリシー" のソースをフィルター処理します。 エントリには、アプリケーションごとに実装される規則が明示的に指定されます。

2.  詳細ログを有効にします。 詳細については[、「ソフトウェアの制限のポリシーの許可/拒否リストおよびアプリケーションインベントリを決定する](software-restriction-policies.md)」を参照してください。


