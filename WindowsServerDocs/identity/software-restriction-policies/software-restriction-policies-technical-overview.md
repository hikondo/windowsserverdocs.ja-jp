---
title: ソフトウェアの制限のポリシーの技術概要
description: Windows Server のセキュリティ
ms.topic: article
ms.assetid: dc7013b0-0efd-40fd-bd6d-75128adbd0b8
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/12/2016
ms.openlocfilehash: 49d0f32d1634a37f5ddda71f8147017e9863b1e6
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/10/2020
ms.locfileid: "89640241"
---
# <a name="software-restriction-policies-technical-overview"></a>ソフトウェアの制限のポリシーの技術概要

>適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

このトピックでは、ソフトウェアの制限のポリシーについて説明します。この機能を使用するタイミングと方法、過去のリリースで実装された変更点、および Windows Server 2008 および Windows Vista 以降でソフトウェアの制限のポリシーを作成および展開する際に役立つその他のリソースへのリンクを示します。

## <a name="introduction"></a>はじめに
ソフトウェアの制限のポリシーを使用すると、管理者は、ソフトウェアを特定し、ローカルコンピューターで実行する機能を制御するためのグループポリシー主導のメカニズムを利用できます。 これらのポリシーを使用すると、Microsoft Windows オペレーティングシステム (Windows Server 2003 および Windows XP Professional 以降) を実行しているコンピューターを既知の競合から保護し、悪意のあるウイルスやトロイの木馬プログラムなどのセキュリティ上の脅威からコンピューターを保護することができます。 ソフトウェアの制限のポリシーを使えば、コンピューターの構成に厳格な制限を加え、指定したアプリケーションに限って実行を許可することもできます。 ソフトウェアの制限のポリシーは、Microsoft Active Directory とグループ ポリシーに統合されています。 スタンドアロン コンピューター上でソフトウェアの制限のポリシーを作成することも可能です。

ソフトウェアの制限のポリシーは信頼ポリシーであり、スクリプトなどの必ずしも信頼できないコードの実行を制限するために管理者が設定する規則です。 ローカルグループポリシーエディターに対するソフトウェアの制限のポリシーの拡張機能は、アプリケーションの使用を制限するための設定をローカルコンピューターまたはドメイン全体で管理できる、単一のユーザーインターフェイスを提供します。

## <a name="procedures"></a>手順

-   [ソフトウェア制限ポリシーの管理](administer-software-restriction-policies.md)

    -   [ソフトウェアの制限のポリシーの許可/拒否リストとアプリケーションインベントリを決定する](determine-allow-deny-list-and-application-inventory-for-software-restriction-policies.md)

    -   [ソフトウェア制限ポリシーの規則の使用](work-with-software-restriction-policies-rules.md)

    -   [ソフトウェアの制限のポリシーを使用して、電子メールのウイルスからコンピューターを保護する](use-software-restriction-policies-to-help-protect-your-computer-against-an-email-virus.md)

-   [ソフトウェア制限ポリシーのトラブルシューティング](troubleshoot-software-restriction-policies.md)

## <a name="software-restriction-policy-usage-scenarios"></a>ソフトウェアの制限のポリシーの使用シナリオ
ビジネスユーザーは、電子メール、インスタントメッセージング、およびピアツーピアアプリケーションを使用して共同作業を行います。 これらのコラボレーションが増加するにつれて、特に、ビジネスコンピューティングでインターネットを使用しているので、悪意のあるコード (ワーム、ウイルス、悪意のあるユーザーや攻撃者の脅威など) からの脅威を防ぐことができます。

ユーザーは、ネイティブの Windows 実行可能ファイル (.exe ファイル) からドキュメント内のマクロ (.doc ファイルなど) に至るまで、さまざまな形式の悪意のあるコードをスクリプト (.vbs ファイルなど) に受け取ることがあります。 悪意のあるユーザーや攻撃者は、多くの場合、ユーザーがウイルスやワームを含むコードを実行できるようにソーシャルエンジニアリング方式を使用します。 (ソーシャルエンジニアリングとは、ユーザーが自分のパスワードまたは何らかの形式のセキュリティ情報を欺いすることを意味します)。このようなコードをアクティブ化すると、ネットワーク上でサービス拒否攻撃が発生したり、機密性の高いデータやプライベートデータをインターネットに送信したり、コンピューターのセキュリティが危険にさらされたり、ハードディスクドライブの内容が破損したりする可能性があります。

IT 組織とユーザーは、どのソフトウェアを実行するのが安全であり、そうでないかを判断できる必要があります。 悪意のあるコードによって実行される可能性のある多数の数値とフォームにより、これは困難な作業になります。

悪意のあるコードと、不明なソフトウェアまたはサポートされていないソフトウェアの両方からネットワークコンピューターを保護するために、組織はセキュリティ戦略全体の一部としてソフトウェアの制限のポリシーを実装できます。

管理者は次のタスクにソフトウェアの制限のポリシーを使用できます。

-   信頼できるコードの定義

-   スクリプト、実行可能ファイル、および ActiveX コントロールの制御用の柔軟なグループ ポリシーの設計

ソフトウェアの制限のポリシーは、ソフトウェアの制限のポリシーに準拠しているオペレーティング システムとアプリケーション (スクリプト アプリケーションなど) によって適用されます。

具体的には、管理者は次の用途にソフトウェアの制限のポリシーを使用できます。

-   クライアントコンピューターで実行できるソフトウェア (実行可能ファイル) を指定する

-   共有のコンピューター上でユーザーによって特定のプログラムが実行されるのを防ぐ

-   信頼された発行元をクライアントコンピューターに追加できるユーザーを指定する

-   ソフトウェアの制限のポリシーの範囲を設定する (ポリシーがすべてのユーザーに適用されるか、クライアントコンピュータのユーザーのサブセットに影響するかを指定する)

-   実行可能ファイルがローカル コンピューター、組織単位 (OU)、サイト、ドメインで実行されるのを防ぐ。 悪意のあるユーザーによって引き起こされる問題の予防にソフトウェアの制限のポリシーを使っていない場合には、これが適しています。

## <a name="differences-and-changes-in-functionality"></a><a name="BKMK_Diffs_Changes"></a>機能の相違点と変更点
Windows Server 2012 および Windows 8 では、SRP の機能に変更はありません。

**サポートされているバージョン**

ソフトウェアの制限のポリシーは、windows server 2012 を含む windows Server 2003 以降および windows 8 を含む Windows XP 以降を実行しているコンピューターでのみ構成および適用できます。

> [!NOTE]
> Windows Vista 以降の Windows クライアントオペレーティングシステムの一部のエディションには、ソフトウェアの制限のポリシーがありません。 グループポリシーによってドメイン内で管理されていないコンピューターは、分散ポリシーを受信しない可能性があります。

**ソフトウェアの制限のポリシーと AppLocker のアプリケーション制御機能の比較**

次の表は、ソフトウェアの制限のポリシー (SRP) 機能と AppLocker の機能を比較したものです。

|アプリケーション制御機能|SRP|AppLocker|
|----------------|----|-------|
|Scope|SRP ポリシーは、Windows XP および Windows Server 2003 以降のすべての Windows オペレーティング システムに適用できます。|AppLocker ポリシーは、Windows Server 2008 R2、Windows Server 2012、Windows 7、および Windows 8 にのみ適用されます。|
|ポリシーの作成|SRP ポリシーはグループ ポリシーで管理され、GPO の管理者のみが SRP ポリシーを更新できます。 ローカル コンピューターの管理者は、ローカル GPO で定義された SRP ポリシーを変更できます。|AppLocker ポリシーはグループ ポリシーで管理され、GPO の管理者のみがポリシーを更新できます。 ローカル コンピューターの管理者は、ローカル GPO で定義された AppLocker ポリシーを変更できます。<p>AppLocker では、エラー メッセージをカスタマイズして、ヘルプを提供する Web ページにユーザーを誘導できます。|
|ポリシーの保守|SRP ポリシーを更新するには、ローカル セキュリティ ポリシー スナップイン (ポリシーがローカルに作成されている場合) またはグループ ポリシー管理コンソール (GPMC) を使う必要があります。|AppLocker ポリシーは、ローカル セキュリティ ポリシー スナップイン (ポリシーがローカルに作成されている場合)、GPMC、または Windows PowerShell の AppLocker コマンドレットを使って更新できます。|
|ポリシーの適用|SRP ポリシーは、グループ ポリシーを介して配布されます。|AppLocker ポリシーは、グループ ポリシーを介して配布されます。|
|実施モード|SRP は、"拒否リストモード" で機能します。管理者は、このエンタープライズで許可しないファイルの規則を作成できます。ファイルの残りの部分は、既定で実行できます。<p>SRP は、"許可リストモード" で構成することもできます。これは、既定ですべてのファイルがブロックされ、管理者が許可するファイルに対して許可規則を作成する必要があることを示します。|AppLocker は、既定では、"許可リストモード" で機能します。このモードでは、一致する許可規則があるファイルのみを実行できます。|
|制御できるファイルの種類|SRP では、次のファイルの種類を制御できます。<p>-実行可能ファイル<br />-Dll<br />-スクリプト<br />-Windows インストーラー<p>SRP では、ファイルの種類を個別に制御できません。 SRP の規則すべてが 1 つの規則のコレクションに含まれます。|AppLocker では、次のファイルの種類を制御できます。<p>-実行可能ファイル<br />-Dll<br />-スクリプト<br />-Windows インストーラー<br />-パッケージアプリとインストーラー (Windows Server 2012 および Windows 8)<p>AppLocker は、5 つのファイルの種類それぞれに対して、個別の規則のコレクションを保持します。|
|指定されたファイルの種類|SRP では、実行可能なファイルの種類の一覧をサポートしています。この一覧は拡張できます。 管理者は、実行可能と見なす必要があるファイルの拡張子を追加できます。|AppLocker では、この機能はサポートされません。 AppLocker では、現在、次のファイル拡張子がサポートされます。<p>-実行可能ファイル (.exe、.com)<br />-Dll (.ocx、.dll)<br />-スクリプト (.vbs、.js、ps1、.cmd、.bat)<br />-Windows インストーラー (.msi、.mst、.msp)<br />-パッケージアプリインストーラー (.appx)|
|ルールの種類|SRP では、4 つの規則の種類がサポートされます。<p>-ハッシュ<br />-Path<br />-署名<br />-インターネットゾーン|AppLocker では、3 つの規則の種類がサポートされます。<p>-ハッシュ<br />-Path<br />-パブリッシャー|
|ハッシュ値の編集|SRP を使用すると、管理者はカスタムハッシュ値を指定できます。|AppLocker では、ハッシュ値自体が計算されます。 内部的には、ポータブル実行可能ファイル (Exe および Dll) と Windows インストーラーの SHA1 Authenticode ハッシュと、残りの場合は SHA1 フラットファイルハッシュを使用します。|
|さまざまなセキュリティ レベルのサポート|SRP 管理者は、アプリを実行できるアクセス許可を指定できます。 そのため、管理者は、メモ帳が常に制限されたアクセス許可で実行され、管理者特権を使用せずに実行されるように規則を構成できます。<p>Windows Vista 以前の SRP では、複数のセキュリティ レベルがサポートされます。 Windows 7 では、この一覧は、[許可しない] と [無制限] の2つのレベルに制限されていました (基本ユーザーは許可されていません)。|AppLocker では、セキュリティ レベルがサポートされません。|
|パッケージアプリとパッケージアプリのインストーラーを管理する|不可能|.appx は、AppLocker が管理できる有効なファイルの種類です。|
|ユーザーまたはユーザー グループへの規則のターゲット設定|SRP の規則は、特定のコンピューター上のすべてのユーザーに適用されます。|AppLocker 規則は、特定のユーザーまたはユーザー グループを対象にできます。|
|規則の例外のサポート|SRP では、規則の例外がサポートされません。|AppLocker の規則には例外があり、管理者はこの例外を使用して、"Windows からのすべてを許可する" (Regedit.exe を除く) などの規則を作成できます。|
|監査モードのサポート|SRP では、監査モードがサポートされません。 SRP ポリシーをテストする唯一の方法は、テスト環境をセットアップして、何回か試してみることです。|AppLocker では、監査モードがサポートされます。このモードでは、管理者はユーザー エクスペリエンスに影響を与えずに、実際の運用環境でポリシーの影響をテストできます。 結果に問題がなければ、ポリシーの実施を開始できます。|
|ポリシーのエクスポートとインポートのサポート|SRP では、ポリシーのインポート/エクスポートがサポートされません。|AppLocker では、ポリシーのインポートとエクスポートがサポートされます。 これにより、サンプル コンピューターで AppLocker ポリシーを作成し、テストしてから、そのポリシーをエクスポートし、目的の GPO にインポートすることができます。|
|規則の実施|内部的に、SRP の規則は、安全性の低いユーザー モードで実施されます。|内部的には、Exe および Dll の AppLocker 規則はカーネルモードで適用され、ユーザーモードでの適用よりも安全性が高くなります。|

## <a name="system-requirements"></a>システム要件
ソフトウェアの制限のポリシーは、Windows Server 2003 以降および Windows XP 以降を実行しているコンピューターでのみ構成および適用できます。 ソフトウェアの制限のポリシーを含むグループポリシーオブジェクトを配布するには、グループポリシーが必要です。

## <a name="software-restriction-policies-components-and-architecture"></a>ソフトウェアの制限のポリシーのコンポーネントとアーキテクチャ
ソフトウェアの制限のポリシーは、ソフトウェアの制限のポリシーに準拠したオペレーティングシステムとアプリケーションに対して、ソフトウェアプログラムの実行時の実行を制限するメカニズムを提供します。

大まかに言えば、ソフトウェアの制限のポリシーは、次のコンポーネントで構成されています。

-   ソフトウェアの制限のポリシー API。 アプリケーションプログラミングインターフェイス (Api) は、ソフトウェアの制限のポリシーを構成するルールを作成および構成するために使用されます。 ソフトウェアの制限のポリシー Api は、ソフトウェアの制限のポリシーのクエリ、処理、および適用に使用できます。

-   ソフトウェアの制限のポリシー管理ツール。 これは、管理者がソフトウェアの制限のポリシーを作成および編集するために使用する、**ローカルグループポリシーオブジェクトエディター**スナップインの**ソフトウェアの制限のポリシー**の拡張機能で構成されます。

-   ソフトウェアの制限のポリシー Api を呼び出して、実行時にソフトウェアの制限のポリシーを適用する一連のオペレーティングシステム Api とアプリケーション。

-   Active Directory とグループポリシー。 ソフトウェアの制限のポリシーは、グループポリシーインフラストラクチャに依存して、ソフトウェアの制限のポリシーを Active Directory から適切なクライアントに伝達します。また、これらのポリシーの適用を適切な対象コンピューターに対してスコープ設定およびフィルター処理します。

-   Authenticode および WinVerify 信頼 Api は、署名された実行可能ファイルを処理するために使用されます。

-   イベント ビューアー。 ソフトウェアの制限のポリシーによって使用される関数は、イベントをイベントビューアーログに記録します。

-   ポリシーの結果セット (RSoP)。クライアントに適用される有効なポリシーの診断に役立ちます。

SRP アーキテクチャの詳細、SRP がルール、プロセス、および相互作用を管理する方法の詳細については、Windows Server 2003 テクニカルライブラリの「 [ソフトウェアの制限のポリシーのしくみ](/previous-versions/windows/it-pro/windows-server-2003/cc786941(v=ws.10)) 」を参照してください。

## <a name="best-practices"></a><a name="BKMK_Best_Practices"></a>ベスト プラクティス

### <a name="do-not-modify-the-default-domain-policy"></a>既定のドメインポリシーを変更しないでください。

-   既定のドメインポリシーを編集しない場合は、カスタマイズされたドメインポリシーで何らかの問題が発生した場合に、既定のドメインポリシーを再適用するオプションが常にあります。

### <a name="create-a-separate-group-policy-object-for-software-restriction-policies"></a>ソフトウェアの制限のポリシー用に個別のグループポリシーオブジェクトを作成します。

-   ソフトウェアの制限のポリシー用に個別のグループポリシーオブジェクト (GPO) を作成する場合は、ドメインポリシーの残りの部分を無効にせずに、ソフトウェアの制限のポリシーを緊急時に無効にすることができます。

### <a name="if-you-experience-problems-with-applied-policy-settings-restart-windows-in-safe-mode"></a>適用されたポリシー設定で問題が発生した場合は、Windows をセーフモードで再起動します。

-   Windows がセーフモードで起動している場合は、ソフトウェアの制限のポリシーは適用されません。 ソフトウェアの制限のポリシーを使用してワークステーションを誤ってロックダウンした場合は、コンピューターをセーフモードで再起動し、ローカル管理者としてログオンし、ポリシーを変更して、 **gpupdate**を実行し、コンピューターを再起動してから、通常どおりにログオンします。

### <a name="use-caution-when-defining-a-default-setting-of-disallowed"></a>既定の設定の "許可しない" を定義する場合は注意してください。

-   [ **許可**しない] の既定の設定を定義すると、明示的に許可されているソフトウェアを除き、すべてのソフトウェアが許可されません。 開くファイルには、開くことができるソフトウェアの制限のポリシー規則が必要です。

-   システムから管理者がロックされるのを防ぐために、既定のセキュリティレベルを [ **許可**しない] に設定すると、4つのレジストリパスの規則が自動的に作成されます。 これらのレジストリパスの規則を削除または変更できます。ただし、これは推奨されません。

### <a name="for-best-security-use-access-control-lists-in-conjunction-with-software-restriction-policies"></a>セキュリティを最大限に高めるには、アクセス制御リストをソフトウェアの制限のポリシーと組み合わせて使用します。

-   ユーザーは、許可されていないファイルの名前変更や移動、または無制限のファイルの上書きによって、ソフトウェアの制限のポリシーを回避することができます。 このため、アクセス制御リスト (Acl) を使用して、これらのタスクを実行するために必要なアクセス権をユーザーに拒否することをお勧めします。

### <a name="test-new-policy-settings-thoroughly-in-test-environments-before-applying-the-policy-settings-to-your-domain"></a>ポリシー設定をドメインに適用する前に、テスト環境で新しいポリシー設定を十分にテストします。

-   新しいポリシー設定の動作は、最初の予想とは異なる場合があります。 テストにより、ネットワーク経由でポリシー設定を展開するときに問題が発生する可能性が減少します。

-   新しいポリシー設定をテストするために、組織のドメインとは別にテストドメインをセットアップすることができます。 テスト GPO を作成してテスト組織単位にリンクすることによって、ポリシー設定をテストすることもできます。 テストユーザーがポリシー設定を十分にテストしたら、テスト GPO をドメインにリンクすることができます。

-   [テストなしでプログラムまたはファイルを **許可** しない] に設定して、影響を確認することはできません。 特定のファイルに対する制限は、コンピューターまたはネットワークの操作に重大な影響を与える可能性があります。

-   間違って入力された情報や入力の誤りが原因で、予期したとおりに動作しないポリシー設定が発生する可能性があります。 新しいポリシー設定を適用する前にテストすると、予期しない動作を防ぐことができます。

### <a name="filter-user-policy-settings-based-on-membership-in-security-groups"></a>セキュリティグループのメンバーシップに基づいて、ユーザーポリシー設定をフィルター処理します。

-   ポリシー設定を適用しないユーザーまたはグループを指定するには、GPO の [プロパティ] ダイアログボックスの [**セキュリティ**] タブにある [**グループポリシー**と**読み取り**] チェックボックスをオフにします。

-   読み取りアクセス許可が拒否された場合、このポリシー設定はコンピューターによってダウンロードされません。 その結果、不要なポリシー設定をダウンロードすることで帯域幅が少なくなり、ネットワークをより迅速に機能させることができます。 読み取りアクセス許可を拒否するには、GPO の [プロパティ] ダイアログボックスの [**セキュリティ**] タブにある [**読み取り**] チェックボックス**をオンに**します。

### <a name="do-not-link-to-a-gpo-in-another-domain-or-site"></a>別のドメインまたはサイトの GPO にリンクしないでください。

-   別のドメインまたはサイトの GPO にリンクすると、パフォーマンスが低下する可能性があります。

## <a name="additional-resources"></a>その他のリソース

|コンテンツ タイプ|参考資料|
|--------|-------|
|**Planning**|[ソフトウェアの制限のポリシーのテクニカル リファレンス](/previous-versions/windows/it-pro/windows-server-2003/cc728085(v=ws.10))|
|**操作**|[ソフトウェア制限ポリシーの管理](administer-software-restriction-policies.md)|
|**トラブルシューティング**|[ソフトウェアの制限のポリシーのトラブルシューティング (2003)](/previous-versions/windows/it-pro/windows-server-2003/cc737011(v=ws.10))|
|**Security**|[ソフトウェアの制限のポリシーに関する脅威と対策 (2008)](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd349795(v=ws.10))<p>[ソフトウェアの制限のポリシーに関する脅威と対策 (2008 R2)](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/hh125926(v=ws.10))|
|**ツールと設定**|[ソフトウェアの制限ポリシーのツールおよび設定 (2003)](/previous-versions/windows/it-pro/windows-server-2003/cc782454(v=ws.10))|
|**コミュニティ リソース**|[ソフトウェアの制限のポリシーによるアプリケーションのロックダウン](/previous-versions/technet-magazine/cc510322(v=msdn.10)?pr=blog)|
