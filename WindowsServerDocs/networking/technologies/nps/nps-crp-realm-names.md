---
title: 領域名
description: このトピックでは、Windows Server 2016 でのネットワークポリシーサーバーの接続要求処理での領域名の使用の概要について説明します。
manager: brianlic
ms.prod: windows-server
ms.technology: networking
ms.topic: article
ms.assetid: d011eaad-f72a-4a83-8099-8589c4ee8994
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 7f9c611b793df36c2e588b2fa099df4e5382194c
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71405463"
---
# <a name="realm-names"></a>領域名

>適用対象: Windows Server (半期チャネル)、Windows Server 2016


このトピックでは、ネットワークポリシーサーバーの接続要求処理での領域名の使用の概要について説明します。

ユーザー名 RADIUS 属性は、通常、ユーザーアカウントの場所とユーザーアカウント名を含む文字列です。 ユーザーアカウントの場所は、領域名または領域名とも呼ばれ、ドメインの概念 (DNS ドメイン、Active Directory®ドメイン、Windows NT 4.0 ドメインなど) と同義です。 たとえば、ユーザーアカウントが example.com という名前のドメインのユーザーアカウントデータベースにある場合、example.com は領域名です。

別の例では、ユーザー名 RADIUS 属性にユーザー名 user1@example.comが含まれている場合、user1 はユーザーアカウント名、example.com は領域名です。 領域名は、プレフィックスまたはサフィックスとしてユーザー名に表示できます。

- 例 **\ user1**。 この例では、領域名の**例**はプレフィックスです。また、ドメインサービス \(AD DS\) ドメイン&reg; Active Directory の名前でもあります。

- <strong>user1@example.com</strong>。 この例では、領域名**example.com**はサフィックスです。DNS ドメイン名または AD DS ドメインの名前のいずれかです。

RADIUS インフラストラクチャを設計および展開するときに、接続要求ポリシーで構成された領域名を使用して、radius クライアント (ネットワークアクセスサーバーとも呼ばれます) から radius サーバーに接続要求がルーティングされるようにすることができます。接続要求を認証および承認します。

Nps が既定の接続要求ポリシーを使用して RADIUS サーバーとして構成されている場合、nps は、NPS がメンバーとなっているドメインと信頼されているドメインに対する接続要求を処理します。

RADIUS プロキシとして機能し、信頼されていないドメインに接続要求を転送するように NPS を構成するには、新しい接続要求ポリシーを作成する必要があります。 新しい接続要求ポリシーでは、転送する接続要求のユーザー名属性に含まれる領域名を使用して、ユーザー名属性を構成する必要があります。 また、リモート RADIUS サーバーグループを使用して接続要求ポリシーを構成する必要があります。 接続要求ポリシーを使用すると、NPS は、ユーザー名属性の領域部分に基づいて、どの接続要求をリモート RADIUS サーバーグループに転送するかを計算できます。

## <a name="acquiring-the-realm-name"></a>領域名を取得しています

ユーザー名の領域名の部分は、ユーザーが接続試行時にパスワードベースの資格情報を入力したとき、またはユーザーのコンピューターの接続マネージャー (CM) プロファイルが領域名を自動的に提供するように構成されているときに指定されます。

ネットワーク接続の試行時に資格情報を入力するときに、ネットワークのユーザーに領域名を提供するように指定できます。

たとえば、ユーザーがダイヤルアップまたは仮想プライベートネットワーク (VPN) 接続を行うときに、 **[接続]** ダイアログボックスの ユーザー **[名]** にユーザーアカウント名と領域名を含むユーザー名を入力するように要求できます。

さらに、接続マネージャー管理キット (CMAK) を使用してカスタムダイヤルパッケージを作成した場合、ユーザーのコンピューターにインストールされている CM プロファイルのユーザーアカウント名に自動的に領域名を追加することで、ユーザーを支援できます。 たとえば、CM プロファイルに領域名とユーザー名の構文を指定して、ユーザーが資格情報を入力するときにユーザーアカウント名を指定するだけで済むようにすることができます。 この場合、ユーザーは、ユーザーアカウントが存在するドメインを把握しておく必要はありません。

認証プロセス中に、ユーザーがパスワードベースの資格情報を入力すると、ユーザー名がアクセスクライアントからネットワークアクセスサーバーに渡されます。 ネットワークアクセスサーバーは、接続要求を構築し、RADIUS プロキシまたはサーバーに送信されるアクセス要求メッセージのユーザー名 RADIUS 属性内に領域名を含めます。

RADIUS サーバーが NPS の場合、構成された接続要求ポリシーのセットに対してアクセス要求メッセージが評価されます。 接続要求ポリシーの条件には、ユーザー名属性の内容の指定を含めることができます。

受信メッセージのユーザー名属性内で、領域名に固有の一連の接続要求ポリシーを構成できます。 これにより、NPS が RADIUS プロキシとして使用されている場合に、特定の領域名を持つ RADIUS メッセージを特定の RADIUS サーバーのセットに転送するルーティング規則を作成できます。

## <a name="attribute-manipulation-rules"></a>属性の操作規則

RADIUS メッセージがローカルで処理される前 (NPS が RADIUS サーバーとして使用されている場合)、または別の RADIUS サーバーに転送される前 (NPS が RADIUS プロキシとして使用されている場合) は、メッセージのユーザー名属性を属性の操作規則によって変更できます。 ユーザー名属性の属性の操作規則を構成するには、接続要求ポリシーのプロパティの **[条件]** タブで **[ユーザー名]** を選択します。 NPS 属性の操作規則では、正規表現の構文を使用します。

ユーザー名属性の属性の操作規則を構成して、次の変更を行うことができます。

- 領域の削除\)とも呼ばれる、ユーザー名から領域名を削除 \(ます。 たとえば、ユーザー名 user1@example.com は user1 に変更されます。

- 領域名を変更しますが、構文は変更しないでください。 たとえば、ユーザー名 user1@example.com が user1@wcoast.example.comに変更されます。

- 領域名の構文を変更します。 たとえば、ユーザー名の例 \ user1 が user1@example.comに変更されます。

構成した属性の操作規則に従って、ユーザー名属性が変更された後、最初に一致する接続要求ポリシーの追加設定を使用して、次のことを判断します。

- NPS がアクセス要求メッセージをローカルで処理します (NPS が RADIUS サーバーとして使用されている場合)。

- NPS は、(NPS が RADIUS プロキシとして使用されている場合) 別の RADIUS サーバーにメッセージを転送します。

## <a name="configuring-the-nps-supplied-domain-name"></a>NPS によって指定されたドメイン名の構成

ユーザー名にドメイン名が含まれていない場合、NPS は1つを提供します。 既定では、NPS が指定したドメイン名は、NPS がメンバーとなっているドメインです。 次のレジストリ設定を使用して、NPS によって指定されたドメイン名を指定できます。

    
    HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\RasMan\PPP\ControlProtocols\BuiltIn\DefaultDomain
    

>[!CAUTION]
>レジストリを誤って編集すると、システムに重大な障害をもたらす可能性があります。 レジストリを変更する前に、コンピューター上の重要なデータのバックアップを作成する必要があります。

Microsoft 以外のネットワークアクセスサーバーの中には、ユーザーによって指定されたドメイン名を削除または変更するものがあります。 その結果、ネットワークアクセス要求は既定のドメインに対して認証されますが、これはユーザーのアカウントのドメインではない可能性があります。 この問題を解決するには、ユーザー名を正確なドメイン名で正しい形式に変更するように RADIUS サーバーを構成します。
