---
title: 高パフォーマンスネットワーク
description: このトピックでは、Windows Server 2016 のオフロードおよび最適化テクノロジの概要について説明し、これらのテクノロジに関するその他のガイダンスへのリンクを示します。
ms.prod: windows-server
ms.technology: networking
ms.topic: article
ms.assetid: 0cafb1cc-5798-42f5-89b6-3ffe7ac024ba
manager: dougkim
ms.author: lizross
author: eross-msft
ms.date: 09/12/2018
ms.openlocfilehash: 7b2030535e65a94e285a3db00779dddb85411c95
ms.sourcegitcommit: da7b9bce1eba369bcd156639276f6899714e279f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/26/2020
ms.locfileid: "80316994"
---
# <a name="hardware-only-ho-features-and-technologies"></a>ハードウェアのみ (HO) の機能とテクノロジ

これらのハードウェアアクセラレータは、ソフトウェアと組み合わせてネットワークのパフォーマンスを向上させますが、ソフトウェア機能の一部には深くません。 これらの例としては、割り込みモデレーション、フロー制御、受信側 IPv4 チェックサムオフロードなどがあります。

>[!TIP]
>インストールされている NIC でサポートされている場合は、SH およびホー機能を使用できます。 以下の機能の説明では、NIC が機能をサポートしているかどうかを確認する方法について説明します。

## <a name="address-checksum-offload"></a>アドレスチェックサムオフロード

アドレスチェックサムオフロードは、送信と受信の両方について、アドレスチェックサム (IP、TCP、UDP) の計算を NIC ハードウェアにオフロードする NIC 機能です。

受信パスでは、チェックサムオフロードによって IP、TCP、および UDP ヘッダー内のチェックサムが計算され (必要に応じて)、チェックサムが成功したか、失敗したか、チェックされていないかが OS に示されます。 チェックサムが有効であることが NIC によってアサートされた場合、OS はパケット unchallenged を受け入れます。 NIC がチェックサムが無効であるかチェックされていない場合は、IP/TCP/UDP スタックによって内部的にチェックサムが再計算されます。 計算されたチェックサムが失敗した場合、パケットは破棄されます。

送信パスでは、チェックサムオフロードが計算され、必要に応じて、IP、TCP、または UDP ヘッダーにチェックサムが挿入されます。

送信パスでチェックサムのオフロードを無効にしても、Large Send Offload (LSO) 機能を使用してミニポートドライバーに送信されたパケットに対してチェックサムの計算と挿入が無効になることはありません。  すべてのチェックサムオフロード計算を無効にするには、ユーザーは LSO も無効にする必要があります。

_**アドレスチェックサムのオフロードの管理**_

詳細プロパティには、いくつかの異なるプロパティがあります。

-   IPv4 チェックサムオフロード

-   TCP チェックサムオフロード (IPv4)

-   TCP チェックサムオフロード (IPv6)

-   UDP チェックサムオフロード (IPv4)

-   UDP チェックサムオフロード (IPv6)

既定では、これらのすべてが常に有効になっています。 これらのオフロードは常に有効にすることをお勧めします。

チェックサムのオフロードは、NetAdapterChecksumOffload コマンドレットと NetAdapterChecksumOffload コマンドレットを使用して管理できます。 たとえば、次のコマンドレットは、TCP (IPv4) および UDP (IPv4) チェックサムの計算を有効にします。

```PowerShell
Enable-NetAdapterChecksumOffload –Name * -TcpIPv4 -UdpIPv4
```

_**アドレスチェックサムのオフロードの使用に関するヒント**_

アドレスチェックサムオフロードは、ワークロードや状況に関係なく、常に有効にする必要があります。 この最も基本的なすべてのオフロードテクノロジは、常にネットワークパフォーマンスを向上させます。 チェックサムオフロードは、receive side scaling (RSS)、receive segment 合体 (RSC)、および large send offload (LSO) を含む他のステートレスオフロードにも必要です。

## <a name="interrupt-moderation-im"></a>割り込みモデレーション (IM)

IM は、オペレーティングシステムを中断する前に、複数の受信パケットをバッファーします。 NIC は、パケットを受信するとタイマーを開始します。 バッファーがいっぱいになった場合、またはタイマーの有効期限が切れた場合は、NIC によってオペレーティングシステムが中断されます。 

多くの Nic は、割り込みのモデレーションのために、単にオン/オフをサポートしています。 ほとんどの Nic は、IM の低、中、高レートの概念をサポートしています。 異なるレートは、短いタイマーと、待機時間を短縮するための適切なバッファーサイズの調整を表します。

割り込みを減らし、パケット配信を過度に遅らせるというバランスを取ることができます。 一般に、割り込みモデレーションが有効になっていると、パケット処理の効率が向上します。 高パフォーマンスまたは低待機時間のアプリケーションでは、割り込みのモデレーションを無効にしたり減らしたりすることによる影響を評価する必要がある場合があります。

## <a name="jumbo-frames"></a>Jumbo Frame

ジャンボフレームは、アプリケーションが既定の1500バイトよりはるかに大きいフレームを送信できるようにする、NIC およびネットワークの機能です。 通常、ジャンボフレームの制限は約9000バイトですが、サイズが小さくなる場合があります。

Windows Server 2012 R2 では、ジャンボフレームのサポートが変更されていませんでした。

Windows Server 2016 では、MTU_for_HNV の新しいオフロードがあります。 この新しいオフロードは、ジャンボフレームの設定と連携して、カプセル化されたトラフィックがホストと隣接するスイッチとの間にセグメンテーションを必要としないようにします。 SDN スタックのこの新機能により、NIC は、提供する MTU とネットワーク上で使用する MTU を自動的に計算します。 これらの MTU 値は、HNV オフロードが使用されている場合は異なります。 (機能の互換性テーブルでは、テーブル1の MTU_for_HNV は、HNVv2 のオフロードに直接関連しているため、HNVv2 のオフロードと同じ対話が行われます)。

## <a name="large-send-offload-lso"></a>Large Send Offload (LSO)

LSO を使用すると、アプリケーションは大量のデータブロックを NIC に渡すことができ、NIC はネットワークの最大転送単位 (MTU) 内に収まるパケットにデータを分割します。

## <a name="receive-segment-coalescing-rsc"></a>Receive Segment Coalescing (RSC)

受信セグメント結合は、"サイズの大きい受信オフロード" とも呼ばれ、ネットワーク割り込み間に到着した同じストリームの一部であるパケットを、それらをオペレーティングシステムに配信する前に1つのパケットに分割する NIC 機能です。 RSC は、Hyper-v 仮想スイッチにバインドされている Nic では使用できません。 詳細については、「 [Receive Segment 合体 (RSC)](https://docs.microsoft.com/windows-server/networking/technologies/hpn/rsc-in-the-vswitch)」を参照してください。