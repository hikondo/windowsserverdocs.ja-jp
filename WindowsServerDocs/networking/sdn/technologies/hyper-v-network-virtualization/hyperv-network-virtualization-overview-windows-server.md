---
title: Windows Server 2016 での hyper-v ネットワーク仮想化の概要
description: このトピックでは、Windows Server 2016 での Hyper-v ネットワーク仮想化の概要について説明します。
manager: brianlic
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: networking-sdn
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 0115b7ad-d229-4c69-9d7e-a3f5fbaa3b2f
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 0eda30b0980f2080f1603eb906fd308440316248
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71405944"
---
# <a name="hyper-v-network-virtualization-overview-in-windows-server-2016"></a>Windows Server 2016 での hyper-v ネットワーク仮想化の概要

>適用対象:Windows Server (半期チャネル)、Windows Server 2016

Windows Server 2016 および Virtual Machine Manager では、Microsoft はエンドツーエンドのネットワーク仮想化ソリューションを提供しています。  Microsoft のネットワーク仮想化ソリューションは、次の5つの主要なコンポーネントで構成されています。  

-   **Windows Server 用の Windows Azure Pack**には、仮想ネットワークを作成するためのテナント接続ポータルと、仮想ネットワークを管理するための管理ポータルが用意されています。  

-   **Virtual Machine Manager** (VMM) を使用すると、ネットワークファブリックを一元的に管理できます。  

-   **Microsoft ネットワーク コント ローラー**は、データセンターの仮想および物理インフラストラクチャの管理、構成、監視、およびトラブルシューティングの自動化を行う、一元的でプログラミング可能なポイントを提供します。  

-   **Hyper-V ネットワーク仮想化** は、ネットワーク トラフィックを仮想化するために必要なインフラストラクチャを提供します。  

-   **Hyper-V ネットワーク仮想化ゲートウェイ**は、仮想ネットワークと物理ネットワーク間の接続を可能にします。  

このトピックでは、Windows Server 2016 の Hyper-v ネットワーク仮想化 (全体的なネットワーク仮想化ソリューションの一部) の概念と主な利点と機能について説明します。 エンタープライズ ワークロード統合を考慮したプライベート クラウドおよび Infrastructure as a Service (IaaS) のパブリック クラウド サービス プロバイダーの両方に対するネットワーク仮想化の利点を説明します。  

Windows Server 2016 でのネットワーク仮想化の技術的な詳細については、 [Windows server 2016 の「Hyper-v ネットワーク仮想化の技術的な詳細](../../../sdn/technologies/hyper-v-network-virtualization/hyperv-network-virtualization-technical-details-windows-server.md)」を参照してください。  

**意味は**  

-   [Hyper-v ネットワーク仮想化の概要](assetId:///bf1dba9d-1960-4dd2-a5e2-99466a02044b)(Windows Server 2012 R2)  

-   [Hyper-v の概要](assetId:///5aad349f-ef06-464a-b36f-366fbb040143)  

-   [Hyper-V 仮想スイッチの概要](assetId:///e6ec46af-6ef4-49b3-b1f1-5268dc03f05b)  

## <a name="BKMK_OVER"></a>機能の説明  
Hyper-v ネットワーク仮想化では、サーバー仮想化 (ハイパーバイザー) によってオペレーティングシステムに "仮想マシン" が提供されるのと同様に、仮想マシンに "仮想ネットワーク" (VM ネットワークと呼ばれます) を提供します。 ネットワーク仮想化は、仮想ネットワークを物理ネットワーク インフラストラクチャから切り離し、仮想マシンのプロビジョニングから VLAN や階層的な IP アドレス割り当ての制約を除去します。 このような柔軟性により、ユーザーは IaaS クラウドを簡単に移動でき、ホスト側やデータセンターの管理者はインフラストラクチャを効率よく管理できるようになる一方で、必要なマルチテナントの分離、セキュリティ要件、およびオーバーラップする仮想マシン IP アドレスのサポートは維持されます。  

ユーザーはデータセンターをクラウドにシームレスに拡張することを希望しています。 現在は、そのようなシームレスなハイブリッド クラウド アーキテクチャには技術的な課題があります。 最も大きな課題の1つは、クラウド内の既存のネットワークトポロジ (サブネット、IP アドレス、ネットワークサービスなど) を再利用し、オンプレミスのリソースとそのクラウドリソースの間を橋渡しすることです。  Hyper-V ネットワーク仮想化は、基盤の物理ネットワークから独立した VM ネットワークの概念を提供します。 1 つ以上の仮想サブネットから構成される VM ネットワークのこの概念により、仮想ネットワークに接続された仮想マシンの物理ネットワーク内の正確な場所は、仮想ネットワーク トポロジから分離されます。 その結果、クラウド内の既存の IP アドレスとトポロジを維持しながら仮想サブネットをクラウドに簡単に移動でき、既存のサービスはサブネットの物理的な場所に関係なく動作を続けることができます。 つまり、Hyper-V ネットワーク仮想化はシームレスなハイブリッド クラウドを可能にします。  

ハイブリッド クラウドに加えて、データセンターを統合し、プライベート クラウドを作成することにより、クラウド アーキテクチャの内部的な効率性とスケーラビリティのメリットを得られます。 Hyper-v ネットワーク仮想化を使用すると、実際の物理ネットワークトポロジから事業単位のネットワークトポロジを分離することによって、プライベートクラウドの柔軟性と効率性を向上させることができます。 これにより、事業単位は、相互に分離していても、既存のネットワーク トポロジを引き続き維持しながら、内部プライベート クラウドを簡単に共有できます。 データセンター運用チームは、サーバーを停止することなくデータセンター内のどこにでもワークロードを柔軟に展開し、動的に移動できるため、運用効率が向上し、データセンター全体が効率化されます。  

ワークロード所有者にとっての主な利点は、IP アドレスを変更したりアプリケーションを書き直すことなく、ワークロードの "トポロジ" をクラウドに移動できることです。 たとえば、典型的な 3 層 LOB アプリケーションは、フロントエンド層、ビジネス ロジック層、およびデータベース層で構成されます。 Hyper-V ネットワーク仮想化では、ポリシーを使用することにより、サービスのルーティング トポロジと IP アドレスを維持しながら (つまり、仮想マシン IP アドレス)、3 つの階層の全部または一部をクラウドに移動できます。アプリケーションを変更する必要はありません。  

インフラストラクチャ所有者の場合は、仮想マシンの配置の柔軟性が増すため、仮想マシンを変更したりネットワークを再構成したりしなくても、データセンター内の任意の場所にワークロードを移動できます。 たとえば、Hyper-V ネットワーク仮想化ではサブネット間のライブ マイグレーションが可能であるため、サービスを停止することなく仮想マシンをデータセンター内のどこにでもライブ マイグレーションできます。 従来のライブ マイグレーションは同じサブネットに限られ、仮想マシンの場所が制限されていました。 サブネット間のライブ マイグレーションにより、管理者は動的なリソース要件やエネルギー効率に基づいてワークロードを統合でき、ユーザーのワークロード稼働時間を中断することなくインフラストラクチャのメンテナンスを実行できます。  

## <a name="BKMK_APP"></a>実用的なアプリケーション  
仮想化データセンターの飛躍と共に、IT 組織やホスティング プロバイダー (コロケーションを運用したり物理サーバーのレンタルを行うプロバイダー) は、顧客にオンデマンドで簡単にサーバー インスタンスを提供できる柔軟性に優れた仮想化インフラストラクチャを展開するようになってきました。 この新しい形態のサービスは Infrastructure as a Service (IaaS) と呼ばれています。 Windows Server 2016 では、企業ユーザーがプライベートクラウドを構築し、IT as a service の運用モデルに移行できるようにするために必要なプラットフォーム機能がすべて提供されます。 また、Windows Server 2016 2016 を使用すると、ホスト側はパブリッククラウドを構築し、IaaS ソリューションを顧客に提供することができます。 Virtual Machine Manager および Windows Azure Pack と組み合わせて Hyper-v ネットワーク仮想化ポリシーを管理することにより、強力なクラウドソリューションが提供されます。  

Windows Server 2016 Hyper-v ネットワーク仮想化は、企業が専用 IaaS クラウドを拡張するときに発生する管理オーバーヘッドを削減するポリシーベースでソフトウェア制御のネットワーク仮想化を提供し、クラウドのホストを改善します。より高いリソース使用率を実現するために、仮想マシンを管理するための柔軟性とスケーラビリティ。  

異なる組織部門 (専用クラウドの場合) または異なる顧客 (ホステッド クラウドの場合) の仮想マシンを扱う IaaS のシナリオでは、セキュアな分離が必要となります。 現在のソリューションである仮想ローカルエリアネットワーク (Vlan) では、このシナリオに大きな欠点があります。  

**Vlan**  

アドレス空間の再利用およびテナントの分離のための機構としては、現在ほとんどの組織で VLAN が使用されています。 VLAN では、イーサネット フレーム ヘッダーに明示的に挿入されたタグ (VLAN ID) が使用されます。分離はイーサネット スイッチによって行われ、トラフィックは、同じ VLAN ID のネットワーク ノードにしか流れないように制限されます。 VLAN の主な欠点を以下に示します。  

-   運用環境のスイッチの再構成には煩雑な作業が伴うため、動的データセンター内で仮想マシンまたは分離境界を移動する際に、不注意によって機能を停止させてしまうリスクが高くなります。  

-   最大 VLAN 数は 4094 であり、一般的なスイッチでサポートされる VLAN ID 数は 1000 程度であるため、スケーラビリティは制限されています。  

-   単一の IP サブネット内に制限されます。1 つの VLAN 内のノード数には限りがあり、仮想マシンの配置は物理的な場所に基づいて制限されます。 VLAN は複数のサイトに拡張できますが、VLAN 全体が同じサブネット上に存在する必要があります。  

**IP アドレスの割り当て**  

VLAN の欠点に加えて、仮想マシンの IP アドレス割り当てにも次のような問題があります。  

-   データセンター ネットワーク インフラストラクチャ内の物理的な場所によって、仮想マシンの IP アドレスが決まります。 そのため、クラウドに移動するときは通常、サービス ワークロードの IP アドレスの変更が必要になります。  

-   ファイアウォール規則、リソース検出、ディレクトリ サービスなど、ポリシーは IP アドレスに結び付けられます。 IP アドレスを変更するときは、関連するすべてのポリシーの更新が必要です。  

-   仮想マシンの展開とトラフィックの分離は、トポロジに依存します。  

データセンターのネットワーク管理者は、データセンターの物理的なレイアウトを計画するときに、サブネットの物理的な配置とルーティングについて意思決定を行う必要があります。 このような決定の基になる IP およびイーサネット技術により、データセンター内の特定のラックに接続されている特定のサーバーまたはブレードで実行している仮想マシンに割り当てることのできる IP アドレスが左右されます。 データセンターにプロビジョニングされ、配置される仮想マシンは、IP アドレスに関係した選択肢と制限を忠実に守る必要があります。 したがって、よくある結果として、データセンターの管理者は新しい IP アドレスを仮想マシンに割り当てることになります。  

このような要件の問題は、アドレスだけでなく、セマンティック情報も IP アドレスに関連付けられることです。 たとえば、あるサブネットが、特定のサービスを含んでいたり、物理的に区別された場所に存在している場合があります。 ファイアウォール規則、アクセス制御ポリシー、IPsec のセキュリティ アソシエーションは一般に、IP アドレスと関連付けられます。 IP アドレスを変更すると、元の IP アドレスに基づくすべてのポリシーの調整を強いられます。 この再割り当ての負担があまりに大きいために、多くの企業は、新しいサービスのみをクラウドに展開し、既存のアプリケーションについてはクラウドへの移行を見送っています。  

Hyper-V ネットワーク仮想化は、ユーザーの仮想マシンの仮想ネットワークを、物理ネットワーク インフラストラクチャから切り離します。 その結果、ユーザーの仮想マシンは元の IP アドレスを維持でき、一方で、データセンター管理者は物理 IP アドレスまたは VLAN ID を再構成することなくデータセンター内の任意の場所にユーザーの仮想マシンをプロビジョニングできます。 次のセクションでは主な機能をまとめます。  

## <a name="BKMK_NEW"></a>重要な機能  
Windows Server 2016 の Hyper-v ネットワーク仮想化の主な機能、利点、および機能を次に示します。  

-   **柔軟なワークロード配置-Vlan なしでのネットワークの分離と IP アドレスの再利用を可能にします。**  

    Hyper-v ネットワーク仮想化では、顧客の仮想ネットワークをホスト側の物理ネットワークインフラストラクチャから切り離し、データセンター内でのワークロードの配置を自由に行うことができます。 仮想マシンのワークロード配置は、ソフトウェアで定義されたマルチテナント仮想化ポリシーに基づいて Hyper-V ホスト内で強制されるため、IP アドレス割り当てまたは物理ネットワークの VLAN 分離要件によって制限されなくなります。  

    IP アドレスがオーバーラップする異なるユーザーの仮想マシンを、同じホスト サーバーに展開できます。面倒な VLAN 構成は必要なく、IP アドレス階層に違反することはありません。 これにより、共有 IaaS ホスティング プロバイダーへのワークロードの移行が簡単になり、ユーザーは何も変更しなくてもワークロードを移動でき、仮想マシンの IP アドレスも変更する必要はありません。 ホスティング プロバイダーの場合、既存のネットワーク アドレス空間を共有 IaaS データセンターに拡張することを望む多数のユーザーをサポートしようとすると、オーバーラップする可能性のあるアドレス空間が共存できるようにユーザーごとに分離した VLAN を構成して維持する複雑な作業が必要になります。 Hyper-V ネットワーク仮想化では、オーバーラップするアドレスのサポートが容易になり、ホスティング プロバイダーが行う必要のあるネットワークの再構成は少なくて済みます。  

    さらに、物理インフラストラクチャのメンテナンスやアップグレードを行うときに、ユーザーのワークロードを停止する必要はありません。 Hyper-V ネットワーク仮想化では、特定のホスト、ラック、サブネット、VLAN、またはクラスター全体の仮想マシンを移行するときに、物理 IP アドレスの変更や大がかりな再構成は必要ありません。  

-   **共有される IaaS クラウドへのワークロードの移動が容易になります**  

    Hyper-V ネットワーク仮想化では、IP アドレスおよび仮想マシンの構成を変更する必要はありません。 これにより、IT 組織は、ワークロードの最小限の再構成またはインフラストラクチャ ツールとポリシーによって、より簡単にワークロードをデータセンターから共有 IaaS ホスティング プロバイダーに移動できます。 2 つのデータセンターが接続されている場合は、これらのツールを再構成なしで使い続けることができます。  

-   **サブネット間でライブマイグレーションを有効にする**  

    従来、仮想マシンのワークロードのライブマイグレーションは同じ IP サブネットまたは VLAN に制限されていました。これは、サブネットを越えると、仮想マシンのゲストオペレーティングシステムがその IP アドレスを変更する必要があるためです。 このアドレス変更により、既存の通信が切断され、仮想マシンで実行しているサービスが中断します。 Hyper-v ネットワーク仮想化を使用すると、ワークロードの IP アドレスを変更することなく、1つのサブネット内の Windows Server 2016 を実行しているサーバーから別のサブネット内の Windows Server 2016 を実行しているサーバーに、ワークロードをライブマイグレーションできます。 Hyper-V ネットワーク仮想化では、ライブ マイグレーションによる仮想マシンの位置の変更が更新され、移行される仮想マシンと通信中のホスト間で同期されることが保証されます。  

-   **分離されたサーバーとネットワーク管理の管理が容易になります。**  

    ワークロードの移行と配置が、基になる物理ネットワークの構成とは独立しているため、サーバー ワークロードの配置が単純化されます。 サーバー管理者はサービスとサーバーの管理に、ネットワーク管理者は全体的なネットワーク インフラストラクチャとトラフィック管理に専念することができます。 これにより、データセンター サーバー管理者は仮想マシンの IP アドレスの変更を行うことなく仮想マシンを展開および移行できます。 Hyper-V ネットワーク仮想化では仮想マシンをネットワーク トポロジとは関係なく配置できるためオーバーヘッドが減り、分離境界が変わる可能性がある配置が減ります。  

-   **ネットワークを単純化し、サーバー/ネットワークリソースの使用率を向上させる**  

    物理ネットワーク インフラストラクチャの縛りによって仮想マシンが自由に配置できなかったり、VLAN に由来した制限があることなどから、過剰なプロビジョニングや、リソースを十分に活かしきれない事態が生じています。 こうした縛りをなくすことによって、仮想マシンのワークロードはもっと自由に配置できるようになり、ネットワークの管理が省力化され、サーバーとネットワークのリソース使用効率は向上します。 Hyper-V ネットワーク仮想化は物理データセンターのコンテキストで VLAN をサポートします。 たとえば、データセンターですべての Hyper-V ネットワーク仮想化トラフィックを特定の VLAN で実行できます。  

-   **既存のインフラストラクチャと新しいテクノロジとの互換性**  

    Hyper-v ネットワーク仮想化は現在のデータセンターにデプロイできますが、新しいデータセンターの "フラットネットワーク" テクノロジと互換性があります。  

    たとえば、Windows Server 2016 の HNV は、VXLAN カプセル化形式とオープン vSwitch データベース管理プロトコル (SouthBound Interface (SBI) としての Open vSwitch) をサポートしています。  

-   **相互運用性とエコシステムの準備**  

    Hyper-V ネットワーク仮想化は、クロス プレミス接続、記憶域ネットワーク (SAN)、非仮想化リソース アクセスなど、既存リソースとの通信用の複数の構成をサポートします。 マイクロソフトは、エコシステム パートナーと協力して、Hyper-V ネットワーク仮想化のパフォーマンス、スケーラビリティ、管理性をサポートし、拡張します。  

-   **ポリシーベースの構成**  

    Windows Server 2016 のネットワーク仮想化ポリシーは、Microsoft ネットワークコントローラーを介して構成されます。 ネットワーク コント ローラーには、Restful Northbound API と、ポリシーを構成する Windows PowerShell インターフェイスがあります。 Microsoft ネットワークコントローラーの詳細については、「[ネットワークコントローラー](../../../sdn/technologies/network-controller/../../../sdn/technologies/network-controller/Network-Controller.md)」を参照してください。  

## <a name="BKMK_SOFT"></a>ソフトウェア要件  
Microsoft ネットワークコントローラーを使用する hyper-v ネットワーク仮想化には、Windows Server 2016 および Hyper-v の役割が必要です。  

## <a name="BKMK_LINKS"></a>関連項目  
Windows Server 2016 での Hyper-v ネットワーク仮想化の詳細については、次のリンクを参照してください。  


|       コンテンツの種類       |                                                                                                                                リファレンス                                                                                                                                |
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **コミュニティリソース**  |     -   [プライベートクラウドアーキテクチャのブログ](https://blogs.technet.com/b/privatecloud/archive/2012/03/19/cloud-datacenter-network-architecture-in-the-windows-server-8-era.aspx)<br />-Ask 質問: [cloudnetfb@microsoft.com](mailto:%20cloudnetfb@microsoft.com)     |
|         **RFC**          |                                                                                                     -VXLAN- [RFC 7348](https://www.rfc-editor.org/info/rfc7348)                                                                                                      |
| **関連テクノロジ** | -   [ネットワークコントローラー](../../../sdn/technologies/network-controller/../../../sdn/technologies/network-controller/Network-Controller.md)<br />-   [Hyper-v ネットワーク仮想化の概要](assetId:///bf1dba9d-1960-4dd2-a5e2-99466a02044b)(Windows Server 2012 R2) |

